<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Getting Started OpenWrt - Boyang Yan's Tech Blog</title><meta name=description content="This is Boyang Yan's Tech Blog"><meta property="og:title" content="Getting Started OpenWrt"><meta property="og:description" content="Introduction The OpenWrt Project is a Linux operating system targeting embedded devices. Instead of trying to create a single, static firmware, OpenWrt provides a fully writable filesystem with package management. This frees you from the application selection and configuration provided by the vendor and allows you to customize the device through the use of packages to suit any application.
OpenWrt official Website Here  .
In this article, I will talk about:"><meta property="og:type" content="article"><meta property="og:url" content="https://yanboyang.com/openwrt/"><meta property="og:image" content="https://yanboyang.com/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-12-12T11:42:00+08:00"><meta property="article:modified_time" content="2022-04-03T15:57:57+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://yanboyang.com/logo.png"><meta name=twitter:title content="Getting Started OpenWrt"><meta name=twitter:description content="Introduction The OpenWrt Project is a Linux operating system targeting embedded devices. Instead of trying to create a single, static firmware, OpenWrt provides a fully writable filesystem with package management. This frees you from the application selection and configuration provided by the vendor and allows you to customize the device through the use of packages to suit any application.
OpenWrt official Website Here  .
In this article, I will talk about:"><meta name=application-name content="LoveIt"><meta name=apple-mobile-web-app-title content="LoveIt"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=https://yanboyang.com/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://yanboyang.com/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://yanboyang.com/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=https://yanboyang.com/apple-touch-icon.png><link rel=mask-icon href=https://yanboyang.com/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=https://yanboyang.com/site.webmanifest><link rel=canonical href=https://yanboyang.com/openwrt/><link rel=prev href=https://yanboyang.com/zotero/><link rel=next href=https://yanboyang.com/bonding/><link rel=stylesheet href=https://yanboyang.com/lib/normalize/normalize.min.css><link rel=stylesheet href=https://yanboyang.com/css/style.min.css><link rel=stylesheet href=https://yanboyang.com/lib/fontawesome-free/all.min.css><link rel=stylesheet href=https://yanboyang.com/lib/animate/animate.min.css><meta name=baidu-site-verification content="wsCeKMuJ31RLblHf"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Getting Started OpenWrt","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/yanboyang.com\/openwrt\/"},"genre":"posts","keywords":"openwrt","wordcount":735,"url":"https:\/\/yanboyang.com\/openwrt\/","datePublished":"2021-12-12T11:42:00+08:00","dateModified":"2022-04-03T15:57:57+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Boyang Yan"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>("true"==="true"&&window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-101949995-1","auto"),ga("send","pageview"))</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-101949995-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script><div class=header-wrapper><div class=header-title><a href=https://yanboyang.com/ title="Boyang Yan's Tech Blog"></a></div><div class=menu><div class=menu-inner><a class=menu-item href=https://yanboyang.com/>Home </a><a class=menu-item href=https://yanboyang.com/posts/>Posts </a><a class=menu-item href=https://yanboyang.com/tags/>Tags </a><a class=menu-item href=https://yanboyang.com/categories/>Categories </a><a class=menu-item href=https://yanboyang.com/about/>About Me </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-101949995-1","auto"),ga("send","pageview"))</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-101949995-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script><div class=header-container><div class=header-wrapper><div class=header-title><a href=https://yanboyang.com/ title="Boyang Yan's Tech Blog"></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=https://yanboyang.com/ title>Home</a><a class=menu-item href=https://yanboyang.com/posts/ title>Posts</a><a class=menu-item href=https://yanboyang.com/tags/ title>Tags</a><a class=menu-item href=https://yanboyang.com/categories/ title>Categories</a><a class=menu-item href=https://yanboyang.com/about/ title>About Me</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">Getting Started OpenWrt</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://yanboyang.com/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>
Boyang Yan</a>
</span>&nbsp;<span class=post-category>included in <a href=https://yanboyang.com/categories/networking/><i class="far fa-folder fa-fw"></i>Networking</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-12-12>2021-12-12</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;735 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;4 minutes&nbsp;</div></div><div class="details toc" id=toc-static kept=true><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#compile-openwrt>Compile OpenWrt</a></li><li><a href=#installation>Installation</a><ul><li><a href=#proxmox>Proxmox</a><ul><li><a href=#firstly-upload-your-compiled-img-file-to-proxmox>Firstly, Upload your compiled IMG File to ProxMox</a></li><li><a href=#secondly-ssh-into-proxmox-and-using-the-below-script-create-a-new-vm-dot>Secondly, ssh into ProxMox and using the below Script create a new VM.</a></li></ul></li><li><a href=#raspberry-pi>Raspberry Pi</a></li></ul></li><li><a href=#set-up>Set-up</a></li></ul></nav></div></div><div class=content id=content><h2 id=introduction>Introduction</h2><p>The OpenWrt Project is a Linux operating system targeting embedded devices. Instead of trying to create a single, static firmware, OpenWrt provides a fully writable filesystem with package management. This frees you from the application selection and configuration provided by the vendor and allows you to customize the device through the use of packages to suit any application.</p><p>OpenWrt official Website <a href=https://openwrt.org/ target=_blank rel="noopener noreferrer">Here</a>
.</p><p>In this article, I will talk about:</p><ol><li>Compile Openwrt from Source Code.</li><li>Install Openwrt on ProxMox.</li><li>Basic Set-Up for Openwrt.</li></ol><h2 id=compile-openwrt>Compile OpenWrt</h2><ol><li><p>Make sure your have a avaiable Linux/MacOS system, offers recommand Ubuntu 18 LTS x64.</p></li><li><p>Install required packages.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>   sudo apt-get update
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   sudo apt-get -y install build-essential asciidoc binutils bzip2 curl gawk gettext git libncurses5-dev libz-dev patch python3.5 python2.7 unzip zlib1g-dev lib32gcc1 libc6-dev-i386 subversion flex uglifyjs git-core gcc-multilib p7zip p7zip-full msmtp libssl-dev texinfo libglib2.0-dev xmlto qemu-utils upx libelf-dev autoconf automake libtool autopoint device-tree-compiler g++-multilib antlr3 gperf
</span></span></code></pre></td></tr></table></div></div></li><li><p>Getting Source Code and enter direction.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>   git clone -b main --single-branch https://github.com/Lienol/openwrt openwrt
</span></span><span class=line><span class=cl>   <span class=nb>cd</span> openwrt
</span></span></code></pre></td></tr></table></div></div></li><li><p>Add additional package/plugin to Source Code, such as <strong>Passwall</strong>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>   vim feeds.conf.default
</span></span></code></pre></td></tr></table></div></div><p>Adding src-git at the end of file.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>   src-git passwall https://github.com/xiaorouji/openwrt-passwall
</span></span></code></pre></td></tr></table></div></div></li><li><p>Update the feeds</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>   ./scripts/feeds clean
</span></span><span class=line><span class=cl>   ./scripts/feeds update -a
</span></span><span class=line><span class=cl>   ./scripts/feeds install -a
</span></span></code></pre></td></tr></table></div></div></li><li><p>Configure the firmware image</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>   make menuconfig
</span></span></code></pre></td></tr></table></div></div><p><strong>NOTE</strong>:</p><ol><li><p>First three menu is very inportance, Please, carefully choose with your correct CPU architecture. For example, x86.</p></li><li><p>Settings your package/plugins luci-app, such as, luci-app-passwall</p></li></ol></li><li><p>Downloading DL library.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>   make -j8 download <span class=nv>v</span><span class=o>=</span>s
</span></span></code></pre></td></tr></table></div></div></li><li><p>Start Compile</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>   make -j1 <span class=nv>V</span><span class=o>=</span>s
</span></span></code></pre></td></tr></table></div></div><p><strong>NOTE</strong>: -j1 is followed by the number of threads. Single thread is recommended for the first compilation.</p></li><li><p>Output path after compilation.
<strong>openwrt/bin/targets</strong></p></li></ol><h2 id=installation>Installation</h2><h3 id=proxmox>Proxmox</h3><p><a href=https://www.77bx.com/34.html target=_blank rel="noopener noreferrer">https://www.77bx.com/34.html</a></p><h4 id=firstly-upload-your-compiled-img-file-to-proxmox>Firstly, Upload your compiled IMG File to ProxMox</h4><p>sftp into ProxMox.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>[yanboyang713@manjaro] ➜ 64 (U main) sftp root@192.168.1.2
</span></span></span><span class=line><span class=cl><span class=go>The authenticity of host &#39;192.168.1.2 (192.168.1.2)&#39; can&#39;t be established.
</span></span></span><span class=line><span class=cl><span class=go>ED25519 key fingerprint is SHA256:VPD220yr70tQsDuIn/z41hTWzte0bZ1k6wF8JjBzjiw.
</span></span></span><span class=line><span class=cl><span class=go>This key is not known by any other names
</span></span></span><span class=line><span class=cl><span class=go>Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
</span></span></span><span class=line><span class=cl><span class=go>Warning: Permanently added &#39;192.168.1.2&#39; (ED25519) to the list of known hosts.
</span></span></span><span class=line><span class=cl><span class=go>root@192.168.1.2&#39;s password:
</span></span></span><span class=line><span class=cl><span class=go>Connected to 192.168.1.2.
</span></span></span></code></pre></td></tr></table></div></div><p>Uploading</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sftp&gt; put openwrt-x86-64-generic-squashfs-combined.img.gz
</span></span><span class=line><span class=cl>Uploading openwrt-x86-64-generic-squashfs-combined.img.gz to /root/openwrt-x86-64-generic-squashfs-combined.img.gz
</span></span><span class=line><span class=cl>openwrt-x86-64-generic-squashfs-combined.img.gz                                                          100%   53MB 111.4MB/s   00:00
</span></span><span class=line><span class=cl>sftp&gt;
</span></span></code></pre></td></tr></table></div></div><p><strong>NOTE</strong>:</p><ol><li><p>List local directory.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>   sftp&gt; lls
</span></span></span><span class=line><span class=cl><span class=go>   openwrt-x86-64-generic-squashfs-combined.img.gz
</span></span></span></code></pre></td></tr></table></div></div></li><li><p>List remote directory.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>   sftp&gt; ls
</span></span></span><span class=line><span class=cl><span class=go>   ROSinstall.sh  interfaces     temp
</span></span></span></code></pre></td></tr></table></div></div></li></ol><h4 id=secondly-ssh-into-proxmox-and-using-the-below-script-create-a-new-vm-dot>Secondly, ssh into ProxMox and using the below Script create a new VM.</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1>#vars</span>
</span></span><span class=line><span class=cl><span class=nv>vmID</span><span class=o>=</span><span class=s2>&#34;nil&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;############## Start of Script ##############
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>#List already existing VM&#39;s and ask for vmID
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>echo &#34;</span><span class=o>==</span> Printing list of VM<span class=err>&#39;</span>s on this hypervisor!<span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>qm list
</span></span></span><span class=line><span class=cl><span class=s2>echo &#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>read -p &#34;</span>Please Enter free vm ID to use:<span class=s2>&#34; vmID
</span></span></span><span class=line><span class=cl><span class=s2>echo &#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2># Create storage dir for VM if needed.
</span></span></span><span class=line><span class=cl><span class=s2>if [ -d /var/lib/vz/images/</span><span class=nv>$vmID</span><span class=s2> ]
</span></span></span><span class=line><span class=cl><span class=s2>then
</span></span></span><span class=line><span class=cl><span class=s2>    echo &#34;</span>-- VM Directory exists! Ideally try another vm ID!<span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    read -p &#34;</span>Please Enter free vm ID to use:<span class=s2>&#34; vmID
</span></span></span><span class=line><span class=cl><span class=s2>else
</span></span></span><span class=line><span class=cl><span class=s2>    echo &#34;</span>-- Creating VM image dir!<span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    mkdir /var/lib/vz/images/</span><span class=nv>$vmID</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>fi
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2># Creating VM
</span></span></span><span class=line><span class=cl><span class=s2>echo &#34;</span>-- Creating new CHR VM<span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>qm create </span><span class=nv>$vmID</span><span class=s2> \
</span></span></span><span class=line><span class=cl><span class=s2>  --name chr-</span><span class=nv>$version</span><span class=s2> \
</span></span></span><span class=line><span class=cl><span class=s2>  --net0 virtio,bridge=vmbr0 \
</span></span></span><span class=line><span class=cl><span class=s2>  --bootdisk virtio0 \
</span></span></span><span class=line><span class=cl><span class=s2>  --ostype l26 \
</span></span></span><span class=line><span class=cl><span class=s2>  --memory 2048 \
</span></span></span><span class=line><span class=cl><span class=s2>  --onboot no \
</span></span></span><span class=line><span class=cl><span class=s2>  --sockets 1 \
</span></span></span><span class=line><span class=cl><span class=s2>  --cores 1 \
</span></span></span><span class=line><span class=cl><span class=s2>  --virtio0 local-lvm:vm-</span><span class=nv>$vmID</span><span class=s2>-disk-0
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2># Decompression image
</span></span></span><span class=line><span class=cl><span class=s2>gzip -d /root/openwrt-x86-64-generic-squashfs-combined.img.gz
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2># Resize image
</span></span></span><span class=line><span class=cl><span class=s2>qemu-img resize /root/openwrt-x86-64-generic-squashfs-combined.img +10G
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>echo &#34;</span>-- Import RAW image to local-lvm<span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>qm importdisk </span><span class=nv>$vmID</span><span class=s2> /root/openwrt-x86-64-generic-squashfs-combined.img local-lvm
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>echo &#34;</span><span class=c1>############## End of Script ##############&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=raspberry-pi>Raspberry Pi</h3><p><a href=https://openwrt.org/toh/raspberry%5Fpi%5Ffoundation/raspberry%5Fpi target=_blank rel="noopener noreferrer">https://openwrt.org/toh/raspberry%5Fpi%5Ffoundation/raspberry%5Fpi</a></p><h2 id=set-up>Set-up</h2><ol><li><p>Change Password</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>   passwd
</span></span></code></pre></td></tr></table></div></div></li><li><p>Set <strong>Lan</strong> IP Address, Gateway and DNS</p></li></ol><p>network -> interface -> edit</p><p>Content need to set-up:</p><ul><li>General Settings:</li></ul><p>IPv4 IP Address: 192.168.1.252
IPv4 gateway: 192.168.1.253
IPv4 bradcast: 192.168.1.0</p><ul><li>Advantages Settings:</li></ul><p>DNS set as public DNS Server: 114.114.114.114, 114,114,115,115</p><ol><li><p>If this Openwrt as your bypass router, please follow at the below settings.
<strong>LAN Settings</strong>: Let lede only be used as a pure bypass route, DHCP and IPv6 are both allocated by the main route.</p><ul><li>DHCP Server -> General Settings -> choose Ignore this interface.</li><li>IPv6 Settings -> RA Service - Disable</li><li>IPv6 Settings -> DHCPv6 Service - Disable</li></ul></li><li><p>Let lede obtain IPv6 information normally.</p></li></ol><p>add new interface -> name: IPv6; Protocol: DHCPv6 Client Device: @lan -> create interface -> Firewall settings: lan -> create interface.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2022-04-03</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=https://yanboyang.com/openwrt/index.md target=_blank rel="noopener noreferrer">Read Markdown</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://yanboyang.com/openwrt/ data-title="Getting Started OpenWrt" data-hashtags=openwrt><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://yanboyang.com/openwrt/ data-hashtag=openwrt><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=https://yanboyang.com/openwrt/ data-title="Getting Started OpenWrt" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://yanboyang.com/openwrt/ data-title="Getting Started OpenWrt"><i data-svg-src=https://yanboyang.com/lib/simple-icons/icons/line.min.svg></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://yanboyang.com/openwrt/ data-title="Getting Started OpenWrt"><i class="fab fa-weibo fa-fw"></i></a><a href=javascript:void(0); title="Share on Myspace" data-sharer=myspace data-url=https://yanboyang.com/openwrt/ data-title="Getting Started OpenWrt" data-description><i data-svg-src=https://yanboyang.com/lib/simple-icons/icons/myspace.min.svg></i></a><a href=javascript:void(0); title="Share on Blogger" data-sharer=blogger data-url=https://yanboyang.com/openwrt/ data-title="Getting Started OpenWrt" data-description><i class="fab fa-blogger fa-fw"></i></a><a href=javascript:void(0); title="Share on Evernote" data-sharer=evernote data-url=https://yanboyang.com/openwrt/ data-title="Getting Started OpenWrt"><i class="fab fa-evernote fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=https://yanboyang.com/tags/openwrt/>openwrt</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=https://yanboyang.com/>Home</a></span></section></div><div class=post-nav><a href=https://yanboyang.com/zotero/ class=prev rel=prev title="Getting Started with Zotero"><i class="fas fa-angle-left fa-fw"></i>Getting Started with Zotero</a>
<a href=https://yanboyang.com/bonding/ class=next rel=next title="Configuring Network Bonding">Configuring Network Bonding<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=disqus_thread class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://disqus.com/?ref_noscript>Disqus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreferrer" title="Hugo 0.96.0">Hugo</a> | Theme - <a href=https://github.com/sunt-programator/CodeIT target=_blank rel="noopener noreferrer" title="CodeIT 0.2.10"><i class="fas fa-laptop-code fa-fw"></i> CodeIT</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2019 - 2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://yanboyang.com/ target=_blank rel="noopener noreferrer">Boyang Yan</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=https://yanboyang.com/lib/katex/katex.min.css><link rel=stylesheet href=https://yanboyang.com/lib/katex/copy-tex.min.css><link rel=stylesheet href=https://yanboyang.com/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=https://boyang-blog.disqus.com/embed.js defer></script><script type=text/javascript src=https://yanboyang.com/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/lunr/lunr.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/sharer/sharer.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/katex/katex.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/katex/auto-render.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/katex/copy-tex.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/katex/mhchem.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/cookieconsent/cookieconsent.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:1e3},comment:{},cookieconsent:{content:{dismiss:"Got it!",link:"Learn more",message:"This website uses Cookies to improve your experience."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=https://yanboyang.com/js/theme.min.js></script></body></html>