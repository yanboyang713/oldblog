<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="noodp">
<meta http-equiv=x-ua-compatible content="IE=edge, chrome=1">
<title>Docker as Local Development Environment - Boyang Yan's Tech Blog</title><meta name=description content="This is Boyang Yan's Tech Blog"><meta property="og:title" content="Docker as Local Development Environment">
<meta property="og:description" content="Introduction https://blog.atulr.com/docker-local-environment/
Perrequires  Install Docker Install Docker Compose  Docker Docker is a tool designed to make it easier to create, deploy, and run applications by using containers. Containers allow a developer to package up an application with all of the parts it needs, such as libraries and other dependencies, and ship it all out as one package.
Docker container To form a mental picture, for the time being just consider a Docker Container as an extremely light weight isolated linux based virtual machine inside which we will run our application service (although containers are not exactly VMs).">
<meta property="og:type" content="article">
<meta property="og:url" content="https://yanboyang.com/dockeraslocaldevelopmentenvironment/"><meta property="og:image" content="https://yanboyang.com/logo.png"><meta property="article:section" content="posts">
<meta property="article:modified_time" content="2021-10-06T11:46:45+00:00">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://yanboyang.com/logo.png">
<meta name=twitter:title content="Docker as Local Development Environment">
<meta name=twitter:description content="Introduction https://blog.atulr.com/docker-local-environment/
Perrequires  Install Docker Install Docker Compose  Docker Docker is a tool designed to make it easier to create, deploy, and run applications by using containers. Containers allow a developer to package up an application with all of the parts it needs, such as libraries and other dependencies, and ship it all out as one package.
Docker container To form a mental picture, for the time being just consider a Docker Container as an extremely light weight isolated linux based virtual machine inside which we will run our application service (although containers are not exactly VMs).">
<meta name=application-name content="LoveIt">
<meta name=apple-mobile-web-app-title content="LoveIt"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://yanboyang.com/dockeraslocaldevelopmentenvironment/><link rel=prev href=https://yanboyang.com/essentialmathematics/><link rel=next href=https://yanboyang.com/dns/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Docker as Local Development Environment","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/yanboyang.com\/dockeraslocaldevelopmentenvironment\/"},"genre":"posts","keywords":"Docker","wordcount":1556,"url":"https:\/\/yanboyang.com\/dockeraslocaldevelopmentenvironment\/","dateModified":"2021-10-06T11:46:45+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Boyang Yan"},"description":""}</script></head>
<body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':'auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark')&&document.body.setAttribute('theme','dark')</script>
<div id=mask></div><div class=wrapper><header class=desktop id=header-desktop>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-101949995-1','auto'),ga('send','pageview'))</script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-101949995-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<div class=header-wrapper>
<div class=header-title>
<a href=/ title="Boyang Yan's Tech Blog"></a>
</div>
<div class=menu>
<div class=menu-inner><a class=menu-item href=/> Home </a><a class=menu-item href=/posts/> Posts </a><a class=menu-item href=/tags/> Tags </a><a class=menu-item href=/categories/> Categories </a><a class=menu-item href=/about/> About Me </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search>
<i class="fas fa-search fa-fw"></i>
</a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear>
<i class="fas fa-times-circle fa-fw"></i>
</a>
<span class="search-button search-loading" id=search-loading-desktop>
<i class="fas fa-spinner fa-fw fa-spin"></i>
</span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i>
</a>
</div>
</div>
</div>
</header><header class=mobile id=header-mobile>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-101949995-1','auto'),ga('send','pageview'))</script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-101949995-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<div class=header-container>
<div class=header-wrapper>
<div class=header-title>
<a href=/ title="Boyang Yan's Tech Blog"></a>
</div>
<div class=menu-toggle id=menu-toggle-mobile>
<span></span><span></span><span></span>
</div>
</div>
<div class=menu id=menu-mobile><div class=search-wrapper>
<div class="search mobile" id=search-mobile>
<input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search>
<i class="fas fa-search fa-fw"></i>
</a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear>
<i class="fas fa-times-circle fa-fw"></i>
</a>
<span class="search-button search-loading" id=search-loading-mobile>
<i class="fas fa-spinner fa-fw fa-spin"></i>
</span>
</div>
<a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>
Cancel
</a>
</div><a class=menu-item href=/ title>Home</a><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=/about/ title>About Me</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i>
</a></div>
</div>
</header>
<div class="search-dropdown desktop">
<div id=search-dropdown-desktop></div>
</div>
<div class="search-dropdown mobile">
<div id=search-dropdown-mobile></div>
</div>
<main class=main>
<div class=container><div class=toc id=toc-auto>
<h2 class=toc-title>Contents</h2>
<div class=toc-content id=toc-content-auto></div>
</div><article class="page single"><h1 class="single-title animated flipInX">Docker as Local Development Environment</h1><div class=post-meta>
<div class=post-meta-line><span class=post-author><a href=/ title=Author rel=" author" class=author><i class="fas fa-user-circle fa-fw"></i>Boyang Yan</a></span>&nbsp;<span class=post-category>included in <a href=/categories/virtual-environment/><i class="far fa-folder fa-fw"></i>virtual environment</a></span></div>
<div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=0001-01-01>0001-01-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;1556 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;8 minutes&nbsp;</div>
</div><div class="details toc" id=toc-static kept=true>
<div class="details-summary toc-title">
<span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span>
</div>
<div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents>
<ul>
<li><a href=#introduction>Introduction</a></li>
<li><a href=#perrequires>Perrequires</a></li>
<li><a href=#docker>Docker</a>
<ul>
<li><a href=#docker-container>Docker container</a></li>
<li><a href=#docker-compose>Docker-Compose</a>
<ul>
<li><a href=#docker-compose-in-general-will-contain>Docker compose in general will contain:</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#setting-it-up>Setting it up</a>
<ul>
<li><a href=#enter-docker>Enter docker</a></li>
<li><a href=#all-this-is-good-and-fine-but-how-can-i-use-it-for-efficient-development>All this is good and fine but how can I use it for efficient development?</a></li>
<li><a href=#try-editing-njs1-source-files->Try editing njs1 source files! 🎉</a></li>
<li><a href=#finishing-things-up->Finishing things up! 🏁</a></li>
<li><a href=#few-changes>Few Changes</a></li>
</ul>
</li>
<li><a href=#commands-cheatsheet>Commands Cheatsheet</a>
<ul>
<li><a href=#start-all-services>Start all services</a></li>
<li><a href=#stop-all-services>Stop all services</a></li>
<li><a href=#launch-a-specific-service>Launch a specific service</a></li>
<li><a href=#restart-a-single-service>Restart a single service</a></li>
<li><a href=#logs-from-specific-service>logs from specific service</a></li>
<li><a href=#ssh-into-a-particular-service-container>ssh into a particular service container</a></li>
</ul>
</li>
<li><a href=#some-tips-for-smoother-workflow>Some Tips for smoother workflow</a>
<ul>
<li><a href=#containers--services-running-too-slow>Containers / services running too slow?</a></li>
<li><a href=#low-on-space--messed-up-and-want-to-restart-everything-from-scratch->Low on space / messed up and want to restart everything from scratch ?</a></li>
<li><a href=#removing-all-images-and-then-refreshing-the-entire-thing>Removing all images and then refreshing the entire thing.</a></li>
</ul>
</li>
</ul>
</nav></div>
</div><div class=content id=content><h2 id=introduction>Introduction</h2>
<p><a href=https://blog.atulr.com/docker-local-environment/ target=_blank rel="noopener noreferrer">https://blog.atulr.com/docker-local-environment/</a></p>
<h2 id=perrequires>Perrequires</h2>
<ul>
<li>Install Docker</li>
<li>Install Docker Compose</li>
</ul>
<h2 id=docker>Docker</h2>
<p>Docker is a tool designed to make it easier to create, deploy, and run applications by using containers. Containers allow a developer to package up an application with all of the parts it needs, such as libraries and other dependencies, and ship it all out as one package.</p>
<h3 id=docker-container>Docker container</h3>
<p>To form a mental picture, for the time being just consider a Docker Container as an extremely light weight isolated linux based virtual machine inside which we will run our application service (although containers are not exactly VMs). The container will contain our code and all of its dependencies (system libraries, tools, etc). For our setup we will use one docker container per service and separate docker containers for our database.</p>
<p>containers_mental_modal</p>
<h3 id=docker-compose>Docker-Compose</h3>
<p>Docker compose is a tool for defining and running multi-container Docker applications. With Compose, you use a YAML file to configure your application’s services. Then, with a single command, you create and start all the services from your configuration.</p>
<p>TLDR; Docker compose lets you run all your services at once (also in the right order) and manage them via a unified interface.</p>
<h4 id=docker-compose-in-general-will-contain>Docker compose in general will contain:</h4>
<ol>
<li><strong>Services</strong>: Services are the list of induvidual docker containers that will be run by the compose tool. We will specify the ports and other configurations needed to run the docker containers here.</li>
<li><strong>Networks</strong>: Network provides a way by which different services can interact with each other. Each container can attach itself to a network and all containers within same networks can communicate with each other. We will use a single network for our case.</li>
<li><strong>Volumes</strong>: Docker containers by default do not contain any kind of persistence storage. If a docker container is killed then all the data in its memory gets lost. So in order to save some persistant data you need volumes. Think of volumes as permanent hard drives for these containers. We will have one volume per service.</li>
</ol>
<h2 id=setting-it-up>Setting it up</h2>
<p>I have created a basic setup of services as described above. To follow along, take a clone of the repo with the following commands.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>git clone https://github.com/boyyan713/docker-as-dev-environment.git

<span class=nb>cd</span> docker-as-dev-environment/

git checkout tags/basic-setup

git checkout -b tryingout

</code></pre></td></tr></table>
</div>
</div><p>Now you should have the following project structure to start with:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>(base) yanboyang713@boyang:~/Documents/docker-as-dev-environment$ tree .
.
├── go1
│   ├── main.go
│   └── README.md
├── njs1
│   ├── index.js
│   ├── package.json
│   ├── package-lock.json
│   └── README.md
├── njs2
│   ├── index.js
│   ├── package.json
│   ├── package-lock.json
│   └── README.md
└── py1
    ├── README.md
    ├── requirements.txt
    └── server
        ├── __init__.py
        └── __main__.py

5 directories, 14 files

</code></pre></td></tr></table>
</div>
</div><p>You could browse through each project inside and read the README to understand how to run those projects induvidually.</p>
<h3 id=enter-docker>Enter docker</h3>
<p>Make sure you have docker running by following the instructions here <a href=https://www.docker.com/get-started target=_blank rel="noopener noreferrer">https://www.docker.com/get-started</a>.</p>
<p>First step is to create a docker file for our service njs1. Create a Dockerfile: blog-docker-dev-environment-example/njs1/Dockerfile</p>
<p>njs1/Dockerfile</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>FROM node:6.17.0

WORKDIR /root
ADD . /root
</code></pre></td></tr></table>
</div>
</div><p>Create the file at blog-docker-dev-environment-example/docker-compose.yml .
Now let jump to docker-compose.</p>
<p>Lets add our first service (njs1) to it.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3&#39;</span><span class=w>
</span><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>njs1</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>build</span><span class=p>:</span><span class=w> </span><span class=l>./njs1</span><span class=w>
</span><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=l>sh -c &#34;npm install &amp;&amp; npm start&#34;</span><span class=w>
</span><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=l>NODE_ENV=development</span><span class=w>
</span><span class=w>      </span>- <span class=l>PORT=7000</span><span class=w>
</span><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=s1>&#39;7000:7000&#39;</span><span class=w>
</span><span class=w>    </span><span class=nt>working_dir</span><span class=p>:</span><span class=w> </span><span class=l>/root/njs1</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The above docker compose file has only one service (njs1). We will add more services incrementally. Before that lets run it and see what we get.</p>
<p>In the folder which contains our docker-compose.yml run:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>docker-compose up
</code></pre></td></tr></table>
</div>
</div><p>if all goes well you should see it building our app container and in the very end</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>NJS1 app listening on port 7000!
</code></pre></td></tr></table>
</div>
</div><p>Open it up on the browser: http://localhost:7000 to test it out.</p>
<p>docker-compose service in detail:</p>
<ul>
<li>build: : Path to the dockerfile. Note: you can either specify the folder which contains the Dockerfile or the complete path to Dockerfile itself. Both works.</li>
<li>command: : Command to run when docker container is started.</li>
<li>environment: : All the environment variables you need to set.</li>
<li>ports:: This specifies the mapping of the port inside the container to that of the host machine. They need not be same.</li>
<li>working_dir: : This is the path inside the container where you want to the run the command you specified above.</li>
</ul>
<h3 id=all-this-is-good-and-fine-but-how-can-i-use-it-for-efficient-development>All this is good and fine but how can I use it for efficient development?</h3>
<p>To make an efficient development environment we need to be able to edit the source code (which with current setup is not possible without re building container again and again). To achieve this we will make use of volumes.</p>
<p>Make the following changes. First lets tell our njs1/Dockerfile to not copy the project files to the container.</p>
<p>njs1/Dockerfile</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>FROM node:latest

## WORKDIR /root &lt;-- comment out
## ADD . /root   &lt;-- these two lines
</code></pre></td></tr></table>
</div>
</div><p>then tell docker-compose to mount our project directory from our local machine as a directory inside the container.</p>
<p>docker-compose.yml</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3&#39;</span><span class=w>
</span><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>njs1</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>build</span><span class=p>:</span><span class=w> </span><span class=l>./njs1</span><span class=w>
</span><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=l>sh -c &#34;npm install &amp;&amp; npm start&#34;</span><span class=w>
</span><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=l>NODE_ENV=development</span><span class=w>
</span><span class=w>      </span>- <span class=l>PORT=7000</span><span class=w>
</span><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=s1>&#39;7000:7000&#39;</span><span class=w>
</span><span class=w>    </span><span class=nt>working_dir</span><span class=p>:</span><span class=w> </span><span class=l>/root/njs1</span><span class=w>
</span><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=l>./njs1:/root/njs1:cached</span><span class=w> </span><span class=c># &lt;--- This will map ./njs1 to /root/njs1 inside the container.</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In detail</p>
<ul>
<li>volumes: - volumes gives us a way to map our local directories to a directory inside the container. Here we are saying map njs1 folder from our local machine to /root/njs1 inside the docker container. Here we are not copying the files into the container, instead we are mounting it as a shared volume. And thats the trick that makes it useful.</li>
</ul>
<p>To test it out. Lets add nodemon to our njs1 service.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>cd njs1
npm install --save-dev nodemon
</code></pre></td></tr></table>
</div>
</div><p>Now make the following change in
njs1/package.json</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>...
...
...
  &#34;description&#34;: &#34;A sample nodejs server&#34;,
   &#34;main&#34;: &#34;index.js&#34;,
   &#34;scripts&#34;: {
-    &#34;start&#34;: &#34;node index.js&#34;
+    &#34;start&#34;: &#34;nodemon index.js&#34;
   },
...
...
...

</code></pre></td></tr></table>
</div>
</div><p>Time to test it out! Go to the root folder and run</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=p>(</span><span class=n>base</span><span class=p>)</span><span class=w> </span><span class=n>yanboyang713</span><span class=o>@</span><span class=n>boyang</span><span class=p>:</span><span class=o>~/</span><span class=n>Documents</span><span class=o>/</span><span class=n>docker</span><span class=o>-</span><span class=k>as</span><span class=o>-</span><span class=n>dev</span><span class=o>-</span><span class=n>environment</span><span class=err>$</span><span class=w> </span><span class=n>docker</span><span class=o>-</span><span class=n>compose</span><span class=w> </span><span class=n>up</span><span class=w> </span><span class=o>--</span><span class=n>build</span><span class=w>
</span><span class=w></span><span class=n>Building</span><span class=w> </span><span class=n>njs1</span><span class=w>
</span><span class=w></span><span class=n>Step</span><span class=w> </span><span class=mi>1</span><span class=o>/</span><span class=mi>1</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>node</span><span class=p>:</span><span class=n>latest</span><span class=w>
</span><span class=w> </span><span class=o>---&gt;</span><span class=w> </span><span class=n>f47907840247</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=n>Successfully</span><span class=w> </span><span class=n>built</span><span class=w> </span><span class=n>f47907840247</span><span class=w>
</span><span class=w></span><span class=n>Successfully</span><span class=w> </span><span class=n>tagged</span><span class=w> </span><span class=n>docker</span><span class=o>-</span><span class=k>as</span><span class=o>-</span><span class=n>dev</span><span class=o>-</span><span class=n>environment_njs1</span><span class=p>:</span><span class=n>latest</span><span class=w>
</span><span class=w></span><span class=k>Starting</span><span class=w> </span><span class=n>docker</span><span class=o>-</span><span class=k>as</span><span class=o>-</span><span class=n>dev</span><span class=o>-</span><span class=n>environment_njs1_1</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=n>done</span><span class=w>
</span><span class=w></span><span class=n>Attaching</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=n>docker</span><span class=o>-</span><span class=k>as</span><span class=o>-</span><span class=n>dev</span><span class=o>-</span><span class=n>environment_njs1_1</span><span class=w>
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> </span><span class=n>npm</span><span class=w> </span><span class=n>WARN</span><span class=w> </span><span class=n>njs1</span><span class=o>@</span><span class=mi>1</span><span class=p>.</span><span class=mi>0</span><span class=p>.</span><span class=mi>0</span><span class=w> </span><span class=n>No</span><span class=w> </span><span class=n>repository</span><span class=w> </span><span class=n>field</span><span class=p>.</span><span class=w>
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> </span><span class=n>npm</span><span class=w> </span><span class=n>WARN</span><span class=w> </span><span class=n>optional</span><span class=w> </span><span class=n>SKIPPING</span><span class=w> </span><span class=n>OPTIONAL</span><span class=w> </span><span class=n>DEPENDENCY</span><span class=p>:</span><span class=w> </span><span class=n>fsevents</span><span class=o>@</span><span class=mi>2</span><span class=p>.</span><span class=mi>1</span><span class=p>.</span><span class=mi>3</span><span class=w> </span><span class=p>(</span><span class=n>node_modules</span><span class=o>/</span><span class=n>fsevents</span><span class=p>):</span><span class=w>
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> </span><span class=n>npm</span><span class=w> </span><span class=n>WARN</span><span class=w> </span><span class=n>notsup</span><span class=w> </span><span class=n>SKIPPING</span><span class=w> </span><span class=n>OPTIONAL</span><span class=w> </span><span class=n>DEPENDENCY</span><span class=p>:</span><span class=w> </span><span class=n>Unsupported</span><span class=w> </span><span class=n>platform</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>fsevents</span><span class=o>@</span><span class=mi>2</span><span class=p>.</span><span class=mi>1</span><span class=p>.</span><span class=mi>3</span><span class=p>:</span><span class=w> </span><span class=n>wanted</span><span class=w> </span><span class=err>{</span><span class=s2>&#34;os&#34;</span><span class=p>:</span><span class=s2>&#34;darwin&#34;</span><span class=p>,</span><span class=s2>&#34;arch&#34;</span><span class=p>:</span><span class=s2>&#34;any&#34;</span><span class=err>}</span><span class=w> </span><span class=p>(</span><span class=n>current</span><span class=p>:</span><span class=w> </span><span class=err>{</span><span class=s2>&#34;os&#34;</span><span class=p>:</span><span class=s2>&#34;linux&#34;</span><span class=p>,</span><span class=s2>&#34;arch&#34;</span><span class=p>:</span><span class=s2>&#34;x64&#34;</span><span class=err>}</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> 
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> </span><span class=n>audited</span><span class=w> </span><span class=mi>171</span><span class=w> </span><span class=n>packages</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=mi>1</span><span class=p>.</span><span class=mi>633</span><span class=n>s</span><span class=w>
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> 
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> </span><span class=mi>10</span><span class=w> </span><span class=n>packages</span><span class=w> </span><span class=n>are</span><span class=w> </span><span class=n>looking</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>funding</span><span class=w>
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w>   </span><span class=n>run</span><span class=w> </span><span class=o>`</span><span class=n>npm</span><span class=w> </span><span class=n>fund</span><span class=o>`</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>details</span><span class=w>
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> 
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> </span><span class=n>found</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=n>vulnerabilities</span><span class=w>
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> 
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> 
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>njs1</span><span class=o>@</span><span class=mi>1</span><span class=p>.</span><span class=mi>0</span><span class=p>.</span><span class=mi>0</span><span class=w> </span><span class=n>start</span><span class=w> </span><span class=o>/</span><span class=n>root</span><span class=o>/</span><span class=n>njs1</span><span class=w>
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>nodemon</span><span class=w> </span><span class=k>index</span><span class=p>.</span><span class=n>js</span><span class=w>
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> 
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> </span><span class=p>[</span><span class=n>nodemon</span><span class=p>]</span><span class=w> </span><span class=mi>2</span><span class=p>.</span><span class=mi>0</span><span class=p>.</span><span class=mi>4</span><span class=w>
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> </span><span class=p>[</span><span class=n>nodemon</span><span class=p>]</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=n>restart</span><span class=w> </span><span class=n>at</span><span class=w> </span><span class=n>any</span><span class=w> </span><span class=kt>time</span><span class=p>,</span><span class=w> </span><span class=n>enter</span><span class=w> </span><span class=o>`</span><span class=n>rs</span><span class=o>`</span><span class=w>
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> </span><span class=p>[</span><span class=n>nodemon</span><span class=p>]</span><span class=w> </span><span class=n>watching</span><span class=w> </span><span class=nf>path</span><span class=p>(</span><span class=n>s</span><span class=p>):</span><span class=w> </span><span class=o>*</span><span class=p>.</span><span class=o>*</span><span class=w>
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> </span><span class=p>[</span><span class=n>nodemon</span><span class=p>]</span><span class=w> </span><span class=n>watching</span><span class=w> </span><span class=n>extensions</span><span class=p>:</span><span class=w> </span><span class=n>js</span><span class=p>,</span><span class=n>mjs</span><span class=p>,</span><span class=n>json</span><span class=w>
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> </span><span class=p>[</span><span class=n>nodemon</span><span class=p>]</span><span class=w> </span><span class=k>starting</span><span class=w> </span><span class=o>`</span><span class=n>node</span><span class=w> </span><span class=k>index</span><span class=p>.</span><span class=n>js</span><span class=o>`</span><span class=w>
</span><span class=w></span><span class=n>njs1_1</span><span class=w>  </span><span class=o>|</span><span class=w> </span><span class=n>NJS1</span><span class=w> </span><span class=n>app</span><span class=w> </span><span class=n>listening</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>port</span><span class=w> </span><span class=mi>7000</span><span class=o>!</span><span class=w>
</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The &ndash;build tells docker-compose to rebuild the images.</p>
<h3 id=try-editing-njs1-source-files->Try editing njs1 source files! 🎉</h3>
<p>Try making some changes in the njs1/index.js file and you should see nodemon auto reloading on file change.</p>
<h3 id=finishing-things-up->Finishing things up! 🏁</h3>
<p>Once you add other services to the docker-compose file. It should look something like this:</p>
<p>docker-compose.yml</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3&#39;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>njs1</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>build</span><span class=p>:</span><span class=w> </span><span class=l>./njs1</span><span class=w>
</span><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=l>sh -c &#34;npm install &amp;&amp; npm start&#34;</span><span class=w>
</span><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=l>NODE_ENV=development</span><span class=w>
</span><span class=w>      </span>- <span class=l>PORT=7000</span><span class=w>
</span><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=s1>&#39;7000:7000&#39;</span><span class=w>
</span><span class=w>    </span><span class=nt>working_dir</span><span class=p>:</span><span class=w> </span><span class=l>/root/njs1</span><span class=w>
</span><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=l>./njs1:/root/njs1:cached</span><span class=w> </span><span class=c># &lt;--- This will map ./njs1 to /root/njs1 inside the container.</span><span class=w>
</span><span class=w>
</span><span class=w>  </span><span class=nt>njs2</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>node:12.3-alpine</span><span class=w>
</span><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=l>sh -c &#34;npm install &amp;&amp; npm start&#34;</span><span class=w>
</span><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=l>NODE_ENV=development</span><span class=w>
</span><span class=w>      </span>- <span class=l>PORT=8000</span><span class=w>
</span><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=s1>&#39;8000:8000&#39;</span><span class=w>
</span><span class=w>    </span><span class=nt>working_dir</span><span class=p>:</span><span class=w> </span><span class=l>/root/njs2</span><span class=w>
</span><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=l>./njs2:/root/njs2:cached</span><span class=w> </span><span class=c># &lt;--- This will map ./njs2 to /root/njs2 inside the container.</span><span class=w>
</span><span class=w>
</span><span class=w>  </span><span class=nt>py1</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>python:3-stretch</span><span class=w>
</span><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=l>sh -c &#34;pip install -r requirements.txt &amp;&amp; python -m server&#34;</span><span class=w>
</span><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=l>PORT=9000</span><span class=w>
</span><span class=w>      </span>- <span class=l>FLASK_ENV=development</span><span class=w>
</span><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=s1>&#39;9000:9000&#39;</span><span class=w>
</span><span class=w>    </span><span class=nt>working_dir</span><span class=p>:</span><span class=w> </span><span class=l>/root/py1</span><span class=w>
</span><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=l>./py1:/root/py1:cached</span><span class=w> </span><span class=c># &lt;--- This will map ./py1 to /root/py1 inside the container.</span><span class=w>
</span><span class=w>
</span><span class=w>  </span><span class=nt>go1</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>golang:1.12-alpine</span><span class=w>
</span><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=l>sh -c &#34;go run .&#34;</span><span class=w>
</span><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=l>PORT=5000</span><span class=w>
</span><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=s1>&#39;5000:5000&#39;</span><span class=w>
</span><span class=w>    </span><span class=nt>working_dir</span><span class=p>:</span><span class=w> </span><span class=l>/root/go1</span><span class=w>
</span><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=l>./go1:/root/go1:cached</span><span class=w> </span><span class=c># &lt;--- This will map ./py1 to /root/py1 inside the container.</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h3 id=few-changes>Few Changes</h3>
<ul>
<li>image: instead of build : In docker-compose we can specify the docker image from docker-hub directly instead of a dockerfile using the image: property. Hence for simple setups we dont need to write our own Dockerfile.</li>
</ul>
<p>There are many more configuration options which you can use in your docker-compose.yml file. To see a complete reference of those, you can visit this link: <a href=https://docs.docker.com/compose/compose-file/ target=_blank rel="noopener noreferrer">https://docs.docker.com/compose/compose-file/</a></p>
<h2 id=commands-cheatsheet>Commands Cheatsheet</h2>
<p>Now that you have setup your services to run via docker-compose for local development. There are few commands that can help.</p>
<h3 id=start-all-services>Start all services</h3>
<p>This will start all services in the docker-compose file and detach from the terminal. So your services can run in background.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>docker-compose start
</code></pre></td></tr></table>
</div>
</div><h3 id=stop-all-services>Stop all services</h3>
<p>Corresponding stop command</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>docker-compose stop
</code></pre></td></tr></table>
</div>
</div><h3 id=launch-a-specific-service>Launch a specific service</h3>
<p>This will only launch njs1 from the list of services in the docker-compose.yml</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>docker-compose up njs1
</code></pre></td></tr></table>
</div>
</div><p>You can use similar commands to stop, start induvidual services as well.</p>
<h3 id=restart-a-single-service>Restart a single service</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>docker-compose restart njs1
</code></pre></td></tr></table>
</div>
</div><h3 id=logs-from-specific-service>logs from specific service</h3>
<p>This will show logs of only njs1 and also watch for more logs</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>docker-compose logs -f njs1
</code></pre></td></tr></table>
</div>
</div><h3 id=ssh-into-a-particular-service-container>ssh into a particular service container</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>docker-compose <span class=nb>exec</span> njs1 bash
</code></pre></td></tr></table>
</div>
</div><h2 id=some-tips-for-smoother-workflow>Some Tips for smoother workflow</h2>
<h3 id=containers--services-running-too-slow>Containers / services running too slow?</h3>
<p>You might notice that your services are running/launching at extremely slow as compared to when you launch them without docker-compose. This might be because you have allocated less CPU/RAM to docker service. The default values are very low and that causes issues when launching multiple services.</p>
<p>Go to : dockerIcon -> preferences -> Advanced</p>
<p>Change the slider to give CPU > 3 cores and RAM > 6GB</p>
<h3 id=low-on-space--messed-up-and-want-to-restart-everything-from-scratch->Low on space / messed up and want to restart everything from scratch ?</h3>
<h3 id=removing-all-images-and-then-refreshing-the-entire-thing>Removing all images and then refreshing the entire thing.</h3>
<p>To remove all docker containers:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>docker rm <span class=k>$(</span>docker ps -a -q<span class=k>)</span> -f
</code></pre></td></tr></table>
</div>
</div><p>To remove all docker images:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>docker rmi <span class=k>$(</span>docker images<span class=k>)</span> -f
</code></pre></td></tr></table>
</div>
</div></div><div class=post-footer id=post-footer>
<div class=post-info>
<div class=post-info-line>
<div class=post-info-mod>
<span>Updated on 2021-10-06</span>
</div>
<div class=post-info-license></div>
</div>
<div class=post-info-line>
<div class=post-info-md><span>
<a class=link-to-markdown href=/dockeraslocaldevelopmentenvironment/index.md target=_blank rel="noopener noreferrer">Read Markdown</a>
</span></div>
<div class=post-info-share>
<span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://yanboyang.com/dockeraslocaldevelopmentenvironment/ data-title="Docker as Local Development Environment" data-hashtags=Docker><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://yanboyang.com/dockeraslocaldevelopmentenvironment/ data-hashtag=Docker><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=https://yanboyang.com/dockeraslocaldevelopmentenvironment/ data-title="Docker as Local Development Environment" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://yanboyang.com/dockeraslocaldevelopmentenvironment/ data-title="Docker as Local Development Environment"><i data-svg-src=/lib/simple-icons/icons/line.min.svg></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://yanboyang.com/dockeraslocaldevelopmentenvironment/ data-title="Docker as Local Development Environment"><i class="fab fa-weibo fa-fw"></i></a><a href=javascript:void(0); title="Share on Myspace" data-sharer=myspace data-url=https://yanboyang.com/dockeraslocaldevelopmentenvironment/ data-title="Docker as Local Development Environment" data-description><i data-svg-src=/lib/simple-icons/icons/myspace.min.svg></i></a><a href=javascript:void(0); title="Share on Blogger" data-sharer=blogger data-url=https://yanboyang.com/dockeraslocaldevelopmentenvironment/ data-title="Docker as Local Development Environment" data-description><i class="fab fa-blogger fa-fw"></i></a><a href=javascript:void(0); title="Share on Evernote" data-sharer=evernote data-url=https://yanboyang.com/dockeraslocaldevelopmentenvironment/ data-title="Docker as Local Development Environment"><i class="fab fa-evernote fa-fw"></i></a></span>
</div>
</div>
</div>
<div class=post-info-more>
<section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/docker/>Docker</a></section>
<section>
<span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span>
</section>
</div>
<div class=post-nav><a href=/essentialmathematics/ class=prev rel=prev title="Essential Mathematics"><i class="fas fa-angle-left fa-fw"></i>Essential Mathematics</a>
<a href=/dns/ class=next rel=next title=dns>dns<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id=comments><div id=disqus_thread class=comment></div><noscript>
Please enable JavaScript to view the comments powered by <a href=https://disqus.com/?ref_noscript>Disqus</a>.
</noscript></div></article></div>
</main><footer class=footer>
<div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreferrer" title="Hugo 0.88.1">Hugo</a> | Theme - <a href=https://github.com/sunt-programator/CodeIT target=_blank rel="noopener noreferrer" title="CodeIT 0.2.10"><i class="fas fa-laptop-code fa-fw"></i> CodeIT</a>
</div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2019 - 2021</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank rel="noopener noreferrer">Boyang Yan</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div>
</div>
</footer></div>
<div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top">
<i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments">
<i class="fas fa-comment fa-fw"></i>
</a>
</div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/katex/copy-tex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=https://boyang-blog.disqus.com/embed.js defer></script><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/lunr/lunr.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/auto-render.min.js></script><script type=text/javascript src=/lib/katex/copy-tex.min.js></script><script type=text/javascript src=/lib/katex/mhchem.min.js></script><script type=text/javascript src=/lib/cookieconsent/cookieconsent.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:1e3},comment:{},cookieconsent:{content:{dismiss:"Got it!",link:"Learn more",message:"This website uses Cookies to improve your experience."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script></body>
</html>