<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Getting Started Custom Arch Linux Package Repository with GitHub - Boyang Yan's Tech Blog</title><meta name=description content="This is Boyang Yan's Tech Blog"><meta property="og:title" content="Getting Started Custom Arch Linux Package Repository with GitHub"><meta property="og:description" content="Introduction I am making a Arch Linux based Meta Scientific Linux,so I need create a custom Package Repository for this OS packages.
In this article, I’m going to record my steps to create my own arch linux package repository, via github pages, no need to maintain your server.
Build signed packages Create your gpg key When you installed a package from AUR, you generally cloned a repo that contains a PKGBUILD file, then you executed makepkg to build this package."><meta property="og:type" content="article"><meta property="og:url" content="https://yanboyang.com/archlinuxpackagerepository/"><meta property="og:image" content="https://yanboyang.com/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-03-20T18:43:00+11:00"><meta property="article:modified_time" content="2022-08-25T17:21:44+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://yanboyang.com/logo.png"><meta name=twitter:title content="Getting Started Custom Arch Linux Package Repository with GitHub"><meta name=twitter:description content="Introduction I am making a Arch Linux based Meta Scientific Linux,so I need create a custom Package Repository for this OS packages.
In this article, I’m going to record my steps to create my own arch linux package repository, via github pages, no need to maintain your server.
Build signed packages Create your gpg key When you installed a package from AUR, you generally cloned a repo that contains a PKGBUILD file, then you executed makepkg to build this package."><meta name=application-name content="LoveIt"><meta name=apple-mobile-web-app-title content="LoveIt"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=https://yanboyang.com/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://yanboyang.com/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://yanboyang.com/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=https://yanboyang.com/apple-touch-icon.png><link rel=mask-icon href=https://yanboyang.com/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=https://yanboyang.com/site.webmanifest><link rel=canonical href=https://yanboyang.com/archlinuxpackagerepository/><link rel=prev href=https://yanboyang.com/magit/><link rel=next href=https://yanboyang.com/stationarytimeseries/><link rel=stylesheet href=https://yanboyang.com/lib/normalize/normalize.min.css><link rel=stylesheet href=https://yanboyang.com/css/style.min.css><link rel=stylesheet href=https://yanboyang.com/lib/fontawesome-free/all.min.css><link rel=stylesheet href=https://yanboyang.com/lib/animate/animate.min.css><meta name=baidu-site-verification content="wsCeKMuJ31RLblHf"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Getting Started Custom Arch Linux Package Repository with GitHub","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/yanboyang.com\/archlinuxpackagerepository\/"},"genre":"posts","wordcount":1236,"url":"https:\/\/yanboyang.com\/archlinuxpackagerepository\/","datePublished":"2022-03-20T18:43:00+11:00","dateModified":"2022-08-25T17:21:44+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Boyang Yan"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>("true"==="true"&&window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-101949995-1","auto"),ga("send","pageview"))</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-101949995-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script><div class=header-wrapper><div class=header-title><a href=https://yanboyang.com/ title="Boyang Yan's Tech Blog"></a></div><div class=menu><div class=menu-inner><a class=menu-item href=https://yanboyang.com/>Home </a><a class=menu-item href=https://yanboyang.com/posts/>Posts </a><a class=menu-item href=https://yanboyang.com/tags/>Tags </a><a class=menu-item href=https://yanboyang.com/categories/>Categories </a><a class=menu-item href=https://yanboyang.com/about/>About Me </a><a class=menu-item href=https://yanboyang.com/calendar/>Calendar </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-101949995-1","auto"),ga("send","pageview"))</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-101949995-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script><div class=header-container><div class=header-wrapper><div class=header-title><a href=https://yanboyang.com/ title="Boyang Yan's Tech Blog"></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=https://yanboyang.com/ title>Home</a><a class=menu-item href=https://yanboyang.com/posts/ title>Posts</a><a class=menu-item href=https://yanboyang.com/tags/ title>Tags</a><a class=menu-item href=https://yanboyang.com/categories/ title>Categories</a><a class=menu-item href=https://yanboyang.com/about/ title>About Me</a><a class=menu-item href=https://yanboyang.com/calendar/ title>Calendar</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">Getting Started Custom Arch Linux Package Repository with GitHub</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://yanboyang.com/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>
Boyang Yan</a>
</span>&nbsp;<span class=post-category>included in <a href=https://yanboyang.com/categories/linux/><i class="far fa-folder fa-fw"></i>Linux</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2022-03-20>2022-03-20</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;1236 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;6 minutes&nbsp;</div></div><div class="details toc" id=toc-static kept=true><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#build-signed-packages>Build signed packages</a><ul><li><a href=#create-your-gpg-key>Create your gpg key</a></li><li><a href=#configure-pacman>Configure pacman</a></li></ul></li><li><a href=#reference-list>Reference List</a></li></ul></nav></div></div><div class=content id=content><h2 id=introduction>Introduction</h2><p>I am making a Arch Linux based Meta Scientific Linux,so I need create a custom Package Repository for this OS packages.</p><p>In this article, I’m going to record my steps to create my own arch linux package repository, via github pages, no need to maintain your server.</p><h2 id=build-signed-packages>Build signed packages</h2><h3 id=create-your-gpg-key>Create your gpg key</h3><p>When you installed a package from AUR, you generally cloned a repo that contains a PKGBUILD file, then you executed makepkg to build this package. This is the minimalist steps to build a package, but by this way your package is not signed.</p><p>The goal of signing package is to guarantee that a package was created by the person that claims to have made it. Arch linux uses GnuPG to implement this feature, so let’s get start from GnuPG.</p><p>First of all, let’s create a gpg key:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>base<span class=o>)</span> <span class=o>[</span>yanboyang713@Boyang-ThinkpadT470s<span class=o>]</span> ➜ ~ gpg --full-generate-key
</span></span><span class=line><span class=cl>gpg <span class=o>(</span>GnuPG<span class=o>)</span> 2.2.32<span class=p>;</span> Copyright <span class=o>(</span>C<span class=o>)</span> <span class=m>2021</span> Free Software Foundation, Inc.
</span></span><span class=line><span class=cl>This is free software: you are free to change and redistribute it.
</span></span><span class=line><span class=cl>There is NO WARRANTY, to the extent permitted by law.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Please <span class=k>select</span> what kind of key you want:
</span></span><span class=line><span class=cl>   <span class=o>(</span>1<span class=o>)</span> RSA and RSA <span class=o>(</span>default<span class=o>)</span>
</span></span><span class=line><span class=cl>   <span class=o>(</span>2<span class=o>)</span> DSA and Elgamal
</span></span><span class=line><span class=cl>   <span class=o>(</span>3<span class=o>)</span> DSA <span class=o>(</span>sign only<span class=o>)</span>
</span></span><span class=line><span class=cl>   <span class=o>(</span>4<span class=o>)</span> RSA <span class=o>(</span>sign only<span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>(</span>14<span class=o>)</span> Existing key from card
</span></span><span class=line><span class=cl>Your selection? <span class=m>1</span>
</span></span><span class=line><span class=cl>RSA keys may be between <span class=m>1024</span> and <span class=m>4096</span> bits long.
</span></span><span class=line><span class=cl>What keysize <span class=k>do</span> you want? <span class=o>(</span>3072<span class=o>)</span>
</span></span><span class=line><span class=cl>Requested keysize is <span class=m>3072</span> bits
</span></span><span class=line><span class=cl>Please specify how long the key should be valid.
</span></span><span class=line><span class=cl>         <span class=nv>0</span> <span class=o>=</span> key does not expire
</span></span><span class=line><span class=cl>      &lt;n&gt;  <span class=o>=</span> key expires in n days
</span></span><span class=line><span class=cl>      &lt;n&gt;w <span class=o>=</span> key expires in n weeks
</span></span><span class=line><span class=cl>      &lt;n&gt;m <span class=o>=</span> key expires in n months
</span></span><span class=line><span class=cl>      &lt;n&gt;y <span class=o>=</span> key expires in n years
</span></span><span class=line><span class=cl>Key is valid <span class=k>for</span>? <span class=o>(</span>0<span class=o>)</span>
</span></span><span class=line><span class=cl>Key does not expire at all
</span></span><span class=line><span class=cl>Is this correct? <span class=o>(</span>y/N<span class=o>)</span> y
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>GnuPG needs to construct a user ID to identify your key.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Real name: Boyang Yan
</span></span><span class=line><span class=cl>Email address: yanboyang713@gmail.com
</span></span><span class=line><span class=cl>Comment:
</span></span><span class=line><span class=cl>You selected this USER-ID:
</span></span><span class=line><span class=cl>    <span class=s2>&#34;Boyang Yan &lt;yanboyang713@gmail.com&gt;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Change <span class=o>(</span>N<span class=o>)</span>ame, <span class=o>(</span>C<span class=o>)</span>omment, <span class=o>(</span>E<span class=o>)</span>mail or <span class=o>(</span>O<span class=o>)</span>kay/<span class=o>(</span>Q<span class=o>)</span>uit? O
</span></span><span class=line><span class=cl>We need to generate a lot of random bytes. It is a good idea to perform
</span></span><span class=line><span class=cl>some other action <span class=o>(</span><span class=nb>type</span> on the keyboard, move the mouse, utilize the
</span></span><span class=line><span class=cl>disks<span class=o>)</span> during the prime generation<span class=p>;</span> this gives the random number
</span></span><span class=line><span class=cl>generator a better chance to gain enough entropy.
</span></span><span class=line><span class=cl>We need to generate a lot of random bytes. It is a good idea to perform
</span></span><span class=line><span class=cl>some other action <span class=o>(</span><span class=nb>type</span> on the keyboard, move the mouse, utilize the
</span></span><span class=line><span class=cl>disks<span class=o>)</span> during the prime generation<span class=p>;</span> this gives the random number
</span></span><span class=line><span class=cl>generator a better chance to gain enough entropy.
</span></span><span class=line><span class=cl>gpg: key 85FA48B5318C31E8 marked as ultimately trusted
</span></span><span class=line><span class=cl>gpg: directory <span class=s1>&#39;/home/yanboyang713/.gnupg/openpgp-revocs.d&#39;</span> created
</span></span><span class=line><span class=cl>gpg: revocation certificate stored as <span class=s1>&#39;/home/yanboyang713/.gnupg/openpgp-revocs.d/3A1A0AAF6F4C8495DDEF5A4785FA48B5318C31E8.rev&#39;</span>
</span></span><span class=line><span class=cl>public and secret key created and signed.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>pub   rsa3072 2022-03-20 <span class=o>[</span>SC<span class=o>]</span>
</span></span><span class=line><span class=cl>      3A1A0AAF6F4C8495DDEF5A4785FA48B5318C31E8
</span></span><span class=line><span class=cl>uid                      Boyang Yan &lt;yanboyang713@gmail.com&gt;
</span></span><span class=line><span class=cl>sub   rsa3072 2022-03-20 <span class=o>[</span>E<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><p>Now you can use this command to check the key you just created:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>(base) [yanboyang713@Boyang-ThinkpadT470s] ➜ ~ gpg --list-keys
</span></span></span><span class=line><span class=cl><span class=go>gpg: checking the trustdb
</span></span></span><span class=line><span class=cl><span class=go>gpg: marginals needed: 3  completes needed: 1  trust model: pgp
</span></span></span><span class=line><span class=cl><span class=go>gpg: depth: 0  valid:   1  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 1u
</span></span></span><span class=line><span class=cl><span class=go>/home/yanboyang713/.gnupg/pubring.kbx
</span></span></span><span class=line><span class=cl><span class=go>-------------------------------------
</span></span></span><span class=line><span class=cl><span class=go>pub   rsa3072 2022-03-20 [SC]
</span></span></span><span class=line><span class=cl><span class=go>      3A1A0AAF6F4C8495DDEF5A4785FA48B5318C31E8
</span></span></span><span class=line><span class=cl><span class=go>uid           [ultimate] Boyang Yan &lt;yanboyang713@gmail.com&gt;
</span></span></span><span class=line><span class=cl><span class=go>sub   rsa3072 2022-03-20 [E]
</span></span></span></code></pre></td></tr></table></div></div><p>Here, you need to pay attention to two key points.</p><p>In the output of this command, <strong>3A1A0AAF6F4C8495DDEF5A4785FA48B5318C31E8</strong> is your <strong>key id</strong>, and <strong><a href=mailto:yanboyang713@gmail.com rel>yanboyang713@gmail.com</a></strong> is your email.</p><p><strong>A1A0AAF6F4C8495DDEF5A4785FA48B5318C31E8</strong> is the full key id which contains 40 characters, but sometimes we can use the last 16 characters to represent this key, i.e. <strong>85FA48B5318C31E8</strong>, this is the &ldquo;short key&rdquo;.</p><p>We will use them later.</p><p>So we successfully created a gpg key. Next, let’s share it with others.</p><p>Generally, there are two methods to share your keys. One of them is to send your key to a key server, then people can download it from the Internet.</p><p>Let’s try to send your key to a key server first. It’s pretty easy, simplely execute this command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>(base) [yanboyang713@Boyang-ThinkpadT470s] ➜ ~ gpg --send-keys 3A1A0AAF6F4C8495DDEF5A4785FA48B5318C31E8
</span></span></span><span class=line><span class=cl><span class=go>gpg: sending key 85FA48B5318C31E8 to hkps://keyserver.ubuntu.com
</span></span></span></code></pre></td></tr></table></div></div><p>If this command is executed successfully, other people can receive your key by running this command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --recv-keys 3A1A0AAF6F4C8495DDEF5A4785FA48B5318C31E8
</span></span></code></pre></td></tr></table></div></div><p>Or use the short key here:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --recv-keys 85FA48B5318C31E8
</span></span></code></pre></td></tr></table></div></div><p>Another method is to generate a key file and share it with others, then people can directly import your gpg key from this file.</p><p>To generate the key file, execute the following command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --output boyang.gpg --armor --export 3A1A0AAF6F4C8495DDEF5A4785FA48B5318C31E8
</span></span></code></pre></td></tr></table></div></div><p>Then we’ll get a key file named boyang.gpg.</p><p>To import this key, execute the following command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --import /path/to/boyang.gpg
</span></span></code></pre></td></tr></table></div></div><h3 id=configure-pacman>Configure pacman</h3><p>Now let’s configure pacman to use this gpg key.</p><p>Like gpg, there are also two methods for pacman to import a gpg key.</p><p>Mehod 1 is to receive it from key server:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>base<span class=o>)</span> <span class=o>[</span>yanboyang713@Boyang-ThinkpadT470s<span class=o>]</span> ➜ ~ sudo pacman-key --recv-keys 3A1A0AAF6F4C8495DDEF5A4785FA48B5318C31E8
</span></span><span class=line><span class=cl><span class=o>[</span>sudo<span class=o>]</span> password <span class=k>for</span> yanboyang713:
</span></span><span class=line><span class=cl>gpg: key 85FA48B5318C31E8: public key <span class=s2>&#34;Boyang Yan &lt;yanboyang713@gmail.com&gt;&#34;</span> imported
</span></span><span class=line><span class=cl>gpg: Total number processed: <span class=m>1</span>
</span></span><span class=line><span class=cl>gpg:               imported: <span class=m>1</span>
</span></span></code></pre></td></tr></table></div></div><p>Another method is to directly import this key from a key file:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo pacman-key --add /path/to/sainnhe.gpg
</span></span></code></pre></td></tr></table></div></div><p>After importing this key, it’s recommended to verify the fingerprint:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>base<span class=o>)</span> <span class=o>[</span>yanboyang713@Boyang-ThinkpadT470s<span class=o>]</span> ➜ ~ sudo pacman-key --finger 85FA48B5318C31E8
</span></span><span class=line><span class=cl>pub   rsa3072 2022-03-20 <span class=o>[</span>SC<span class=o>]</span>
</span></span><span class=line><span class=cl>      3A1A 0AAF 6F4C <span class=m>8495</span> DDEF  5A47 85FA 48B5 318C 31E8
</span></span><span class=line><span class=cl>uid           <span class=o>[</span> unknown<span class=o>]</span> Boyang Yan &lt;yanboyang713@gmail.com&gt;
</span></span><span class=line><span class=cl>sub   rsa3072 2022-03-20 <span class=o>[</span>E<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><p>Finally, we need to locally sign the key:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>base<span class=o>)</span> <span class=o>[</span>yanboyang713@Boyang-ThinkpadT470s<span class=o>]</span> ➜ ~ sudo pacman-key --lsign-key 85FA48B5318C31E8
</span></span><span class=line><span class=cl>  -&gt; Locally signed <span class=m>1</span> keys.
</span></span><span class=line><span class=cl><span class=o>==</span>&gt; Updating trust database...
</span></span><span class=line><span class=cl>gpg: marginals needed: <span class=m>3</span>  completes needed: <span class=m>1</span>  trust model: pgp
</span></span><span class=line><span class=cl>gpg: public key CF66D153D884358F is <span class=m>16</span> seconds newer than the signature
</span></span><span class=line><span class=cl>gpg: depth: <span class=m>0</span>  valid:   <span class=m>1</span>  signed:  <span class=m>74</span>  trust: 0-, 0q, 0n, 0m, 0f, 1u
</span></span><span class=line><span class=cl>gpg: depth: <span class=m>1</span>  valid:  <span class=m>74</span>  signed:  <span class=m>94</span>  trust: 1-, 0q, 0n, 73m, 0f, 0u
</span></span><span class=line><span class=cl>gpg: depth: <span class=m>2</span>  valid:  <span class=m>85</span>  signed:  <span class=m>31</span>  trust: 85-, 0q, 0n, 0m, 0f, 0u
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>base<span class=o>)</span> <span class=o>[</span>yanboyang713@Boyang-ThinkpadT470s<span class=o>]</span> ➜ ~ sudo pacman-key --finger 85FA48B5318C31E8
</span></span><span class=line><span class=cl>pub   rsa3072 2022-03-20 <span class=o>[</span>SC<span class=o>]</span>
</span></span><span class=line><span class=cl>      3A1A 0AAF 6F4C <span class=m>8495</span> DDEF  5A47 85FA 48B5 318C 31E8
</span></span><span class=line><span class=cl>uid           <span class=o>[</span>  full  <span class=o>]</span> Boyang Yan &lt;yanboyang713@gmail.com&gt;
</span></span><span class=line><span class=cl>sub   rsa3072 2022-03-20 <span class=o>[</span>E<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><p>Configure makepkg
If you want to build packages signed with this key, you’ll also need to configure makepkg.</p><p>In your <strong>/etc/makepkg.conf</strong>, uncomment and modify the following lines:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=err>#</span><span class=o>--</span> <span class=nx>Packager</span><span class=p>:</span> <span class=nx>name</span><span class=o>/</span><span class=nx>email</span> <span class=nx>of</span> <span class=nx>the</span> <span class=nx>person</span> <span class=nx>or</span> <span class=nx>organization</span> <span class=nx>building</span> <span class=nx>packages</span>
</span></span><span class=line><span class=cl><span class=nx>PACKAGER</span><span class=p>=</span><span class=s>&#34;Boyang Yan &lt;yanboyang713@gmail.com&gt;&#34;</span>
</span></span><span class=line><span class=cl><span class=err>#</span><span class=o>--</span> <span class=nx>Specify</span> <span class=nx>a</span> <span class=nx>key</span> <span class=nx>to</span> <span class=nx>use</span> <span class=k>for</span> <span class=kn>package</span> <span class=nx>signing</span>
</span></span><span class=line><span class=cl><span class=nx>GPGKEY</span><span class=p>=</span><span class=s>&#34;85FA48B5318C31E8&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>Remember to change the PACKAGER field, too. This will determine the Packager section in your package.</p><p>Build signed packages
Now let’s try to build a signed package.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>makepkg -sr --sign
</span></span></code></pre></td></tr></table></div></div><p>The main difference between building signed packages and building unsigned packages is that you need to pass &ndash;sign argument to makepkg if you want to build signed packages.</p><p>And after building a signed package, we will get not only a *.pkg.tar.zst, but also a *.pkg.tar.zst.sig file. This *.pkg.tar.zst.sig file is the binary signature of this package, we’ll need to add both of these two files to our package repository.</p><h2 id=reference-list>Reference List</h2><ol><li><a href=https://www.sainnhe.dev/post/create-personal-arch-linux-package-repository/ target=_blank rel="noopener noreferrer">Create Personal Arch Linux Package Repository via GitHub Pages</a></li></ol></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2022-08-25</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=https://yanboyang.com/archlinuxpackagerepository/index.md target=_blank rel="noopener noreferrer">Read Markdown</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://yanboyang.com/archlinuxpackagerepository/ data-title="Getting Started Custom Arch Linux Package Repository with GitHub"><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://yanboyang.com/archlinuxpackagerepository/><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=https://yanboyang.com/archlinuxpackagerepository/ data-title="Getting Started Custom Arch Linux Package Repository with GitHub" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://yanboyang.com/archlinuxpackagerepository/ data-title="Getting Started Custom Arch Linux Package Repository with GitHub"><i data-svg-src=https://yanboyang.com/lib/simple-icons/icons/line.min.svg></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://yanboyang.com/archlinuxpackagerepository/ data-title="Getting Started Custom Arch Linux Package Repository with GitHub"><i class="fab fa-weibo fa-fw"></i></a><a href=javascript:void(0); title="Share on Myspace" data-sharer=myspace data-url=https://yanboyang.com/archlinuxpackagerepository/ data-title="Getting Started Custom Arch Linux Package Repository with GitHub" data-description><i data-svg-src=https://yanboyang.com/lib/simple-icons/icons/myspace.min.svg></i></a><a href=javascript:void(0); title="Share on Blogger" data-sharer=blogger data-url=https://yanboyang.com/archlinuxpackagerepository/ data-title="Getting Started Custom Arch Linux Package Repository with GitHub" data-description><i class="fab fa-blogger fa-fw"></i></a><a href=javascript:void(0); title="Share on Evernote" data-sharer=evernote data-url=https://yanboyang.com/archlinuxpackagerepository/ data-title="Getting Started Custom Arch Linux Package Repository with GitHub"><i class="fab fa-evernote fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=https://yanboyang.com/>Home</a></span></section></div><div class=post-nav><a href=https://yanboyang.com/magit/ class=prev rel=prev title="Getting Started Magit on Doom Emacs"><i class="fas fa-angle-left fa-fw"></i>Getting Started Magit on Doom Emacs</a>
<a href=https://yanboyang.com/stationarytimeseries/ class=next rel=next title="Models for Stationary Time Series">Models for Stationary Time Series<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=disqus_thread class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://disqus.com/?ref_noscript>Disqus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreferrer" title="Hugo 0.101.0">Hugo</a> | Theme - <a href=https://github.com/sunt-programator/CodeIT target=_blank rel="noopener noreferrer" title="CodeIT 0.2.10"><i class="fas fa-laptop-code fa-fw"></i> CodeIT</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2019 - 2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://yanboyang.com/ target=_blank rel="noopener noreferrer">Boyang Yan</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=https://yanboyang.com/lib/katex/katex.min.css><link rel=stylesheet href=https://yanboyang.com/lib/katex/copy-tex.min.css><link rel=stylesheet href=https://yanboyang.com/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=https://boyang-blog.disqus.com/embed.js defer></script><script type=text/javascript src=https://yanboyang.com/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/lunr/lunr.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/sharer/sharer.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/katex/katex.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/katex/auto-render.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/katex/copy-tex.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/katex/mhchem.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/cookieconsent/cookieconsent.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:1e3},comment:{},cookieconsent:{content:{dismiss:"Got it!",link:"Learn more",message:"This website uses Cookies to improve your experience."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=https://yanboyang.com/js/theme.min.js></script></body></html>