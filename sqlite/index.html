<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="noodp">
<meta http-equiv=x-ua-compatible content="IE=edge, chrome=1">
<title>Getting started SQLite - Boyang Yan's Tech Blog</title><meta name=description content="This is Boyang Yan's Tech Blog"><meta property="og:title" content="Getting started SQLite">
<meta property="og:description" content="Introduction In this tutorial, you will learn SQLite step by step through extensive hands-on practices. This SQLite tutorial is designed for developers who want to use SQLite as the back-end database or to use SQLite to manage structured data in applications including desktop, web, and mobile apps. SQLite is an open-source, zero-configuration, self-contained, stand-alone, transaction relational database engine designed to be embedded into an application.
Getting started with SQLite You should go through this section if this is the first time you have worked with SQLite.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://yanboyang.com/sqlite/"><meta property="og:image" content="https://yanboyang.com/logo.png"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-03-01T06:11:32+10:00">
<meta property="article:modified_time" content="2022-01-13T07:50:31+00:00">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://yanboyang.com/logo.png">
<meta name=twitter:title content="Getting started SQLite">
<meta name=twitter:description content="Introduction In this tutorial, you will learn SQLite step by step through extensive hands-on practices. This SQLite tutorial is designed for developers who want to use SQLite as the back-end database or to use SQLite to manage structured data in applications including desktop, web, and mobile apps. SQLite is an open-source, zero-configuration, self-contained, stand-alone, transaction relational database engine designed to be embedded into an application.
Getting started with SQLite You should go through this section if this is the first time you have worked with SQLite.">
<meta name=application-name content="LoveIt">
<meta name=apple-mobile-web-app-title content="LoveIt"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=https://yanboyang.com/favicon.ico>
<link rel=icon type=image/png sizes=32x32 href=https://yanboyang.com/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=https://yanboyang.com/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=https://yanboyang.com/apple-touch-icon.png><link rel=mask-icon href=https://yanboyang.com/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=https://yanboyang.com/site.webmanifest><link rel=canonical href=https://yanboyang.com/sqlite/><link rel=prev href=https://yanboyang.com/rstudio/><link rel=next href=https://yanboyang.com/bigdataarchitectures/><link rel=stylesheet href=https://yanboyang.com/lib/normalize/normalize.min.css><link rel=stylesheet href=https://yanboyang.com/css/style.min.css><link rel=stylesheet href=https://yanboyang.com/lib/fontawesome-free/all.min.css><link rel=stylesheet href=https://yanboyang.com/lib/animate/animate.min.css><meta name=baidu-site-verification content="wsCeKMuJ31RLblHf"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Getting started SQLite","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/yanboyang.com\/sqlite\/"},"genre":"posts","wordcount":32620,"url":"https:\/\/yanboyang.com\/sqlite\/","datePublished":"2021-03-01T06:11:32+10:00","dateModified":"2022-01-13T07:50:31+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Boyang Yan"},"description":""}</script></head>
<body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':'auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark')&&document.body.setAttribute('theme','dark')</script>
<div id=mask></div><div class=wrapper><header class=desktop id=header-desktop>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-101949995-1','auto'),ga('send','pageview'))</script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-101949995-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<div class=header-wrapper>
<div class=header-title>
<a href=https://yanboyang.com/ title="Boyang Yan's Tech Blog"></a>
</div>
<div class=menu>
<div class=menu-inner><a class=menu-item href=https://yanboyang.com/> Home </a><a class=menu-item href=https://yanboyang.com/posts/> Posts </a><a class=menu-item href=https://yanboyang.com/tags/> Tags </a><a class=menu-item href=https://yanboyang.com/categories/> Categories </a><a class=menu-item href=https://yanboyang.com/about/> About Me </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search>
<i class="fas fa-search fa-fw"></i>
</a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear>
<i class="fas fa-times-circle fa-fw"></i>
</a>
<span class="search-button search-loading" id=search-loading-desktop>
<i class="fas fa-spinner fa-fw fa-spin"></i>
</span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i>
</a>
</div>
</div>
</div>
</header><header class=mobile id=header-mobile>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-101949995-1','auto'),ga('send','pageview'))</script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-101949995-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<div class=header-container>
<div class=header-wrapper>
<div class=header-title>
<a href=https://yanboyang.com/ title="Boyang Yan's Tech Blog"></a>
</div>
<div class=menu-toggle id=menu-toggle-mobile>
<span></span><span></span><span></span>
</div>
</div>
<div class=menu id=menu-mobile><div class=search-wrapper>
<div class="search mobile" id=search-mobile>
<input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search>
<i class="fas fa-search fa-fw"></i>
</a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear>
<i class="fas fa-times-circle fa-fw"></i>
</a>
<span class="search-button search-loading" id=search-loading-mobile>
<i class="fas fa-spinner fa-fw fa-spin"></i>
</span>
</div>
<a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>
Cancel
</a>
</div><a class=menu-item href=https://yanboyang.com/ title>Home</a><a class=menu-item href=https://yanboyang.com/posts/ title>Posts</a><a class=menu-item href=https://yanboyang.com/tags/ title>Tags</a><a class=menu-item href=https://yanboyang.com/categories/ title>Categories</a><a class=menu-item href=https://yanboyang.com/about/ title>About Me</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i>
</a></div>
</div>
</header>
<div class="search-dropdown desktop">
<div id=search-dropdown-desktop></div>
</div>
<div class="search-dropdown mobile">
<div id=search-dropdown-mobile></div>
</div>
<main class=main>
<div class=container><div class=toc id=toc-auto>
<h2 class=toc-title>Contents</h2>
<div class=toc-content id=toc-content-auto></div>
</div><article class="page single"><h1 class="single-title animated flipInX">Getting started SQLite</h1><div class=post-meta>
<div class=post-meta-line><span class=post-author><a href=https://yanboyang.com/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>Boyang Yan</a></span>&nbsp;<span class=post-category>included in <a href=https://yanboyang.com/categories/isys1055/><i class="far fa-folder fa-fw"></i>ISYS1055</a></span></div>
<div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-03-01>2021-03-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;32620 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;154 minutes&nbsp;</div>
</div><div class="details toc" id=toc-static kept=true>
<div class="details-summary toc-title">
<span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span>
</div>
<div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents>
<ul>
<li><a href=#introduction>Introduction</a></li>
<li><a href=#getting-started-with-sqlite>Getting started with SQLite</a>
<ul>
<li><a href=#first-help-you-answer-the-first-and-important-question-what-is-sqlite-you-will-have-a-brief-overview-of-sqlite>First, help you answer the first and important question: what is SQLite? You will have a brief overview of SQLite.</a>
<ul>
<li><a href=#what-is-sqlite>What is SQLite</a></li>
<li><a href=#serverless>Serverless</a></li>
<li><a href=#self-contained>Self-Contained</a></li>
<li><a href=#zero-configuration>Zero-configuration</a></li>
<li><a href=#transactional>Transactional</a></li>
<li><a href=#sqlite-distinctive-features>SQLite distinctive features</a></li>
</ul>
</li>
<li><a href=#second-show-you-step-by-step-how-to-download-and-install-the-sqlite-tools-on-your-computer>Second, show you step by step how to download and install the SQLite tools on your computer</a>
<ul>
<li><a href=#download-sqlite-tools>Download SQLite tools</a></li>
<li><a href=#run-sqlite-tools>Run SQLite tools</a></li>
<li><a href=#install-sqlite-gui-tool>Install SQLite GUI tool</a>
<ul>
<li><a href=#sqlitestudio>SQLiteStudio</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#third-introduce-you-to-an-sqlite-sample-database-and-walk-you-through-the-steps-of-using-the-sample-database-for-practicing>Third, introduce you to an SQLite sample database and walk you through the steps of using the sample database for practicing.</a>
<ul>
<li><a href=#introduction-to-chinook-sqlite-sample-database>Introduction to chinook SQLite sample database</a></li>
<li><a href=#chinook-sample-database-tables>Chinook sample database tables</a></li>
<li><a href=#download-sqlite-sample-database>Download SQLite sample database</a></li>
<li><a href=#how-to-connect-to-sqlite-sample-database>How to connect to SQLite sample database</a></li>
</ul>
</li>
<li><a href=#finally-guide-you-on-how-to-use-the-sqlite3-commands>Finally, guide you on how to use the sqlite3 commands</a>
<ul>
<li><a href=#connect-to-an-sqlite-database>Connect to an SQLite database</a></li>
<li><a href=#show-all-available-commands-and-their-purposes>Show all available commands and their purposes</a></li>
<li><a href=#show-databases-in-the-current-database-connection>Show databases in the current database connection</a></li>
<li><a href=#exit-sqlite3-tool>Exit sqlite3 tool</a></li>
<li><a href=#show-tables-in-a-database>Show tables in a database</a></li>
<li><a href=#show-the-structure-of-a-table>Show the structure of a table</a></li>
<li><a href=#show-indexes>Show indexes</a></li>
<li><a href=#save-the-result-of-a-query-into-a-file>Save the result of a query into a file</a></li>
<li><a href=#save-the-result-of-a-query-into-a-file-1>Save the result of a query into a file</a></li>
<li><a href=#execute-sql-statements-from-a-file>Execute SQL statements from a file</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#basic-sqlite-tutorial>Basic SQLite tutorial</a>
<ul>
<li><a href=#section-1-simple-query>Section 1. Simple query</a>
<ul>
<li><a href=#simple-uses-of-select-statement>Simple uses of SELECT statement</a></li>
<li><a href=#querying-data-from-a-table-using-the-select-statement>Querying data from a table using the SELECT statement</a></li>
<li><a href=#sqlite-select-examples>SQLite SELECT examples</a></li>
</ul>
</li>
<li><a href=#section-2-sorting-rows>Section 2. Sorting rows</a>
<ul>
<li><a href=#introduction-to-sqlite-order-by-clause>Introduction to SQLite ORDER BY clause</a></li>
<li><a href=#sqlite-order-by-clause-example>SQLite ORDER BY clause example</a></li>
<li><a href=#sqlite-order-by-with-the-column-position>SQLite ORDER BY with the column position</a></li>
<li><a href=#sorting-nulls>Sorting NULLs</a></li>
</ul>
</li>
<li><a href=#section-3-filtering-data>Section 3. Filtering data</a>
<ul>
<li><a href=#select-distinct--query-unique-rows-from-a-table-using-the-distinct-clause>Select Distinct – query unique rows from a table using the DISTINCT clause.</a>
<ul>
<li><a href=#introduction-to-sqlite-select-distinct-clause>Introduction to SQLite SELECT DISTINCT clause</a></li>
<li><a href=#sqlite-select-distinct-examples>SQLite SELECT DISTINCT examples</a></li>
<li><a href=#sqlite-select-distinct-on-multiple-columns>SQLite SELECT DISTINCT on multiple columns</a></li>
<li><a href=#sqlite-select-distinct-with-null-example>SQLite SELECT DISTINCT with NULL example</a></li>
</ul>
</li>
<li><a href=#where---filter-rows-of-a-result-set-using-various-conditions>Where – filter rows of a result set using various conditions.</a>
<ul>
<li><a href=#introduction-to-sqlite-where-clause>Introduction to SQLite WHERE clause</a></li>
<li><a href=#sqlite-comparison-operators>SQLite comparison operators</a></li>
<li><a href=#sqlite-logical-operators>SQLite logical operators</a></li>
<li><a href=#sqlite-where-clause-examples>SQLite WHERE clause examples</a></li>
<li><a href=#sqlite-where-clause-with-like-operator-example>SQLite WHERE clause with LIKE operator example</a></li>
<li><a href=#sqlite-where-clause-with-the-in-operator-example>SQLite WHERE clause with the IN operator example</a></li>
</ul>
</li>
<li><a href=#limit--constrain-the-number-of-rows-returned-by-a-query-and-how-to-get-only-the-necessary-data-from-a-table>Limit – constrain the number of rows returned by a query and how to get only the necessary data from a table.</a>
<ul>
<li><a href=#introduction-to-sqlite-limit-clause>Introduction to SQLite LIMIT clause</a></li>
<li><a href=#sqlite-limit-and-order-by-clause>SQLite LIMIT and ORDER BY clause</a></li>
<li><a href=#getting-the-nth-highest-and-the-lowest-value>Getting the nth highest and the lowest value</a></li>
</ul>
</li>
<li><a href=#between--test-whether-a-value-is-in-a-range-of-values>Between – test whether a value is in a range of values.</a>
<ul>
<li><a href=#ntroduction-to-sqlite-between-operator>ntroduction to SQLite BETWEEN Operator</a></li>
<li><a href=#sqlite-between-operator-examples>SQLite BETWEEN operator examples</a>
<ul>
<li><a href=#sqlite-between-numeric-values-example>SQLite BETWEEN numeric values example</a></li>
<li><a href=#sqlite-not-between-numeric-values-example>SQLite NOT BETWEEN numeric values example</a></li>
<li><a href=#sqlite-between-dates-example>SQLite BETWEEN dates example</a></li>
<li><a href=#sqlite-not-between-dates-example>SQLite NOT BETWEEN dates example</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#in--check-if-a-value-matches-any-value-in-a-list-of-values-or-subquery>In – check if a value matches any value in a list of values or subquery.</a>
<ul>
<li><a href=#introduction-to-the-sqlite-in-operator>Introduction to the SQLite IN operator</a></li>
<li><a href=#sqlite-in-operator-examples>SQLite IN operator examples</a></li>
<li><a href=#sqlite-in-operator-with-a-subquery-example>SQLite IN operator with a subquery example</a></li>
<li><a href=#sqlite-not-in-examples>SQLite NOT IN examples</a></li>
</ul>
</li>
<li><a href=#like--query-data-based-on-pattern-matching-using-wildcard-characters-percent-sign--and-underscore-_>Like – query data based on pattern matching using wildcard characters: percent sign (%) and underscore (_).</a>
<ul>
<li><a href=#introduction-to-sqlite-like-operator>Introduction to SQLite LIKE operator</a>
<ul>
<li><a href=#the-percent-sign--wildcard-examples>The percent sign % wildcard examples</a></li>
<li><a href=#the-underscore-_-wildcard-examples>The underscore _ wildcard examples</a></li>
</ul>
</li>
<li><a href=#sqlite-like-examples>SQLite LIKE examples</a></li>
<li><a href=#sqlite-like-with-escape-clause>SQLite LIKE with ESCAPE clause</a></li>
</ul>
</li>
<li><a href=#glob--determine-whether-a-string-matches-a-specific-unix-pattern>Glob – determine whether a string matches a specific UNIX-pattern.</a>
<ul>
<li><a href=#introduction-to-the-sqlite-glob-operator>Introduction to the SQLite GLOB operator</a></li>
<li><a href=#sqlite-glob-examples>SQLite GLOB examples</a></li>
</ul>
</li>
<li><a href=#is-null--check-if-a-value-is-null-or-not>IS NULL – check if a value is null or not.</a>
<ul>
<li><a href=#introduction-to-the-sqlite-is-null-operator>Introduction to the SQLite IS NULL operator</a></li>
<li><a href=#sqlite-is-not-null-operator>SQLite IS NOT NULL operator</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#section-4-joining-tables>Section 4. Joining tables</a>
<ul>
<li><a href=#inner-join--query-data-from-multiple-tables-using-the-inner-join-clause>Inner Join – query data from multiple tables using the inner join clause</a>
<ul>
<li><a href=#introduction-to-sqlite-inner-join-clause>Introduction to SQLite inner join clause</a></li>
<li><a href=#sqlite-inner-join-examples>SQLite INNER JOIN examples</a></li>
<li><a href=#sqlite-inner-join--3-tables-example>SQLite inner join – 3 tables example</a></li>
</ul>
</li>
<li><a href=#left-join--combine-data-from-multiple-tables-using-the-left-join-clause>Left Join – combine data from multiple tables using the left join clause</a>
<ul>
<li><a href=#introduction-to-sqlite-left-join-clause>Introduction to SQLite LEFT JOIN clause</a></li>
<li><a href=#sqlite-left-join-examples>SQLite LEFT JOIN examples</a></li>
</ul>
</li>
<li><a href=#cross-join--show-you-how-to-use-the-cross-join-clause-to-produce-a-cartesian-product-of-result-sets-of-the-tables-involved-in-the-join>Cross Join – show you how to use the cross join clause to produce a cartesian product of result sets of the tables involved in the join</a>
<ul>
<li><a href=#introduction-to-sqlite-cross-join-clause>Introduction to SQLite CROSS JOIN clause</a></li>
<li><a href=#sqlite-cross-join-clause-example>SQLite CROSS JOIN clause example</a></li>
</ul>
</li>
<li><a href=#self-join--join-a-table-to-itself-to-create-a-result-set-that-joins-rows-with-other-rows-within-the-same-table>Self Join – join a table to itself to create a result set that joins rows with other rows within the same table</a>
<ul>
<li><a href=#introduction-to-sqlite-self-join>Introduction to SQLite self-join</a></li>
<li><a href=#sqlite-self-join-examples>SQLite self-join examples</a></li>
</ul>
</li>
<li><a href=#full-outer-join--show-you-how-to-emulate-the-full-outer-join-in-the-sqlite-using-left-join-and-union-clauses>Full Outer Join – show you how to emulate the full outer join in the SQLite using left join and union clauses</a>
<ul>
<li><a href=#introduction-to-sql-full-outer-join-clause>Introduction to SQL FULL OUTER JOIN clause</a></li>
<li><a href=#emulating-sqlite-full-outer-join>Emulating SQLite full outer join</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#section-5-grouping-data>Section 5. Grouping data</a>
<ul>
<li><a href=#group-by--combine-a-set-of-rows-into-groups-based-on-specified-criteria-the-group-by-clause-helps-you-summarize-data-for-reporting-purposes>Group By – combine a set of rows into groups based on specified criteria. The GROUP BY clause helps you summarize data for reporting purposes.</a>
<ul>
<li><a href=#introduction-to-sqlite-group-by-clause>Introduction to SQLite GROUP BY clause</a></li>
<li><a href=#sqlite-group-by-examples>SQLite GROUP BY examples</a></li>
<li><a href=#sqlite-group-by-clause-with-count-function>SQLite GROUP BY clause with COUNT function</a></li>
<li><a href=#sqlite-group-by-and-inner-join-clause>SQLite GROUP BY and INNER JOIN clause</a></li>
<li><a href=#sqlite-group-by-with-having-clause>SQLite GROUP BY with HAVING clause</a></li>
<li><a href=#sqlite-group-by-clause-with-sum-function-example>SQLite GROUP BY clause with SUM function example</a></li>
<li><a href=#sqlite-group-by-with-max-min-and-avg-functions>SQLite GROUP BY with MAX, MIN, and AVG functions</a></li>
<li><a href=#sqlite-group-by-multiple-columns-example>SQLite GROUP BY multiple columns example</a></li>
<li><a href=#sqlite-group-by-date-example>SQLite GROUP BY date example</a></li>
</ul>
</li>
<li><a href=#having--specify-the-conditions-to-filter-the-groups-summarized-by-the-group-by-clause>Having – specify the conditions to filter the groups summarized by the GROUP BY clause.</a>
<ul>
<li><a href=#introduction-to-sqlite-having-clause>Introduction to SQLite HAVING clause</a></li>
<li><a href=#sqlite-having-clause-examples>SQLite HAVING clause examples</a></li>
<li><a href=#sqlite-having-clause-with-inner-join-example>SQLite HAVING clause with INNER JOIN example</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#section-6-set-operators>Section 6. Set operators</a>
<ul>
<li><a href=#union--combine-result-sets-of-multiple-queries-into-a-single-result-set-we-also-discuss-the-differences-between-union-and-union-all-clauses>Union – combine result sets of multiple queries into a single result set. We also discuss the differences between UNION and UNION ALL clauses.</a>
<ul>
<li><a href=#introduction-to-sqlite-union-operator>Introduction to SQLite UNION operator</a></li>
<li><a href=#sqlite-union-examples>SQLite UNION examples</a></li>
</ul>
</li>
<li><a href=#except--compare-the-result-sets-of-two-queries-and-returns-distinct-rows-from-the-left-query-that-are-not-output-by-the-right-query>Except – compare the result sets of two queries and returns distinct rows from the left query that are not output by the right query.</a>
<ul>
<li><a href=#introduction-to-sqlite-except-operator>Introduction to SQLite EXCEPT operator</a></li>
<li><a href=#sqlite-except-examples>SQLite EXCEPT examples</a></li>
</ul>
</li>
<li><a href=#intersect--compare-the-result-sets-of-two-queries-and-returns-distinct-rows-that-are-output-by-both-queries>Intersect – compare the result sets of two queries and returns distinct rows that are output by both queries.</a>
<ul>
<li><a href=#introduction-to-sqlite-intersect-operator>Introduction to SQLite INTERSECT operator</a></li>
</ul>
</li>
<li><a href=#sqlite-intersect-example>SQLite INTERSECT example</a></li>
</ul>
</li>
<li><a href=#section-7-subquery>Section 7. Subquery</a>
<ul>
<li><a href=#subquery--introduce-you-to-the-sqlite-subquery-and-correlated-subquery>Subquery – introduce you to the SQLite subquery and correlated subquery.</a>
<ul>
<li><a href=#introduction-to-sqlite-subquery>Introduction to SQLite subquery</a></li>
<li><a href=#sqlite-subquery-examples>SQLite subquery examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href=#avgalbumsize>AVG(album.size)</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href=#sqlite-correlated-subquery>SQLite correlated subquery</a></li>
<li><a href=#sqlite-correlated-subquery-in-the-select-clause-example>SQLite correlated subquery in the SELECT clause example</a></li>
</ul>
</li>
<li><a href=#exists-operator--test-for-the-existence-of-rows-returned-by-a-subquery>Exists operator – test for the existence of rows returned by a subquery.</a>
<ul>
<li><a href=#introduction-to-sqlite-exists-operator>Introduction to SQLite EXISTS operator</a></li>
<li><a href=#sqlite-exists-operator-example>SQLite EXISTS operator example</a></li>
<li><a href=#sqlite-not-exists-operator-example>SQLite NOT EXISTS operator example</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#section-8-more-querying-techniques>Section 8. More querying techniques</a>
<ul>
<li><a href=#case--add-conditional-logic-to-the-query>Case – add conditional logic to the query</a>
<ul>
<li><a href=#sqlite-simple-case-expression>SQLite simple CASE expression</a></li>
<li><a href=#simple-case-example>Simple CASE example</a></li>
<li><a href=#sqlite-searched-case-expression>SQLite searched CASE expression</a></li>
<li><a href=#searched-case-example>Searched CASE example</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#section-9-changing-data>Section 9. Changing data</a>
<ul>
<li><a href=#insert--insert-rows-into-a-table>Insert – insert rows into a table</a>
<ul>
<li><a href=#sqlite-insert--inserting-a-single-row-into-a-table>SQLite INSERT – inserting a single row into a table</a></li>
<li><a href=#sqlite-insert--inserting-multiple-rows-into-a-table>SQLite INSERT – Inserting multiple rows into a table</a></li>
<li><a href=#sqlite-insert--inserting-default-values>SQLite INSERT – Inserting default values</a></li>
<li><a href=#sqlite-insert--inserting-new-rows-with-data-provided-by-a-select-statement>SQLite INSERT – Inserting new rows with data provided by a SELECT statement</a></li>
</ul>
</li>
<li><a href=#update--update-existing-rows-in-a-table>Update – update existing rows in a table.</a>
<ul>
<li><a href=#introduction-to-sqlite-update-statement>Introduction to SQLite UPDATE statement</a></li>
<li><a href=#sqlite-update-statement-examples>SQLite UPDATE statement examples</a></li>
</ul>
</li>
<li><a href=#delete--delete-rows-from-a-table>Delete – delete rows from a table.</a>
<ul>
<li><a href=#introduction-to-sqlite-delete-statement>Introduction to SQLite DELETE statement</a></li>
<li><a href=#sqlite-delete-statement-examples>SQLite DELETE statement examples</a></li>
</ul>
</li>
<li><a href=#replace--insert-a-new-row-or-replace-the-existing-row-in-a-table>Replace – insert a new row or replace the existing row in a table.</a>
<ul>
<li><a href=#introduction-to-the-sqlite-replace-statement>Introduction to the SQLite REPLACE statement</a></li>
<li><a href=#the-sqlite-replace-statement-examples>The SQLite REPLACE statement examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#section-10-transactions>Section 10. Transactions</a>
<ul>
<li><a href=#transaction--show-you-how-to-handle-transactions-in-sqlite>Transaction – show you how to handle transactions in SQLite.</a>
<ul>
<li><a href=#sqlite--acid>SQLite & ACID</a></li>
<li><a href=#sqlite-transaction-statements>SQLite transaction statements</a></li>
<li><a href=#sqlite-transaction-example>SQLite transaction example</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#section-11-data-definition>Section 11. Data definition</a>
<ul>
<li><a href=#sqlite-data-types--introduce-you-to-the-sqlite-dynamic-type-system-and-its-important-concepts-storage-classes-manifest-typing-and-type-affinity>SQLite Data Types – introduce you to the SQLite dynamic type system and its important concepts: storage classes, manifest typing, and type affinity.</a>
<ul>
<li><a href=#introduction-to-sqlite-data-types>Introduction to SQLite data types</a></li>
<li><a href=#sqlite-manifest-typing--type-affinity>SQLite manifest typing & type affinity</a></li>
</ul>
</li>
<li><a href=#create-table--show-you-how-to-create-a-new-table-in-the-database>Create Table – show you how to create a new table in the database.</a>
<ul>
<li><a href=#introduction-to-sqlite-create-table-statement>Introduction to SQLite CREATE TABLE statement</a></li>
<li><a href=#sqlite-create-table-examples>SQLite CREATE TABLE examples</a></li>
</ul>
</li>
<li><a href=#alter-table--show-you-how-to-use-modify-the-structure-of-an-existing-table>Alter Table – show you how to use modify the structure of an existing table.</a>
<ul>
<li><a href=#using-sqlite-alter-table-to-rename-a-table>Using SQLite ALTER TABLE to rename a table</a></li>
<li><a href=#using-sqlite-alter-table-to-add-a-new-column-to-a-table>Using SQLite ALTER TABLE to add a new column to a table</a></li>
<li><a href=#using-sqlite-alter-table-to-rename-a-column>Using SQLite ALTER TABLE to rename a column</a></li>
<li><a href=#using-sqlite-alter-table-for-other-actions>Using SQLite ALTER TABLE for other actions</a></li>
<li><a href=#sqlite-alter-table-drop-column-example>SQLite ALTER TABLE DROP COLUMN example</a></li>
</ul>
</li>
<li><a href=#rename-column--learn-step-by-step-how-to-rename-a-column-of-a-table>Rename column – learn step by step how to rename a column of a table.</a>
<ul>
<li><a href=#introduction-to-sqlite-alter-table-rename-column-statement>Introduction to SQLite ALTER TABLE RENAME COLUMN statement</a></li>
<li><a href=#sqlite-alter-table-rename-column-example>SQLite ALTER TABLE RENAME COLUMN example</a></li>
<li><a href=#the-old-way-to-rename-column>The old way to rename column</a>
<ul>
<li><a href=#renaming-column-example>Renaming column example</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#drop-table--guide-you-on-how-to-remove-a-table-from-the-database>Drop Table – guide you on how to remove a table from the database.</a>
<ul>
<li><a href=#introduction-to-sqlite-drop-table-statement>Introduction to SQLite DROP TABLE statement</a></li>
<li><a href=#sqlite-drop-table-statement-examples>SQLite DROP TABLE statement examples</a></li>
</ul>
</li>
<li><a href=#vacuum--show-you-how-to-optimize-database-files>VACUUM – show you how to optimize database files.</a>
<ul>
<li><a href=#why-do-you-need-sqlite-vacuum-command>Why do you need SQLite VACUUM command</a></li>
<li><a href=#the-sqlite-vacuum-command>The SQLite VACUUM command</a></li>
<li><a href=#how-to-run-the-sqlite-vacuum-command>How to run the SQLite VACUUM command</a></li>
<li><a href=#vacuum-with-an-into-clause>VACUUM with an INTO clause</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#section-12-constraints>Section 12. Constraints</a>
<ul>
<li><a href=#primary-key--show-you-how-to-define-the-primary-key-for-a-table>Primary Key – show you how to define the primary key for a table.</a>
<ul>
<li><a href=#introduction-to-sqlite-primary-key>Introduction to SQLite primary key</a></li>
<li><a href=#sqlite-primary-key-and-rowid-table>SQLite primary key and rowid table</a></li>
<li><a href=#creating-sqlite-primary-key-examples>Creating SQLite primary key examples</a></li>
<li><a href=#adding-sqlite-primary-key-example>Adding SQLite primary key example</a></li>
</ul>
</li>
<li><a href=#not-null-constraint--learn-how-to-enforce-values-in-a-column-are-not-null>NOT NULL constraint – learn how to enforce values in a column are not NULL.</a>
<ul>
<li><a href=#introduction-to-sqlite-not-null-constraint>Introduction to SQLite NOT NULL constraint</a></li>
<li><a href=#sqlite-not-null-constraint-example>SQLite NOT NULL constraint example</a></li>
</ul>
</li>
<li><a href=#unique-constraint--ensure-values-in-a-column-or-a-group-of-columns-are-unique>UNIQUE constraint – ensure values in a column or a group of columns are unique.</a>
<ul>
<li><a href=#introduction-to-sqlite-unique-constraint>Introduction to SQLite UNIQUE constraint</a></li>
<li><a href=#sqlite-unique-constraint-examples>SQLite UNIQUE constraint examples</a>
<ul>
<li><a href=#defining-a-unique-constraint-for-one-column-example>Defining a UNIQUE constraint for one column example</a></li>
<li><a href=#defining-a-unique-constraint-for-multiple-columns-example>Defining a UNIQUE constraint for multiple columns example</a></li>
</ul>
</li>
<li><a href=#sqlite-unique-constraint-and-null>SQLite UNIQUE constraint and NULL</a></li>
</ul>
</li>
<li><a href=#check-constraint--ensure-the-values-in-a-column-meet-a-specified-condition-defined-by-an-expression>CHECK constraint – ensure the values in a column meet a specified condition defined by an expression.</a>
<ul>
<li><a href=#introduction-to-sqlite-check-constraints>Introduction to SQLite CHECK constraints</a></li>
<li><a href=#sqlite-check-constraint-examples>SQLite CHECK constraint examples</a></li>
<li><a href=#adding-check-constraints-to-an-existing-table>Adding CHECK constraints to an existing table</a></li>
</ul>
</li>
<li><a href=#autoincrement--explain-how-the-autoincrement-column-attribute-works-and-why-you-should-avoid-using-it>AUTOINCREMENT – explain how the AUTOINCREMENT column attribute works and why you should avoid using it.</a>
<ul>
<li><a href=#introduction-to-sqlite-rowid-table>Introduction to SQLite ROWID table</a></li>
<li><a href=#sqlite-autoincrement-column-attribute>SQLite AUTOINCREMENT column attribute</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#section-13-views>Section 13. Views</a>
<ul>
<li><a href=#create-view--introduce-you-to-the-view-concept-and-show-you-how-to-create-a-new-view-in-the-database>Create View – introduce you to the view concept and show you how to create a new view in the database.</a>
<ul>
<li><a href=#what-is-a-view>What is a view</a></li>
<li><a href=#sqlite-create-view-statement>SQLite CREATE VIEW statement</a></li>
<li><a href=#sqlite-create-view-examples>SQLite CREATE VIEW examples</a></li>
</ul>
</li>
<li><a href=#drop-view--show-you-how-to-drop-a-view-from-its-database-schema>Drop View – show you how to drop a view from its database schema.</a>
<ul>
<li><a href=#introduction-to-sqlite-drop-view-statement>Introduction to SQLite DROP VIEW statement</a></li>
<li><a href=#sqlite-drop-view-statement-examples>SQLite DROP VIEW statement examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#section-14-indexes>Section 14. Indexes</a>
<ul>
<li><a href=#index--teach-you-about-the-index-and-how-to-utilize-indexes-to-speed-up-your-queries>Index – teach you about the index and how to utilize indexes to speed up your queries.</a>
<ul>
<li><a href=#what-is-an-index>What is an index?</a></li>
<li><a href=#how-does-an-index-work>How does an index work</a></li>
<li><a href=#sqlite-create-index-statement>SQLite CREATE INDEX statement</a></li>
<li><a href=#sqlite-multicolumn-index-example>SQLite multicolumn index example</a></li>
<li><a href=#sqlite-show-indexes>SQLite Show Indexes</a></li>
<li><a href=#sqlite-drop-index-statement>SQLite DROP INDEX statement</a></li>
</ul>
</li>
<li><a href=#index-for-expressions--show-you-how-to-use-the-expression-based-index>Index for Expressions – show you how to use the expression-based index.</a>
<ul>
<li><a href=#introduction-to-the-sqlite-expression-based-index>Introduction to the SQLite expression-based index</a></li>
<li><a href=#how-the-sqlite-expression-based-index-work>How the SQLite expression-based index work</a></li>
<li><a href=#sqlite-expression-based-index-restriction>SQLite expression based index restriction</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#section-15-triggers>Section 15. Triggers</a>
<ul>
<li><a href=#trigger--manage-triggers-in-the-sqlite-database>Trigger – manage triggers in the SQLite database.</a>
<ul>
<li><a href=#what-is-an-sqlite-trigger>What is an SQLite trigger</a></li>
<li><a href=#when-do-we-need-sqlite-triggers>When do we need SQLite triggers</a></li>
<li><a href=#sqlite-create-trigger-statement>SQLite CREATE TRIGGER statement</a></li>
<li><a href=#sqlite-triggers-examples>SQLite triggers examples</a></li>
<li><a href=#sqlite-drop-trigger-statement>SQLite DROP TRIGGER statement</a></li>
</ul>
</li>
<li><a href=#create-instead-of-triggers--learn-about-instead-of-triggers-and-how-to-create-an-instead-of-trigger-to-update-data-via-a-view>Create INSTEAD OF triggers – learn about INSTEAD OF triggers and how to create an INSTEAD OF trigger to update data via a view.</a>
<ul>
<li><a href=#what-are-instead-of-triggers-in-sqlite>What are INSTEAD OF triggers in SQLite</a></li>
<li><a href=#sqlite-instead-of-trigger-example>SQLite INSTEAD OF trigger example</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#section-16-full-text-search>Section 16. Full-text search</a>
<ul>
<li><a href=#introduction-to-sqlite-full-text-search>Introduction to SQLite full-text search</a></li>
<li><a href=#querying-data-using-full-text-search>Querying data using full-text search</a></li>
<li><a href=#using-full-text-query-syntax>Using full-text query syntax</a></li>
<li><a href=#prefix-searches>Prefix searches</a></li>
<li><a href=#built-in-auxiliary-functions>Built-in auxiliary functions</a></li>
</ul>
</li>
<li><a href=#section-17-sqlite-tools>Section 17. SQLite tools</a>
<ul>
<li><a href=#sqlite-commands--show-you-the-most-commonly-used-command-in-the-sqlite3-program>SQLite Commands – show you the most commonly used command in the sqlite3 program.</a>
<ul>
<li><a href=#connect-to-an-sqlite-database-1>Connect to an SQLite database</a></li>
<li><a href=#show-all-available-commands-and-their-purposes-1>Show all available commands and their purposes</a></li>
<li><a href=#show-databases-in-the-current-database-connection-1>Show databases in the current database connection</a></li>
<li><a href=#exit-sqlite3-tool-1>Exit sqlite3 tool</a></li>
<li><a href=#show-the-structure-of-a-table-1>Show the structure of a table</a></li>
<li><a href=#show-indexes-1>Show indexes</a></li>
<li><a href=#save-the-result-of-a-query-into-a-file-2>Save the result of a query into a file</a></li>
<li><a href=#execute-sql-statements-from-a-file-1>Execute SQL statements from a file</a></li>
</ul>
</li>
<li><a href=#sqlite-show-tables--list-all-tables-in-a-database>SQLite Show Tables – list all tables in a database.</a>
<ul>
<li><a href=#showing-tables-using-the-sqlite-command-line-shell-program>Showing tables using the sqlite command line shell program</a></li>
<li><a href=#showing-tables-using-sql-statement>Showing tables using SQL statement</a></li>
</ul>
</li>
<li><a href=#sqlite-describe-table--show-the-structure-of-a-table>SQLite Describe Table – show the structure of a table.</a>
<ul>
<li><a href=#getting-the-structure-of-a-table-via-the-sqlite-command-line-shell-program>Getting the structure of a table via the SQLite command-line shell program</a></li>
<li><a href=#getting-the-structure-of-a-table-using-the-sql-statement>Getting the structure of a table using the SQL statement</a></li>
</ul>
</li>
<li><a href=#sqlite-dump--how-to-use-dump-command-to-backup-and-restore-a-database>SQLite Dump – how to use dump command to backup and restore a database.</a>
<ul>
<li><a href=#dump-the-entire-database-into-a-file-using-sqlite-dump-command>Dump the entire database into a file using SQLite dump command</a></li>
<li><a href=#dump-a-specific-table-using-the-sqlite-dump-command>Dump a specific table using the SQLite dump command</a></li>
<li><a href=#dump-tables-structure-only-using-schema-command>Dump tables structure only using schema command</a></li>
<li><a href=#dump-data-of-one-or-more-tables-into-a-file>Dump data of one or more tables into a file</a></li>
</ul>
</li>
<li><a href=#sqlite-import-csv--import-csv-files-into-a-table>SQLite Import CSV – import CSV files into a table.</a>
<ul>
<li><a href=#importing-a-csv-file-into-a-table-using-sqlite3-tool>Importing a CSV file into a table using sqlite3 tool</a></li>
<li><a href=#import-a-csv-file-into-a-table-using-sqlite-studio>Import a CSV file into a table using SQLite Studio</a></li>
</ul>
</li>
<li><a href=#sqlite-export-csv--export-an-sqlite-database-to-csv-files>SQLite Export CSV – export an SQLite database to CSV files.</a>
<ul>
<li><a href=#export-sqlite-database-to-a-csv-file-using-sqlite3-tool>Export SQLite Database to a CSV file using sqlite3 tool</a></li>
<li><a href=#export-sqlite-database-to-a-csv-file-using-sqlitestudio>Export SQLite database to a CSV file using SQliteStudio</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</nav></div>
</div><div class=content id=content><h2 id=introduction>Introduction</h2>
<p>In this tutorial, you will learn SQLite step by step through extensive hands-on practices.
This SQLite tutorial is designed for developers who want to use SQLite as the back-end database or to use SQLite to manage structured data in applications including desktop, web, and mobile apps.
SQLite is an open-source, zero-configuration, self-contained, stand-alone, transaction relational database engine designed to be embedded into an application.</p>
<h2 id=getting-started-with-sqlite>Getting started with SQLite</h2>
<p>You should go through this section if this is the first time you have worked with SQLite. Follow these 4-easy steps to get started with SQLite fast.</p>
<h3 id=first-help-you-answer-the-first-and-important-question-what-is-sqlite-you-will-have-a-brief-overview-of-sqlite>First, help you answer the first and important question: what is SQLite? You will have a brief overview of SQLite.</h3>
<h4 id=what-is-sqlite>What is SQLite</h4>
<p>SQLite is a software library that provides a relational database management system. The lite in SQLite means lightweight in terms of setup, database administration, and required resources.</p>
<p>SQLite has the following noticeable features: self-contained, serverless, zero-configuration, transactional.</p>
<h4 id=serverless>Serverless</h4>
<p>Normally, an RDBMS such as MySQL, PostgreSQL, etc., requires a separate server process to operate. The applications that want to access the database server use TCP/IP protocol to send and receive requests. This is called client/server architecture.</p>
<p>The following diagram illustrates the RDBMS client/server architecture:
<img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/RDBMS-Client-Server-Architecture.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/RDBMS-Client-Server-Architecture.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/RDBMS-Client-Server-Architecture.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/RDBMS-Client-Server-Architecture.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/RDBMS-Client-Server-Architecture.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/RDBMS-Client-Server-Architecture.jpg></p>
<p>SQLite does NOT work this way.</p>
<p>SQLite does NOT require a server to run.</p>
<p>SQLite database is integrated with the application that accesses the database. The applications interact with the SQLite database read and write directly from the database files stored on disk.</p>
<p>The following diagram illustrates the SQLite server-less architecture:
<img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/What-is-SQLite.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/What-is-SQLite.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/What-is-SQLite.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/What-is-SQLite.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/What-is-SQLite.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/What-is-SQLite.jpg></p>
<h4 id=self-contained>Self-Contained</h4>
<p>SQLite is self-contained means it requires minimal support from the operating system or external library. This makes SQLite usable in any environment especially in embedded devices like iPhones, Android phones, game consoles, handheld media players, etc.</p>
<p>SQLite is developed using ANSI-C. The source code is available as a big sqlite3.c and its header file sqlite3.h. If you want to develop an application that uses SQLite, you just need to drop these files into your project and compile it with your code.</p>
<h4 id=zero-configuration>Zero-configuration</h4>
<p>Because of the serverless architecture, you don’t need to “install” SQLite before using it. There is no server process that needs to be configured, started, and stopped.</p>
<p>In addition, SQLite does not use any configuration files.</p>
<h4 id=transactional>Transactional</h4>
<p>All transactions in SQLite are fully ACID-compliant. It means all queries and changes are Atomic, Consistent, Isolated, and Durable.</p>
<p>In other words, all changes within a transaction take place completely or not at all even when an unexpected situation like application crash, power failure, or operating system crash occurs.</p>
<p>sqlite> .mode column
sqlite> .header on
sqlite> .read ./commands.txt
AlbumId Title</p>
<hr>
<p>156 &mldr;And Justice For All <br>
257 20th Century Masters - The Millennium Collection: The Best of Scorpions
296 A Copland Celebration, Vol. I <br>
94 A Matter of Life and Death <br>
95 A Real Dead One <br>
96 A Real Live One <br>
285 A Soprano Inspired <br>
139 A TempestadeTempestade Ou O Livro Dos Dias <br>
203 A-Sides <br>
160 Ace Of Spades <br>
sqlite></p>
<h4 id=sqlite-distinctive-features>SQLite distinctive features</h4>
<p>SQLite uses dynamic types for tables. It means you can store any value in any column, regardless of the data type.</p>
<p>SQLite allows a single database connection to access multiple database files simultaneously. This brings many nice features like joining tables in different databases or copying data between databases in a single command.</p>
<p>SQLite is capable of creating in-memory databases that are very fast to work with.</p>
<h3 id=second-show-you-step-by-step-how-to-download-and-install-the-sqlite-tools-on-your-computer>Second, show you step by step how to download and install the SQLite tools on your computer</h3>
<h4 id=download-sqlite-tools>Download SQLite tools</h4>
<p>To download SQLite, you open the download page of the SQlite official website.</p>
<p>First, go to the <a href=https://www.sqlite.org target=_blank rel="noopener noreferrer">https://www.sqlite.org</a> website.
Second, open the download page <a href=https://www.sqlite.org/download.html target=_blank rel="noopener noreferrer">https://www.sqlite.org/download.html</a>
SQLite provides various tools for working across platforms e.g., Windows, Linux, and Mac. You need to select an appropriate version to download.</p>
<h4 id=run-sqlite-tools>Run SQLite tools</h4>
<p>Installing SQLite is simple and straightforward.</p>
<ol>
<li>open the Ternal.</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>[yanboyang713@boyang ~]$ sqlite3
</span><span class=go>SQLite version 3.35.1 2021-03-15 16:53:57
</span><span class=go>Enter &#34;.help&#34; for usage hints.
</span><span class=go>Connected to a transient in-memory database.
</span><span class=go>Use &#34;.open FILENAME&#34; to reopen on a persistent database.
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><ol start=2>
<li>You can type the .help command from the sqlite> prompt to see all available commands in sqlite3.2. you can type the .help command from the sqlite> prompt to see all available commands in sqlite3.</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .help
</span><span class=go>.archive ...             Manage SQL archives
</span><span class=go>.auth ON|OFF             Show authorizer callbacks
</span><span class=go>.backup ?DB? FILE        Backup DB (default &#34;main&#34;) to FILE
</span><span class=go>.bail on|off             Stop after hitting an error.  Default OFF
</span><span class=go>.binary on|off           Turn binary output on or off.  Default OFF
</span></code></pre></td></tr></table>
</div>
</div><ol start=3>
<li>To quit the sqlite>, you use .quit command as follows:</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .quit
</span><span class=go>[yanboyang713@boyang ~]$ 
</span></code></pre></td></tr></table>
</div>
</div><h4 id=install-sqlite-gui-tool>Install SQLite GUI tool</h4>
<p>The sqlite3 shell is excellent…</p>
<p>However, sometimes, you may want to work with the SQLite databases using an intuitive GUI tool.</p>
<p>There are many GUI tools for managing SQLite databases available ranging from freeware to commercial licenses.</p>
<h5 id=sqlitestudio>SQLiteStudio</h5>
<p>The SQLiteStudio tool is a free GUI tool for managing SQLite databases. It is free, portable, intuitive, and cross-platform. SQLite tool also provides some of the most important features to work with SQLite databases such as importing, exporting data in various formats including CSV, XML, and JSON.</p>
<h3 id=third-introduce-you-to-an-sqlite-sample-database-and-walk-you-through-the-steps-of-using-the-sample-database-for-practicing>Third, introduce you to an SQLite sample database and walk you through the steps of using the sample database for practicing.</h3>
<h4 id=introduction-to-chinook-sqlite-sample-database>Introduction to chinook SQLite sample database</h4>
<p>We provide you with the SQLite sample database named chinook. The chinook sample database is a good database for practicing with SQL, especially SQLite.</p>
<p>The following database diagram illustrates the chinook database tables and their relationships.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/sqlite-sample-database-color.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/sqlite-sample-database-color.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/sqlite-sample-database-color.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/sqlite-sample-database-color.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/sqlite-sample-database-color.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/sqlite-sample-database-color.jpg></p>
<h4 id=chinook-sample-database-tables>Chinook sample database tables</h4>
<p>There are 11 tables in the chinook sample database.</p>
<ul>
<li><strong>employees</strong> table stores employees data such as employee id, last name, first name, etc. It also has a field named ReportsTo to specify who reports to whom.</li>
<li><strong>customers</strong> table stores customers data.</li>
<li><strong>invoices & invoice_items</strong> tables: these two tables store invoice data. The invoices table stores invoice header data and the invoice_items table stores the invoice line items data.</li>
<li><strong>artists</strong> table stores artists data. It is a simple table that contains only the artist id and name.</li>
<li><strong>albums</strong> table stores data about a list of tracks. Each album belongs to one artist. However, one artist may have multiple albums.</li>
<li><strong>media_types</strong> table stores media types such as MPEG audio and AAC audio files.</li>
<li><strong>genres</strong> table stores music types such as rock, jazz, metal, etc.</li>
<li><strong>tracks</strong> table stores the data of songs. Each track belongs to one album.</li>
<li><strong>playlists & playlist_track</strong> tables: playlists table store data about playlists. Each playlist contains a list of tracks. Each track may belong to multiple playlists. The relationship between the playlists table and tracks table is many-to-many. The playlist_track table is used to reflect this relationship.</li>
</ul>
<h4 id=download-sqlite-sample-database>Download SQLite sample database</h4>
<p>You can download the SQLite sample database <a href=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/03/chinook.zip target=_blank rel="noopener noreferrer">here</a>.</p>
<p>In case you want to have the database diagram for reference, you can download both black&white and color versions in PDF format.
<img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/03/sqlite-sample-database-diagram.pdf data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2018/03/sqlite-sample-database-diagram.pdf, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/03/sqlite-sample-database-diagram.pdf 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/03/sqlite-sample-database-diagram.pdf 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/03/sqlite-sample-database-diagram.pdf title="Download SQLite sample database diagram"></p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/03/sqlite-sample-database-diagram-color.pdf data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2018/03/sqlite-sample-database-diagram-color.pdf, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/03/sqlite-sample-database-diagram-color.pdf 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/03/sqlite-sample-database-diagram-color.pdf 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/03/sqlite-sample-database-diagram-color.pdf title="Download SQLite sample database diagram with color"></p>
<h4 id=how-to-connect-to-sqlite-sample-database>How to connect to SQLite sample database</h4>
<p>The sample database file is ZIP format, therefore, you need to extract it to a folder <strong>chinook.db</strong></p>
<p>Using the following command to connect to the chinook sample database location.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>[yanboyang713@boyang chinook]$ pwd
</span><span class=go>/home/yanboyang713/Documents/study/ISYS1055-DatabaseConcepts/chinook
</span><span class=go>[yanboyang713@boyang chinook]$ sqlite3 ./chinook.db 
</span><span class=go>SQLite version 3.35.1 2021-03-15 16:53:57
</span><span class=go>Enter &#34;.help&#34; for usage hints.
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>Trying a simple command e.g., .tables to view all the tables available in the sample database.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .tables
</span><span class=go>albums          employees       invoices        playlists     
</span><span class=go>artists         genres          media_types     tracks        
</span><span class=go>customers       invoice_items   playlist_track
</span></code></pre></td></tr></table>
</div>
</div><h3 id=finally-guide-you-on-how-to-use-the-sqlite3-commands>Finally, guide you on how to use the sqlite3 commands</h3>
<h4 id=connect-to-an-sqlite-database>Connect to an SQLite database</h4>
<p>To start the sqlite3, you type the sqlite3 as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>[yanboyang713@boyang chinook]$ sqlite3
</span><span class=go>SQLite version 3.35.1 2021-03-15 16:53:57
</span><span class=go>Enter &#34;.help&#34; for usage hints.
</span><span class=go>Connected to a transient in-memory database.
</span><span class=go>Use &#34;.open FILENAME&#34; to reopen on a persistent database.
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>By default, an SQLite session uses the in-memory database, therefore, all changes will be gone when the session ends.</p>
<p>To open a database file, you use the .open FILENAME command. The following statement opens the chinook.db database:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .open ./chinook.db
</span></code></pre></td></tr></table>
</div>
</div><p>If you want to open a specific database file when you connect to the SQlite database, you use the following command:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>[yanboyang713@boyang chinook]$ sqlite3 ./chinook.db 
</span><span class=go>SQLite version 3.35.1 2021-03-15 16:53:57
</span><span class=go>Enter &#34;.help&#34; for usage hints.
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>If you start a session with a database name that does not exist, the sqlite3 tool will create the database file.</p>
<p>For example, the following command creates a database named <strong>boyang</strong></p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>[yanboyang713@boyang chinook]$ sqlite3 boyang.db
</span><span class=go>SQLite version 3.35.1 2021-03-15 16:53:57
</span><span class=go>Enter &#34;.help&#34; for usage hints.
</span></code></pre></td></tr></table>
</div>
</div><h4 id=show-all-available-commands-and-their-purposes>Show all available commands and their purposes</h4>
<p>To show all available commands and their purpose, you use the .help command as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>.help
</code></pre></td></tr></table>
</div>
</div><h4 id=show-databases-in-the-current-database-connection>Show databases in the current database connection</h4>
<p>To show all databases in the current connection, you use the .databases command. The .databases command displays at least one database with the name: main.</p>
<p>For example, the following command shows all the databases of the current connection:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sqlite&gt; .database
main: /home/yanboyang713/Documents/study/ISYS1055-DatabaseConcepts/chinook/boyang.db r/w
</code></pre></td></tr></table>
</div>
</div><p>To add an additional database in the current connection, you use the statement ATTACH DATABASE. The following statement adds the chinook database to the current connection.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sqlite&gt; ATTACH DATABASE <span class=s2>&#34;./chinook.db&#34;</span> AS chinook<span class=p>;</span>
</code></pre></td></tr></table>
</div>
</div><p>Now if you run the .database command again, the sqlite3 returns two databases: main and chinook.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sqlite&gt; .database
main: /home/yanboyang713/Documents/study/ISYS1055-DatabaseConcepts/chinook/boyang.db r/w
chinook: /home/yanboyang713/Documents/study/ISYS1055-DatabaseConcepts/chinook/chinook.db r/w
</code></pre></td></tr></table>
</div>
</div><h4 id=exit-sqlite3-tool>Exit sqlite3 tool</h4>
<p>To exit the sqlite3 program, you use the .exit command.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sqlite&gt; .exit
</code></pre></td></tr></table>
</div>
</div><h4 id=show-tables-in-a-database>Show tables in a database</h4>
<p>To display all the tables in the current database, you use the .tables command. The following commands open a new database connection to the chinook database and display the tables in the database.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>[yanboyang713@boyang chinook]$ sqlite3 ./chinook.db 
</span><span class=go>SQLite version 3.35.1 2021-03-15 16:53:57
</span><span class=go>Enter &#34;.help&#34; for usage hints.
</span><span class=go>sqlite&gt; .table
</span><span class=go>albums          employees       invoices        playlists     
</span><span class=go>artists         genres          media_types     tracks        
</span><span class=go>customers       invoice_items   playlist_track
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>If you want to find tables based on a specific pattern, you use the .table pattern command. The sqlite3 uses the LIKE operator for pattern matching.</p>
<p>For example, the following statement returns the table that ends with the string es.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sqlite&gt; .table <span class=s1>&#39;%es&#39;</span>
employees    genres       invoices     media_types
sqlite&gt; 
</code></pre></td></tr></table>
</div>
</div><h4 id=show-the-structure-of-a-table>Show the structure of a table</h4>
<p>To display the structure of a table, you use the .schema TABLE command. The TABLE argument could be a pattern. If you omit it, the .schema command will show the structures of all the tables.</p>
<p>The following command shows the structure of the albums table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sqlite&gt; .schema albums
CREATE TABLE IF NOT EXISTS <span class=s2>&#34;albums&#34;</span>
<span class=o>(</span>
    <span class=o>[</span>AlbumId<span class=o>]</span> INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    <span class=o>[</span>Title<span class=o>]</span> NVARCHAR<span class=o>(</span>160<span class=o>)</span>  NOT NULL,
    <span class=o>[</span>ArtistId<span class=o>]</span> INTEGER  NOT NULL,
    FOREIGN KEY <span class=o>([</span>ArtistId<span class=o>])</span> REFERENCES <span class=s2>&#34;artists&#34;</span> <span class=o>([</span>ArtistId<span class=o>])</span> 
		ON DELETE NO ACTION ON UPDATE NO ACTION
<span class=o>)</span><span class=p>;</span>
CREATE INDEX <span class=o>[</span>IFK_AlbumArtistId<span class=o>]</span> ON <span class=s2>&#34;albums&#34;</span> <span class=o>([</span>ArtistId<span class=o>])</span><span class=p>;</span>
sqlite&gt; 
</code></pre></td></tr></table>
</div>
</div><p>To show the full schema and the content, you use the .fullschema command.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sqlite&gt;.fullschema
</code></pre></td></tr></table>
</div>
</div><h4 id=show-indexes>Show indexes</h4>
<p>To show all indexes of the current database, you use the .indexes command as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sqlite&gt; .indexes
IFK_AlbumArtistId                  IFK_PlaylistTrackTrackId         
IFK_CustomerSupportRepId           IFK_TrackAlbumId                 
IFK_EmployeeReportsTo              IFK_TrackGenreId                 
IFK_InvoiceCustomerId              IFK_TrackMediaTypeId             
IFK_InvoiceLineInvoiceId           sqlite_autoindex_playlist_track_1
IFK_InvoiceLineTrackId           
sqlite&gt; 
</code></pre></td></tr></table>
</div>
</div><p>To show the indexes of a specific table, you use the .indexes TABLE command. For example, to show indexes of the albums table, you use the following command:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sqlite&gt; .indexes albums
IFK_AlbumArtistId
</code></pre></td></tr></table>
</div>
</div><p>To show indexes of the tables whose names end with es, you use a pattern of the LIKE operator.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sqlite&gt; .indexes %es
IFK_EmployeeReportsTo  IFK_InvoiceCustomerId
</code></pre></td></tr></table>
</div>
</div><h4 id=save-the-result-of-a-query-into-a-file>Save the result of a query into a file</h4>
<p>To save the result of a query into a file, you use the .output FILENAME command. Once you issue the .output command, all the results of the subsequent queries will be saved to the file that you specified in the FILENAME argument. If you want to save the result of the next single query only to the file, you issue the .once FILENAME command.</p>
<p>To display the result of the query to the standard output again, you issue the .output command without arguments.</p>
<p>The following commands select the title from the albums table and write the result to the albums.txt file.</p>
<h4 id=save-the-result-of-a-query-into-a-file-1>Save the result of a query into a file</h4>
<p>To save the result of a query into a file, you use the .output FILENAME command. Once you issue the .output command, all the results of the subsequent queries will be saved to the file that you specified in the FILENAME argument. If you want to save the result of the next single query only to the file, you issue the .once FILENAME command.</p>
<p>To display the result of the query to the standard output again, you issue the .output command without arguments.</p>
<p>The following commands select the title from the albums table and write the result to the albums.txt file.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sqlite&gt; .output albums.txt
sqlite&gt; SELECT title FROM albums<span class=p>;</span>
sqlite&gt; .output
sqlite&gt; 
</code></pre></td></tr></table>
</div>
</div><h4 id=execute-sql-statements-from-a-file>Execute SQL statements from a file</h4>
<p>Suppose we have a file named commands.txt in the current folder with the following content:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>[yanboyang713@boyang chinook]$ pwd
</span><span class=go>/home/yanboyang713/Documents/study/ISYS1055-DatabaseConcepts/chinook
</span><span class=go>[yanboyang713@boyang chinook]$ cat commands.txt 
</span><span class=go>SELECT albumid, title
</span><span class=go>FROM albums
</span><span class=go>ORDER BY title
</span><span class=go>LIMIT 10;
</span></code></pre></td></tr></table>
</div>
</div><p>To execute the SQL statements in the commands.txt file, you use the .read FILENAME command as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sqlite&gt; .mode column
sqlite&gt; .header on
sqlite&gt; .read ./commands.txt
AlbumId  Title                                                                  
-------  -----------------------------------------------------------------------
<span class=m>156</span>      ...And Justice For All                                                 
<span class=m>257</span>      20th Century Masters - The Millennium Collection: The Best of Scorpions
<span class=m>296</span>      A Copland Celebration, Vol. I                                          
<span class=m>94</span>       A Matter of Life and Death                                             
<span class=m>95</span>       A Real Dead One                                                        
<span class=m>96</span>       A Real Live One                                                        
<span class=m>285</span>      A Soprano Inspired                                                     
<span class=m>139</span>      A TempestadeTempestade Ou O Livro Dos Dias                             
<span class=m>203</span>      A-Sides                                                                
<span class=m>160</span>      Ace Of Spades                                                          
sqlite&gt; 
</code></pre></td></tr></table>
</div>
</div><h2 id=basic-sqlite-tutorial>Basic SQLite tutorial</h2>
<p>This section presents basic SQL statements that you can use with SQLite. You will first start querying data from the sample database. If you are already familiar with SQL, you will notice the differences between SQL standard and SQL dialect used in SQLite.</p>
<h3 id=section-1-simple-query>Section 1. Simple query</h3>
<p>Select – query data from a single table using SELECT statement.</p>
<p>The SELECT statement is one of the most commonly used statements in SQL. The SQLite SELECT statement provides all features of the SELECT statement in SQL standard.</p>
<h4 id=simple-uses-of-select-statement>Simple uses of SELECT statement</h4>
<p>You can use the SELECT statement to perform a simple calculation as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT  1 + 1;
</span><span class=go>1 + 1
</span><span class=go>-----
</span><span class=go>2    
</span></code></pre></td></tr></table>
</div>
</div><p>You can use multiple expressions in the SELECT statement as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT 
</span><span class=go>   10 / 5, 
</span><span class=go>   2 * 4 ;
</span><span class=go>10 / 5  2 * 4
</span><span class=go>------  -----
</span><span class=go>2       8    
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><h4 id=querying-data-from-a-table-using-the-select-statement>Querying data from a table using the SELECT statement</h4>
<p>We often use the SELECT statement to query data from one or more table. The syntax of the SELECT statement is as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=k>DISTINCT</span><span class=w> </span><span class=n>column_list</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>table_list</span><span class=w>
</span><span class=w>  </span><span class=k>JOIN</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>join_condition</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>row_filter</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=k>column</span><span class=w>
</span><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=k>count</span><span class=w> </span><span class=k>OFFSET</span><span class=w> </span><span class=k>offset</span><span class=w>
</span><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=k>column</span><span class=w>
</span><span class=w></span><span class=k>HAVING</span><span class=w> </span><span class=n>group_filter</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The SELECT statement is the most complex statement in SQLite. To help easier to understand each part, we will break the SELECT statement into multiple section.</p>
<p>In this section, we are going to focus on the simplest form of the SELECT statement that allows you to query data from a single table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>column_list</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=k>table</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Even though the SELECT clause appears before the FROM clause, SQLite evaluates the FROM clause first and then the SELECT clause, therefore:</p>
<ul>
<li>
<p>First, specify the table where you want to get data from in the FROM clause. Notice that you can have more than one table in the FROM clause. We will discuss it in the subsequent tutorial.</p>
</li>
<li>
<p>Second, specify a column or a list of comma-separated columns in the SELECT clause.</p>
</li>
</ul>
<p>You use the semicolon (;) to terminate the statement.</p>
<h4 id=sqlite-select-examples>SQLite SELECT examples</h4>
<p>Let’s take a look at the tracks table in the sample database.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png title=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png></p>
<p>The tracks table contains columns and rows. It looks like a spreadsheet.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/Tracks-Table-data.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/Tracks-Table-data.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/Tracks-Table-data.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/Tracks-Table-data.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/Tracks-Table-data.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/Tracks-Table-data.jpg></p>
<p>To get data from the tracks table such as trackid, track name, composer, and unit price, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>trackid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>composer</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>unitprice</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>You specify a list column names, which you want to get data, in the SELECT clause and the tracks table in the FROM clause. SQLite returns the following result:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/Tracks-Table-partial-data.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/Tracks-Table-partial-data.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/Tracks-Table-partial-data.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/Tracks-Table-partial-data.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/Tracks-Table-partial-data.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/Tracks-Table-partial-data.jpg></p>
<p>To get data from all columns, you specify the columns of the tracks table in the SELECT clause as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>trackid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>albumid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>mediatypeid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>genreid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>composer</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>milliseconds</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>bytes</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>unitprice</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>For a table with many columns, the query would be so long that time-consuming to type. To avoid this, you can use the asterisk (*), which is the shorthand for all columns of the table as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>tracks</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><strong>NOTE:</strong>
You should use the asterisk (*) for the testing purpose only, not in the real application development.</p>
<p>When you develop an application, you should control what SQLite returns to your application. Suppose, a table has 3 columns, and you use the asterisk (*) to retrieve the data from all three columns.</p>
<p>What if someone removes a column, your application would not be working properly, because it assumes that there are three columns returned and the logic to process those three columns would be broken.</p>
<p>If someone adds more columns, your application may work but it gets more data than needed, which creates more I/O overhead between the database and application.</p>
<p>So try to avoid using the asterisk (*) as a good habit when you use the SELECT statement.</p>
<h3 id=section-2-sorting-rows>Section 2. Sorting rows</h3>
<p>Order By – sort the result set in ascending or descending order.</p>
<h4 id=introduction-to-sqlite-order-by-clause>Introduction to SQLite ORDER BY clause</h4>
<p>SQLite stores data in the tables in an unspecified order. It means that the rows in the table may or may not be in the order that they were inserted.</p>
<p>If you use the SELECT statement to query data from a table, the order of rows in the result set is unspecified.</p>
<p>To sort the result set, you add the ORDER BY clause to the SELECT statement as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>   </span><span class=n>select_list</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>   </span><span class=k>table</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>    </span><span class=n>column_1</span><span class=w> </span><span class=k>ASC</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>column_2</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The ORDER BY clause comes after the FROM clause. It allows you to sort the result set based on one or more columns in ascending or descending order.</p>
<p>In this syntax, you place the column name by which you want to sort after the ORDER BY clause followed by the ASC or DESC keyword.</p>
<ul>
<li>The ASC keyword means ascending.</li>
<li>And the DESC keyword means descending.</li>
</ul>
<p><strong>NOTE:</strong>
If you don’t specify the ASC or DESC keyword, SQLite sorts the result set using the ASC option. In other words, it sorts the result set in the ascending order by default.</p>
<p>In case you want to sort the result set by multiple columns, you use a comma (,) to separate two columns. The ORDER BY clause sorts rows using columns or expressions from left to right. In other words, the ORDER BY clause sorts the rows using the first column in the list. Then, it sorts the sorted rows using the second column, and so on.</p>
<p>You can sort the result set using a column that does not appear in the select list of the SELECT clause.</p>
<h4 id=sqlite-order-by-clause-example>SQLite ORDER BY clause example</h4>
<p>Let’s take the tracks table in the sample database for the demonstration.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png title=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png></p>
<p>Suppose, you want to get data from name, milliseconds, and album id columns, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>milliseconds</span><span class=p>,</span><span class=w> 
</span><span class=w>        </span><span class=n>albumid</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/tracks-table-data-without-sorting.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/tracks-table-data-without-sorting.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/tracks-table-data-without-sorting.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/tracks-table-data-without-sorting.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/tracks-table-data-without-sorting.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/tracks-table-data-without-sorting.jpg></p>
<p>The SELECT statement that does not use ORDER BY clause returns a result set that is not in any order.</p>
<p>Suppose you want to sort the result set based on AlbumId column in ascending order, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>milliseconds</span><span class=p>,</span><span class=w> 
</span><span class=w>	</span><span class=n>albumid</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>albumid</span><span class=w> </span><span class=k>ASC</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-example.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-example.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-example.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-example.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-example.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-example.jpg></p>
<p>The result set now is sorted by the AlbumId column in ascending order as shown in the screenshot.</p>
<p>SQLite uses ASC by default so you can omit it in the above statement as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>milliseconds</span><span class=p>,</span><span class=w> 
</span><span class=w>	</span><span class=n>albumid</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>albumid</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Suppose you want to sort the sorted result (by AlbumId) above by the Milliseconds column in descending order. In this case, you need to add the Milliseconds column to the ORDER BY clause as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>milliseconds</span><span class=p>,</span><span class=w> 
</span><span class=w>	</span><span class=n>albumid</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>albumid</span><span class=w> </span><span class=k>ASC</span><span class=p>,</span><span class=w>
</span><span class=w>        </span><span class=n>milliseconds</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-multiple-columns-example.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-multiple-columns-example.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-multiple-columns-example.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-multiple-columns-example.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-multiple-columns-example.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-multiple-columns-example.jpg></p>
<p>SQLite sorts rows by AlbumId column in ascending order first. Then, it sorts the sorted result set by the Milliseconds column in descending order.</p>
<p>If you look at the tracks of the album with AlbumId 1, you find that the order of tracks changes between the two statements.</p>
<h4 id=sqlite-order-by-with-the-column-position>SQLite ORDER BY with the column position</h4>
<p>Instead of specifying the names of columns, you can use the column’s position in the ORDER BY clause.</p>
<p>For example, the following statement sorts the tracks by both albumid (3rd column) and milliseconds (2nd column) in ascending order.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>milliseconds</span><span class=p>,</span><span class=w> 
</span><span class=w>	</span><span class=n>albumid</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	 </span><span class=mi>3</span><span class=p>,</span><span class=mi>2</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The number 3 and 2 refers to the AlbumId and Milliseconds in the column list that appears in the SELECT clause.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-multiple-columns-by-positions.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-multiple-columns-by-positions.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-multiple-columns-by-positions.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-multiple-columns-by-positions.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-multiple-columns-by-positions.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-ORDER-BY-multiple-columns-by-positions.jpg></p>
<h4 id=sorting-nulls>Sorting NULLs</h4>
<p>In the database world, NULL is special. It denotes that the information missing or the data is not applicable.</p>
<p>Suppose you want to store the birthday of an artist in a table. At the time of saving the artist’s record, you don’t have the birthday information.</p>
<p>To represent the unknown birthday information in the database, you may use a special date like 01.01.1900 or an '' empty string. However, both of these values do not clearly show that the birthday is unknown.</p>
<p>NULL was invented to resolve this issue. Instead of using a special value to indicate that the information is missing, NULL is used.</p>
<p>NULL is special because you cannot compare it with another value. Simply put, if the two pieces of information are unknown, you cannot compare them.</p>
<p>NULL is even cannot be compared with itself; NULL is not equal to itself so NULL = NULL always results in false.</p>
<p>When it comes to sorting, SQLite considers NULL to be smaller than any other value.</p>
<p>It means that NULLs will appear at the beginning of the result set if you use ASC or at the end of the result set when you use DESC.</p>
<p>SQLite 3.30.0 added the NULLS FIRST and NULLS LAST options to the ORDER BY clause. The NULLS FIRST option specifies that the NULLs will appear at the beginning of the result set while the NULLS LAST option place NULLs at the end of the result set.</p>
<p>The following example uses the ORDER BY clause to sort tracks by composers:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> 
</span><span class=w>    </span><span class=n>TrackId</span><span class=p>,</span><span class=w> 
</span><span class=w>    </span><span class=n>Name</span><span class=p>,</span><span class=w> 
</span><span class=w>    </span><span class=n>Composer</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> 
</span><span class=w>   </span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> 
</span><span class=w>   </span><span class=n>Composer</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>First, you see that NULLs appear at the beginning of the result set because SQLite treats them as the lowest values. When you scroll down the result, you will see other values:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2020/03/SQLite-ORDER-BY-NULLS-FIRST.png data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2020/03/SQLite-ORDER-BY-NULLS-FIRST.png, https://cdn.sqlitetutorial.net/wp-content/uploads/2020/03/SQLite-ORDER-BY-NULLS-FIRST.png 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2020/03/SQLite-ORDER-BY-NULLS-FIRST.png 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2020/03/SQLite-ORDER-BY-NULLS-FIRST.png title=https://cdn.sqlitetutorial.net/wp-content/uploads/2020/03/SQLite-ORDER-BY-NULLS-FIRST.png></p>
<p>The following example uses the NULLS LAST option to place NULLs after other values:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> 
</span><span class=w>    </span><span class=n>TrackId</span><span class=p>,</span><span class=w> 
</span><span class=w>    </span><span class=n>Name</span><span class=p>,</span><span class=w> 
</span><span class=w>    </span><span class=n>Composer</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> 
</span><span class=w>    </span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> 
</span><span class=w>    </span><span class=n>Composer</span><span class=w> </span><span class=n>NULLS</span><span class=w> </span><span class=k>LAST</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>If you scroll down the output, you will see that NULLs are placed at the end of the result set:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2020/03/SQLite-ORDER-BY-NULLS-LAST.png data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2020/03/SQLite-ORDER-BY-NULLS-LAST.png, https://cdn.sqlitetutorial.net/wp-content/uploads/2020/03/SQLite-ORDER-BY-NULLS-LAST.png 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2020/03/SQLite-ORDER-BY-NULLS-LAST.png 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2020/03/SQLite-ORDER-BY-NULLS-LAST.png title=https://cdn.sqlitetutorial.net/wp-content/uploads/2020/03/SQLite-ORDER-BY-NULLS-LAST.png></p>
<h3 id=section-3-filtering-data>Section 3. Filtering data</h3>
<h4 id=select-distinct--query-unique-rows-from-a-table-using-the-distinct-clause>Select Distinct – query unique rows from a table using the DISTINCT clause.</h4>
<h5 id=introduction-to-sqlite-select-distinct-clause>Introduction to SQLite SELECT DISTINCT clause</h5>
<p>The DISTINCT clause is an optional clause of the SELECT statement. The DISTINCT clause allows you to remove the duplicate rows in the result set.</p>
<p>The following statement illustrates the syntax of the DISTINCT clause:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=k>DISTINCT</span><span class=w>	</span><span class=n>select_list</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=k>table</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this syntax:</p>
<ul>
<li>First, the DISTINCT clause must appear immediately after the SELECT keyword.</li>
<li>Second, you place a column or a list of columns after the DISTINCT keyword. If you use one column, SQLite uses values in that column to evaluate the duplicate. In case you use multiple columns, SQLite uses the combination of values in these columns to evaluate the duplicate.</li>
</ul>
<p>SQLite considers NULL values as duplicates. If you use theDISTINCT clause with a column that has NULL values, SQLite will keep one row of a NULL value.</p>
<p>In database theory, if a column contains NULL values, it means that we do not have the information about that column of particular records or the information is not applicable.</p>
<p>For example, if a customer has a phone number with a NULL value, it means we don’t have information about the phone number of the customer at the time of recording customer information or the customer may not have a phone number at all.</p>
<h5 id=sqlite-select-distinct-examples>SQLite SELECT DISTINCT examples</h5>
<p>We will use the customers table in the sample database for demonstration.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/customers.png data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/customers.png, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/customers.png 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/customers.png 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/customers.png title=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/customers.png></p>
<p>Suppose you want to know the cities where the customers locate, you can use the SELECT statement to get data from the city column of the customers table as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT city
</span><span class=go>FROM customers
</span><span class=go>ORDER BY city;
</span><span class=go>City               
</span><span class=go>-------------------
</span><span class=go>Amsterdam          
</span><span class=go>Bangalore          
</span><span class=go>Berlin             
</span><span class=go>Berlin             
</span><span class=go>Bordeaux           
</span><span class=go>Boston             
</span><span class=go>Brasília           
</span><span class=go>Brussels           
</span><span class=go>Budapest           
</span><span class=go>Buenos Aires       
</span><span class=go>Chicago            
</span><span class=go>Copenhagen         
</span><span class=go>Cupertino          
</span><span class=go>Delhi              
</span><span class=go>...
</span></code></pre></td></tr></table>
</div>
</div><p>It returns 59 rows. There are few duplicate rows such as Berlin London, and Mountain View To remove these duplicate rows, you use the DISTINCT clause as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=k>DISTINCT</span><span class=w> </span><span class=n>city</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>customers</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>city</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>It returns 53 rows because the DISTINCT clause has removed 6 duplicate rows.</p>
<h5 id=sqlite-select-distinct-on-multiple-columns>SQLite SELECT DISTINCT on multiple columns</h5>
<p>The following statement finds cities and countries of all customers.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT
</span><span class=go>        city,
</span><span class=go>        country
</span><span class=go>FROM
</span><span class=go>        customers
</span><span class=go>ORDER BY
</span><span class=go>        country;
</span><span class=go>City                 Country       
</span><span class=go>-------------------  --------------
</span><span class=go>Buenos Aires         Argentina     
</span><span class=go>Sidney               Australia     
</span><span class=go>Vienne               Austria       
</span><span class=go>Brussels             Belgium       
</span><span class=go>São José dos Campos  Brazil        
</span><span class=go>São Paulo            Brazil        
</span><span class=go>São Paulo            Brazil        
</span><span class=go>Rio de Janeiro       Brazil        
</span><span class=go>...
</span></code></pre></td></tr></table>
</div>
</div><p>The result set contains duplicate city and country e.g., Sao Paulo in Brazil as shown in the screenshot above.</p>
<p>To remove duplicate the city and country, you apply the DISTINCT clause to both city and country columns as shown in the following query:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT  DISTINCT
</span><span class=go>        city,
</span><span class=go>        country
</span><span class=go>FROM
</span><span class=go>        customers
</span><span class=go>ORDER BY
</span><span class=go>        country;
</span><span class=go>City                 Country       
</span><span class=go>-------------------  --------------
</span><span class=go>Buenos Aires         Argentina     
</span><span class=go>Sidney               Australia     
</span><span class=go>Vienne               Austria       
</span><span class=go>Brussels             Belgium       
</span><span class=go>São José dos Campos  Brazil        
</span><span class=go>São Paulo            Brazil        
</span><span class=go>Rio de Janeiro       Brazil        
</span><span class=go>Brasília             Brazil        
</span><span class=go>Montréal             Canada        
</span><span class=go>...
</span></code></pre></td></tr></table>
</div>
</div><p>As mentioned earlier, SQLite uses the combination of city and country to evaluate the duplicate.</p>
<h5 id=sqlite-select-distinct-with-null-example>SQLite SELECT DISTINCT with NULL example</h5>
<p>This statement returns the names of companies of customers from the customers table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT company
</span><span class=go>FROM customers;
</span><span class=go>Company                                         
</span><span class=go>------------------------------------------------
</span><span class=go>Embraer - Empresa Brasileira de Aeronáutica S.A.
</span><span class=go>                                                
</span><span class=go>                                                
</span><span class=go>                                                
</span><span class=go>JetBrains s.r.o.                                
</span><span class=go>                                                
</span><span class=go>                                                
</span><span class=go>                                                
</span><span class=go>                                                
</span><span class=go>Woodstock Discos                                
</span><span class=go>Banco do Brasil S.A.                            
</span><span class=go>Riotur                                          
</span><span class=go>                                                
</span><span class=go>Telus                                           
</span><span class=go>Rogers Canada                                   
</span><span class=go>Google Inc.                                     
</span><span class=go>Microsoft Corporation                           
</span><span class=go>                                                
</span><span class=go>Apple Inc.                                      
</span><span class=go>...
</span></code></pre></td></tr></table>
</div>
</div><p>It returns 59 rows with many NULL values.</p>
<p>Now, if you apply the DISTINCT clause to the statement, it will keep only one row with a NULL value.</p>
<p>See the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT DISTINCT company
</span><span class=go>FROM customers;
</span><span class=go>Company                                         
</span><span class=go>------------------------------------------------
</span><span class=go>Embraer - Empresa Brasileira de Aeronáutica S.A.
</span><span class=go>                                                
</span><span class=go>JetBrains s.r.o.                                
</span><span class=go>Woodstock Discos                                
</span><span class=go>Banco do Brasil S.A.                            
</span><span class=go>Riotur                                          
</span><span class=go>Telus                                           
</span><span class=go>Rogers Canada                                   
</span><span class=go>Google Inc.                                     
</span><span class=go>Microsoft Corporation                           
</span><span class=go>Apple Inc.                                      
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>The statement returns 11 rows with one NULL value.</p>
<p>Note that if you select a list of columns from a table and want to get a unique combination of some columns, you can use the GROUP BY clause.</p>
<h4 id=where---filter-rows-of-a-result-set-using-various-conditions>Where – filter rows of a result set using various conditions.</h4>
<h5 id=introduction-to-sqlite-where-clause>Introduction to SQLite WHERE clause</h5>
<p>The WHERE clause is an optional clause of the SELECT statement. It appears after the FROM clause as the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>column_list</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=k>table</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>search_condition</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this example, you add a WHERE clause to the SELECT statement to filter rows returned by the query. When evaluating a SELECT statement with a WHERE clause, SQLite uses the following steps:</p>
<ul>
<li>First, check the table in the FROM clause.</li>
<li>Second, evaluate the conditions in the WHERE clause to get the rows that met these conditions.</li>
<li>Third, make the final result set based on the rows in the previous step with columns in the SELECT clause.</li>
</ul>
<p>The search condition in the WHERE has the following form:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>left_expression COMPARISON_OPERATOR right_expression
</code></pre></td></tr></table>
</div>
</div><p>For example, you can form a search condition as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>WHERE</span><span class=w> </span><span class=n>column_1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>100</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>column_2</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>column_3</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;An%&#39;</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>column_4</span><span class=w> </span><span class=k>BETWEEN</span><span class=w> </span><span class=mi>10</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=mi>20</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Besides the SELECT statement, you can use the WHERE clause in the UPDATE and DELETE statements.</p>
<h5 id=sqlite-comparison-operators>SQLite comparison operators</h5>
<p>A comparison operator tests if two expressions are the same. The following table illustrates the comparison operators that you can use to construct expressions:</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>Equal to</td>
</tr>
<tr>
<td>&lt;> or !=</td>
<td>Not equal to</td>
</tr>
<tr>
<td>&lt;</td>
<td>Less than</td>
</tr>
<tr>
<td>></td>
<td>Greater than</td>
</tr>
<tr>
<td>&lt;=</td>
<td>Less than or equal to</td>
</tr>
<tr>
<td>>=</td>
<td>Greater than or equal to</td>
</tr>
</tbody>
</table>
<h5 id=sqlite-logical-operators>SQLite logical operators</h5>
<p>Logical operators allow you to test the truth of some expressions. A logical operator returns 1, 0, or a NULL value.</p>
<p>Notice that SQLite does not provide Boolean data type therefore 1 means TRUE, and 0 means FALSE.</p>
<p>The following table illustrates the SQLite logical operators:</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>ALL</td>
<td>returns 1 if all expressions are 1.</td>
</tr>
<tr>
<td>AND</td>
<td>returns 1 if both expressions are 1, and 0 if one of the expressions is 0.</td>
</tr>
<tr>
<td>ANY</td>
<td>returns 1 if any one of a set of comparisons is 1.</td>
</tr>
<tr>
<td>BETWEEN</td>
<td>returns 1 if a value is within a range.</td>
</tr>
<tr>
<td>EXISTS</td>
<td>returns 1 if a subquery contains any rows.</td>
</tr>
<tr>
<td>IN</td>
<td>returns 1 if a value is in a list of values.</td>
</tr>
<tr>
<td>LIKE</td>
<td>returns 1 if a value matches a pattern</td>
</tr>
<tr>
<td>NOT</td>
<td>reverses the value of other operators such as NOT EXISTS, NOT IN, NOT BETWEEN, etc.</td>
</tr>
<tr>
<td>OR</td>
<td>returns true if either expression is 1</td>
</tr>
</tbody>
</table>
<h5 id=sqlite-where-clause-examples>SQLite WHERE clause examples</h5>
<p>We will use the tracks table in the sample database to illustrate how to use the WHERE clause.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png title=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png></p>
<p>The equality operator (=) is the most commonly used operator. For example, the following query uses the WHERE clause the equality operator to find all the tracks in the album id 1:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT
</span><span class=go>   name,
</span><span class=go>   milliseconds,
</span><span class=go>   bytes,
</span><span class=go>   albumid
</span><span class=go>FROM
</span><span class=go>   tracks
</span><span class=go>WHERE
</span><span class=go>   albumid = 1;
</span><span class=go>Name                                     Milliseconds  Bytes     AlbumId
</span><span class=go>---------------------------------------  ------------  --------  -------
</span><span class=go>For Those About To Rock (We Salute You)  343719        11170334  1      
</span><span class=go>Put The Finger On You                    205662        6713451   1      
</span><span class=go>Let&#39;s Get It Up                          233926        7636561   1      
</span><span class=go>Inject The Venom                         210834        6852860   1      
</span><span class=go>Snowballed                               203102        6599424   1      
</span><span class=go>Evil Walks                               263497        8611245   1      
</span><span class=go>C.O.D.                                   199836        6566314   1      
</span><span class=go>Breaking The Rules                       263288        8596840   1      
</span><span class=go>Night Of The Long Knives                 205688        6706347   1      
</span><span class=go>Spellbound                               270863        8817038   1      
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>SQLite compares the values stored in the AlbumId column with a literal value 1 to test if they are equal. Only the rows that satisfy the condition are returned.</p>
<p>When you compare two values, you must ensure that they are the same data type. You should compare numbers with numbers, string with strings, etc.</p>
<p>In case you compare values in different data types e.g., a string with a number, SQLite has to perform implicit data type conversions, but in general, you should avoid doing this.</p>
<p>You use the logical operator to combine expressions. For example, to get tracks of the album 1 that have the length greater than 200,000 milliseconds, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT            
</span><span class=go>        name,
</span><span class=go>        milliseconds,
</span><span class=go>        bytes,
</span><span class=go>        albumid
</span><span class=go>FROM
</span><span class=go>        tracks
</span><span class=go>WHERE
</span><span class=go>        albumid = 1
</span><span class=go>AND milliseconds &gt; 250000;
</span><span class=go>Name                                     Milliseconds  Bytes     AlbumId
</span><span class=go>---------------------------------------  ------------  --------  -------
</span><span class=go>For Those About To Rock (We Salute You)  343719        11170334  1      
</span><span class=go>Evil Walks                               263497        8611245   1      
</span><span class=go>Breaking The Rules                       263288        8596840   1      
</span><span class=go>Spellbound                               270863        8817038   1      
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>The statement used two expressions albumid = 1 and milliseconds > 250000. It uses the AND logical operator to combine these expressions.</p>
<h5 id=sqlite-where-clause-with-like-operator-example>SQLite WHERE clause with LIKE operator example</h5>
<p>Sometimes, you may not remember exactly the data that you want to search. In this case, you perform an inexact search using the LIKE operator.</p>
<p>For example, to find which tracks composed by Smith, you use the LIKE operator as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>albumid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>composer</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>composer</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;%Smith%&#39;</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>albumid</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-WHERE-with-LIKE-operator.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-WHERE-with-LIKE-operator.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-WHERE-with-LIKE-operator.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-WHERE-with-LIKE-operator.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-WHERE-with-LIKE-operator.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-WHERE-with-LIKE-operator.jpg></p>
<p>You get tracks composed by R.A. Smith-Diesel, Adrian Smith, etc.</p>
<h5 id=sqlite-where-clause-with-the-in-operator-example>SQLite WHERE clause with the IN operator example</h5>
<p>The IN operator allows you to check whether a value is in a list of a comma-separated list of values. For example, to find tracks that have media type id is 2 or 3, you use the IN operator as shown in the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>albumid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>mediatypeid</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>mediatypeid</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-WHERE-with-IN-operator.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-WHERE-with-IN-operator.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-WHERE-with-IN-operator.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-WHERE-with-IN-operator.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-WHERE-with-IN-operator.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/SQLite-WHERE-with-IN-operator.jpg></p>
<h4 id=limit--constrain-the-number-of-rows-returned-by-a-query-and-how-to-get-only-the-necessary-data-from-a-table>Limit – constrain the number of rows returned by a query and how to get only the necessary data from a table.</h4>
<h5 id=introduction-to-sqlite-limit-clause>Introduction to SQLite LIMIT clause</h5>
<p>The LIMIT clause is an optional part of the SELECT statement. You use the LIMIT clause to constrain the number of rows returned by the query.</p>
<p>For example, a SELECT statement may return one million rows. However, if you just need the first 10 rows in the result set, you can add the LIMIT clause to the SELECT statement to retrieve 10 rows.</p>
<p>The following illustrates the syntax of the LIMIT clause.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>column_list</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=k>table</span><span class=w>
</span><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=k>row_count</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The row_count is a positive integer that specifies the number of rows returned.</p>
<p>For example, to get the first 10 rows in the tracks table, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT
</span><span class=go>        trackId,
</span><span class=go>        name
</span><span class=go>FROM
</span><span class=go>        tracks
</span><span class=go>LIMIT 10;
</span><span class=go>TrackId  Name                                   
</span><span class=go>-------  ---------------------------------------
</span><span class=go>1        For Those About To Rock (We Salute You)
</span><span class=go>2        Balls to the Wall                      
</span><span class=go>3        Fast As a Shark                        
</span><span class=go>4        Restless and Wild                      
</span><span class=go>5        Princess of the Dawn                   
</span><span class=go>6        Put The Finger On You                  
</span><span class=go>7        Let&#39;s Get It Up                        
</span><span class=go>8        Inject The Venom                       
</span><span class=go>9        Snowballed                             
</span><span class=go>10       Evil Walks                             
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>If you want to get the first 10 rows starting from the 10th row of the result set, you use OFFSET keyword as the following:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>column_list</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=k>table</span><span class=w>
</span><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=k>row_count</span><span class=w> </span><span class=k>OFFSET</span><span class=w> </span><span class=k>offset</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Or you can use the following shorthand syntax of the LIMIT OFFSET clause:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>column_list</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=k>table</span><span class=w>
</span><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=k>offset</span><span class=p>,</span><span class=w> </span><span class=k>row_count</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>For example, to get 10 rows starting from the 11th row in the tracks table, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT     
</span><span class=go>        trackId,
</span><span class=go>        name
</span><span class=go>FROM
</span><span class=go>        tracks
</span><span class=go>LIMIT 10 OFFSET 10;
</span><span class=go>TrackId  Name                    
</span><span class=go>-------  ------------------------
</span><span class=go>11       C.O.D.                  
</span><span class=go>12       Breaking The Rules      
</span><span class=go>13       Night Of The Long Knives
</span><span class=go>14       Spellbound              
</span><span class=go>15       Go Down                 
</span><span class=go>16       Dog Eat Dog             
</span><span class=go>17       Let There Be Rock       
</span><span class=go>18       Bad Boy Boogie          
</span><span class=go>19       Problem Child           
</span><span class=go>20       Overdose                
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>You often find the uses of OFFSET in web applications for paginating result sets.</p>
<h5 id=sqlite-limit-and-order-by-clause>SQLite LIMIT and ORDER BY clause</h5>
<p>You should always use the LIMIT clause with the ORDER BY clause. Because you want to get a number of rows in a specified order, not in an unspecified order.</p>
<p>The ORDER BY clause appears before the LIMIT clause in the SELECT statement. SQLite sorts the result set before getting the number of rows specified in the LIMIT clause.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>   </span><span class=n>column_list</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>   </span><span class=k>table</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>column_1</span><span class=w>
</span><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=k>row_count</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>For example, to get the top 10 biggest tracks by size, you use the following query:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT
</span><span class=go>        trackid,
</span><span class=go>        name,
</span><span class=go>        bytes
</span><span class=go>FROM
</span><span class=go>        tracks
</span><span class=go>ORDER BY
</span><span class=go>        bytes DESC
</span><span class=go>LIMIT 10;
</span><span class=go>TrackId  Name                         Bytes     
</span><span class=go>-------  ---------------------------  ----------
</span><span class=go>3224     Through a Looking Glass      1059546140
</span><span class=go>2820     Occupation / Precipice       1054423946
</span><span class=go>3236     The Young Lords              587051735 
</span><span class=go>3242     The Man With Nine Lives      577829804 
</span><span class=go>2910     Dave                         574325829 
</span><span class=go>3235     The Magnificent Warriors     570152232 
</span><span class=go>3231     The Lost Warrior             558872190 
</span><span class=go>2902     Maternity Leave              555244214 
</span><span class=go>3228     Battlestar Galactica, Pt. 3  554509033 
</span><span class=go>2832     The Woman King               552893447 
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>To get the 5 shortest tracks, you sort the tracks by the length specified by milliseconds column using ORDER BY clause and get the first 5 rows using LIMIT clause.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT
</span><span class=go>        trackid,
</span><span class=go>        name,
</span><span class=go>        milliseconds
</span><span class=go>FROM
</span><span class=go>        tracks
</span><span class=go>ORDER BY
</span><span class=go>        milliseconds ASC
</span><span class=go>LIMIT 5;
</span><span class=go>TrackId  Name                      Milliseconds
</span><span class=go>-------  ------------------------  ------------
</span><span class=go>2461     É Uma Partida De Futebol  1071        
</span><span class=go>168      Now Sports                4884        
</span><span class=go>170      A Statistic               6373        
</span><span class=go>178      Oprah                     6635        
</span><span class=go>3304     Commercial 1              7941        
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><h5 id=getting-the-nth-highest-and-the-lowest-value>Getting the nth highest and the lowest value</h5>
<p>You can use the ORDER BY and LIMIT clauses to get the nth highest or lowest value rows. For example, you may want to know the second-longest track, the third smallest track, etc.</p>
<p>To do this, you use the following steps:</p>
<ol>
<li>First, use ORDER BY to sort the result set in ascending order in case you want to get the nth lowest value, or descending order if you want to get the nth highest value.</li>
<li>Second, use the LIMIT OFFSET clause to get the nth highest or the nth lowest row.</li>
</ol>
<p>The following statement returns the second-longest track in the tracks table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT
</span><span class=go>        trackid,
</span><span class=go>        name,
</span><span class=go>        milliseconds
</span><span class=go>FROM
</span><span class=go>        tracks
</span><span class=go>ORDER BY
</span><span class=go>        milliseconds DESC
</span><span class=go>LIMIT 1 OFFSET 1;
</span><span class=go>TrackId  Name                     Milliseconds
</span><span class=go>-------  -----------------------  ------------
</span><span class=go>3224     Through a Looking Glass  5088838     
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>The following statement gets the third smallest track on the tracks table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT
</span><span class=go>        trackid,
</span><span class=go>        name,
</span><span class=go>        bytes
</span><span class=go>FROM
</span><span class=go>        tracks
</span><span class=go>ORDER BY
</span><span class=go>        bytes
</span><span class=go>LIMIT 1 OFFSET 2;
</span><span class=go>TrackId  Name         Bytes 
</span><span class=go>-------  -----------  ------
</span><span class=go>170      A Statistic  211997
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><h4 id=between--test-whether-a-value-is-in-a-range-of-values>Between – test whether a value is in a range of values.</h4>
<h5 id=ntroduction-to-sqlite-between-operator>ntroduction to SQLite BETWEEN Operator</h5>
<p>The BETWEEN operator is a logical operator that tests whether a value is in range of values. If the value is in the specified range, the BETWEEN operator returns true. The BETWEEN operator can be used in the WHERE clause of the SELECT, DELETE, UPDATE, and REPLACE statements.</p>
<p>The following illustrates the syntax of the SQLite BETWEEN operator:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>test_expression BETWEEN low_expression AND high_expression
</code></pre></td></tr></table>
</div>
</div><p>In this syntax:</p>
<ul>
<li>test_expression is an expression to test for in the range defined by low_expression and high_expression.</li>
<li>low_expression and high_expression is any valid expression that specify the low and high values of the range. The low_expression should be less than or equal to high_expression, or the BETWEEN is always returns false.</li>
<li>The AND keyword is a placeholder which indicates the test_expression should be within the range specified by low_expression and high_expression.</li>
</ul>
<p><strong>Note</strong> that the BETWEEN operator is inclusive. It returns true when the test_expression is less than or equal to high_expression and greater than or equal to the value of low_expression:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>test_expression &gt;<span class=o>=</span> low_expression AND test_expression &lt;<span class=o>=</span> high_expression
</code></pre></td></tr></table>
</div>
</div><p>To specify an exclusive range, you use the greater than (>) and less than operators (&lt;).</p>
<p>Note that if any input to the BETWEEN operator is NULL, the result is NULL, or unknown to be precise.</p>
<p>To negate the result of the BETWEEN operator, you use the NOT BETWEEN operator as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>test_expression NOT BETWEEN low_expression AND high_expression
</code></pre></td></tr></table>
</div>
</div><p>The NOT BETWEEN returns true if the value of test_expression is less than the value of low_expression or greater than the value of high_expression:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>test_expression &lt; low_expression OR test_expression &gt; high_expression
</code></pre></td></tr></table>
</div>
</div><h5 id=sqlite-between-operator-examples>SQLite BETWEEN operator examples</h5>
<p>We will use the invoices table from the sample database for the demonstration:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/invoices.png data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/invoices.png, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/invoices.png 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/invoices.png 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/invoices.png title=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/invoices.png></p>
<h6 id=sqlite-between-numeric-values-example>SQLite BETWEEN numeric values example</h6>
<p>The following statement finds invoices whose total is between 14.96 and 18.86:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT
</span><span class=go>    InvoiceId,
</span><span class=go>    BillingAddress,
</span><span class=go>    Total
</span><span class=go>FROM
</span><span class=go>    invoices
</span><span class=go>WHERE
</span><span class=go>    Total BETWEEN 14.91 and 18.86    
</span><span class=go>ORDER BY
</span><span class=go>    Total;
</span><span class=go>InvoiceId  BillingAddress                        Total
</span><span class=go>---------  ------------------------------------  -----
</span><span class=go>193        Berger Straße 10                      14.91
</span><span class=go>103        162 E Superior Street                 15.86
</span><span class=go>208        Ullevålsveien 14                      15.86
</span><span class=go>306        Klanova 9/506                         16.86
</span><span class=go>313        68, Rue Jouvence                      16.86
</span><span class=go>88         Calle Lira, 198                       17.91
</span><span class=go>89         Rotenturmstraße 4, 1010 Innere Stadt  18.86
</span><span class=go>201        319 N. Frances Street                 18.86
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>As you can see, the invoices whose total is 14.91 or 18.86 are included in the result set.</p>
<h6 id=sqlite-not-between-numeric-values-example>SQLite NOT BETWEEN numeric values example</h6>
<p>To find the invoices whose total are not between 1 and 20, you use the NOT BETWEEN operator as shown in the following query:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT
</span><span class=go>    InvoiceId,
</span><span class=go>    BillingAddress,
</span><span class=go>    Total
</span><span class=go>FROM
</span><span class=go>    invoices
</span><span class=go>WHERE
</span><span class=go>    Total NOT BETWEEN 1 and 20
</span><span class=go>ORDER BY
</span><span class=go>    Total;
</span><span class=go>InvoiceId  BillingAddress                            Total
</span><span class=go>---------  ----------------------------------------  -----
</span><span class=go>6          Berger Straße 10                          0.99 
</span><span class=go>13         1600 Amphitheatre Parkway                 0.99 
</span><span class=go>20         110 Raeburn Pl                            0.99 
</span><span class=go>27         5112 48 Street                            0.99 
</span><span class=go>34         Praça Pio X, 119                          0.99 
</span><span class=go>41         C/ San Bernardo 85                        0.99 
</span><span class=go>48         796 Dundas Street West                    0.99 
</span><span class=go>55         Grétrystraat 63                           0.99 
</span><span class=go>62         3 Chatham Street                          0.99 
</span><span class=go>69         319 N. Frances Street                     0.99 
</span><span class=go>76         Ullevålsveien 14                          0.99 
</span><span class=go>83         9, Place Louis Barthou                    0.99 
</span><span class=go>90         801 W 4th Street                          0.99 
</span><span class=go>104        Barbarossastraße 19                       0.99 
</span><span class=go>111        1 Microsoft Way                           0.99 
</span><span class=go>...
</span></code></pre></td></tr></table>
</div>
</div><p>As clearly shown in the output, the result includes the invoices whose total is less than 1 and greater than 20.</p>
<h6 id=sqlite-between-dates-example>SQLite BETWEEN dates example</h6>
<p>The following example finds invoices whose invoice dates are from January 1 2010 and January 31 2010:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT
</span><span class=go>    InvoiceId,
</span><span class=go>    BillingAddress,
</span><span class=go>    InvoiceDate,
</span><span class=go>    Total
</span><span class=go>FROM
</span><span class=go>    invoices
</span><span class=go>WHERE
</span><span class=go>    InvoiceDate BETWEEN &#39;2010-01-01&#39; AND &#39;2010-01-31&#39;
</span><span class=go>ORDER BY
</span><span class=go>    InvoiceDate;
</span><span class=go>InvoiceId  BillingAddress                        InvoiceDate          Total
</span><span class=go>---------  ------------------------------------  -------------------  -----
</span><span class=go>84         68, Rue Jouvence                      2010-01-08 00:00:00  1.98 
</span><span class=go>85         Erzsébet krt. 58.                     2010-01-08 00:00:00  1.98 
</span><span class=go>86         Via Degli Scipioni, 43                2010-01-09 00:00:00  3.96 
</span><span class=go>87         Celsiusg. 9                           2010-01-10 00:00:00  6.94 
</span><span class=go>88         Calle Lira, 198                       2010-01-13 00:00:00  17.91
</span><span class=go>89         Rotenturmstraße 4, 1010 Innere Stadt  2010-01-18 00:00:00  18.86
</span><span class=go>90         801 W 4th Street                      2010-01-26 00:00:00  0.99 
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><h6 id=sqlite-not-between-dates-example>SQLite NOT BETWEEN dates example</h6>
<p>The following statement finds invoices whose dates are not between January 03, 2009, and December 01, 2013:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT
</span><span class=go>    InvoiceId,
</span><span class=go>    BillingAddress,
</span><span class=go>    date(InvoiceDate) InvoiceDate,
</span><span class=go>    Total
</span><span class=go>FROM
</span><span class=go>    invoices
</span><span class=go>WHERE
</span><span class=go>    InvoiceDate NOT BETWEEN &#39;2009-01-03&#39; AND &#39;2013-12-01&#39;
</span><span class=go>ORDER BY
</span><span class=go>    InvoiceDate;
</span><span class=go>InvoiceId  BillingAddress                            InvoiceDate  Total
</span><span class=go>---------  ----------------------------------------  -----------  -----
</span><span class=go>1          Theodor-Heuss-Straße 34                   2009-01-01   1.98 
</span><span class=go>2          Ullevålsveien 14                          2009-01-02   3.96 
</span><span class=go>406        801 W 4th Street                          2013-12-04   1.98 
</span><span class=go>407        69 Salem Street                           2013-12-04   1.98 
</span><span class=go>408        319 N. Frances Street                     2013-12-05   3.96 
</span><span class=go>409        796 Dundas Street West                    2013-12-06   5.94 
</span><span class=go>410        Rua dos Campeões Europeus de Viena, 4350  2013-12-09   8.91 
</span><span class=go>411        Porthaninkatu 9                           2013-12-14   13.86
</span><span class=go>412        12,Community Centre                       2013-12-22   1.99 
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><h4 id=in--check-if-a-value-matches-any-value-in-a-list-of-values-or-subquery>In – check if a value matches any value in a list of values or subquery.</h4>
<h5 id=introduction-to-the-sqlite-in-operator>Introduction to the SQLite IN operator</h5>
<p>The SQLite IN operator determines whether a value matches any value in a list or a subquery. The syntax of the IN operator is as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>expression <span class=o>[</span>NOT<span class=o>]</span> IN <span class=o>(</span>value_list<span class=p>|</span>subquery<span class=o>)</span><span class=p>;</span>
</code></pre></td></tr></table>
</div>
</div><p>The expression can be any valid expression or a column of a table.</p>
<p>A list of values is a fixed value list or a result set of a single column returned by a subquery. The returned type of expression and values in the list must be the same.</p>
<p>The IN operator returns true or false depending on whether the expression matches any value in a list of values or not. To negate the list of values, you use the NOT IN operator.</p>
<h5 id=sqlite-in-operator-examples>SQLite IN operator examples</h5>
<p>We will use the Tracks table from the sample database for the demonstration.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png title=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png></p>
<p>The following statement uses the IN operator to query the tracks whose media type id is 1 or 2.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>TrackId</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>Name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>Mediatypeid</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>Tracks</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>MediaTypeId</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>Name</span><span class=w> </span><span class=k>ASC</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-IN-Operator.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-IN-Operator.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-IN-Operator.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-IN-Operator.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-IN-Operator.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-IN-Operator.jpg></p>
<p>This query uses the OR operator instead of the IN operator to return the same result set as the above query:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>TrackId</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>Name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>MediaTypeId</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>Tracks</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>MediaTypeId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=n>MediaTypeId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>Name</span><span class=w> </span><span class=k>ASC</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>As you can see from the queries, using the IN operator is much shorter.</p>
<p>If you have a query that uses many OR operators, you can consider using the IN operator instead to make the query more readable.</p>
<h5 id=sqlite-in-operator-with-a-subquery-example>SQLite IN operator with a subquery example</h5>
<p>The following query returns a list of album id of the artist id 12:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT albumid
</span><span class=go>FROM albums
</span><span class=go>WHERE artistid = 12;
</span><span class=go>AlbumId
</span><span class=go>-------
</span><span class=go>16     
</span><span class=go>17     
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>To get the tracks that belong to the artist id 12, you can combine the IN operator with a subquery as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT albumid
</span><span class=go>FROM albums
</span><span class=go>WHERE artistid = 12;
</span><span class=go>AlbumId
</span><span class=go>-------
</span><span class=go>16     
</span><span class=go>17     
</span><span class=go>sqlite&gt; SELECT
</span><span class=go>        TrackId, 
</span><span class=go>        Name, 
</span><span class=go>        AlbumId
</span><span class=go>FROM
</span><span class=go>        Tracks
</span><span class=go>WHERE
</span><span class=go>        AlbumId IN (
</span><span class=go>                SELECT
</span><span class=go>                        AlbumId
</span><span class=go>                FROM
</span><span class=go>                        Albums
</span><span class=go>                WHERE
</span><span class=go>                        ArtistId = 12
</span><span class=go>        );
</span><span class=go>TrackId  Name                                    AlbumId
</span><span class=go>-------  --------------------------------------  -------
</span><span class=go>149      Black Sabbath                           16     
</span><span class=go>150      The Wizard                              16     
</span><span class=go>151      Behind The Wall Of Sleep                16     
</span><span class=go>152      N.I.B.                                  16     
</span><span class=go>153      Evil Woman                              16     
</span><span class=go>154      Sleeping Village                        16     
</span><span class=go>155      Warning                                 16     
</span><span class=go>156      Wheels Of Confusion / The Straightener  17     
</span><span class=go>157      Tomorrow&#39;s Dream                        17     
</span><span class=go>158      Changes                                 17     
</span><span class=go>159      FX                                      17     
</span><span class=go>160      Supernaut                               17     
</span><span class=go>161      Snowblind                               17     
</span><span class=go>162      Cornucopia                              17     
</span><span class=go>163      Laguna Sunrise                          17     
</span><span class=go>164      St. Vitus Dance                         17     
</span><span class=go>165      Under The Sun/Every Day Comes and Goes  17     
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>In this example:</p>
<ul>
<li>First, the subquery returns a list of album ids that belong to the artist id 12.</li>
<li>Then, the outer query return all tracks whose album id matches with the album id list returned by the subquery.</li>
</ul>
<h5 id=sqlite-not-in-examples>SQLite NOT IN examples</h5>
<p>The following statement returns a list of tracks whose genre id is not in a list of (1,2,3).</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>trackid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>genreid</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>genreid</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=like--query-data-based-on-pattern-matching-using-wildcard-characters-percent-sign--and-underscore-_>Like – query data based on pattern matching using wildcard characters: percent sign (%) and underscore (_).</h4>
<p>a</p>
<h5 id=introduction-to-sqlite-like-operator>Introduction to SQLite LIKE operator</h5>
<p>Sometimes, you don’t know exactly the complete keyword that you want to query. For example, you may know that your most favorite song contains the word,elevator but you don’t know exactly the name.</p>
<p>To query data based on partial information, you use the LIKE operator in the WHERE clause of the SELECT statement as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>column_list</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=k>table_name</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>column_1</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=n>pattern</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Note that you can also use the LIKE operator in the WHERE clause of other statements such as the DELETE and UPDATE.</p>
<p>SQLite provides two wildcards for constructing patterns. They are percent sign % and underscore _ :</p>
<ul>
<li>The percent sign % wildcard matches any sequence of zero or more characters.</li>
<li>The underscore _ wildcard matches any single character.</li>
</ul>
<h6 id=the-percent-sign--wildcard-examples>The percent sign % wildcard examples</h6>
<p>The s% pattern that uses the percent sign wildcard ( %) matches any string that starts with s e.g.,son and so.</p>
<p>The %er pattern matches any string that ends with er like peter, clever, etc.</p>
<p>And the %per% pattern matches any string that contains per such as percent and peeper.</p>
<h6 id=the-underscore-_-wildcard-examples>The underscore _ wildcard examples</h6>
<p>The h_nt pattern matches hunt, hint, etc. The __pple pattern matches topple, supple, tipple, etc.
Note that SQLite LIKE operator is case-insensitive. It means &ldquo;A&rdquo; LIKE &ldquo;a&rdquo; is true.</p>
<p>However, for Unicode characters that are not in the ASCII ranges, the LIKE operator is case sensitive e.g., &ldquo;Ä&rdquo; LIKE &ldquo;ä&rdquo; is false.
In case you want to make LIKE operator works case-sensitively, you need to use the following PRAGMA:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>PRAGMA <span class=nv>case_sensitive_like</span> <span class=o>=</span> true<span class=p>;</span>
</code></pre></td></tr></table>
</div>
</div><h5 id=sqlite-like-examples>SQLite LIKE examples</h5>
<p>We’ll use the table tracks in the sample database for the demonstration.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png title=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png></p>
<p>To find the tracks whose names start with the Wild literal string, you use the percent sign % wildcard at the end of the pattern.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT           
</span><span class=go>        trackid,
</span><span class=go>        name    
</span><span class=go>FROM
</span><span class=go>        tracks
</span><span class=go>WHERE
</span><span class=go>        name LIKE &#39;Wild%&#39;;
</span><span class=go>TrackId  Name            
</span><span class=go>-------  ----------------
</span><span class=go>1245     Wildest Dreams  
</span><span class=go>1973     Wild Side       
</span><span class=go>2627     Wild Hearted Son
</span><span class=go>2633     Wild Flower     
</span><span class=go>2944     Wild Honey      
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>To find the tracks whose names end with Wild word, you use % wildcard at the beginning of the pattern.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT           
</span><span class=go>        trackid,
</span><span class=go>        name
</span><span class=go>FROM
</span><span class=go>        tracks
</span><span class=go>WHERE
</span><span class=go>        name LIKE &#39;%Wild&#39;;
</span><span class=go>TrackId  Name             
</span><span class=go>-------  -----------------
</span><span class=go>4        Restless and Wild
</span><span class=go>32       Deuces Are Wild  
</span><span class=go>775      Call Of The Wild 
</span><span class=go>2697     I Go Wild        
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>To find the tracks whose names contain the Wild literal string, you use % wildcard at the beginning and end of the pattern:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT             
</span><span class=go>        trackid,
</span><span class=go>        name    
</span><span class=go>FROM
</span><span class=go>        tracks
</span><span class=go>WHERE
</span><span class=go>        name LIKE &#39;%Wild%&#39;;
</span><span class=go>TrackId  Name                             
</span><span class=go>-------  ---------------------------------
</span><span class=go>4        Restless and Wild                
</span><span class=go>32       Deuces Are Wild                  
</span><span class=go>775      Call Of The Wild                 
</span><span class=go>1245     Wildest Dreams                   
</span><span class=go>1869     Where The Wild Things Are        
</span><span class=go>1973     Wild Side                        
</span><span class=go>2312     Near Wild Heaven                 
</span><span class=go>2627     Wild Hearted Son                 
</span><span class=go>2633     Wild Flower                      
</span><span class=go>2697     I Go Wild                        
</span><span class=go>2930     Who&#39;s Gonna Ride Your Wild Horses
</span><span class=go>2944     Wild Honey                       
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>The following statement finds the tracks whose names contain: zero or more characters (%), followed by Br, followed by a character (_), followed by wn, and followed by zero or more characters ( %).</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT              
</span><span class=go>        trackid,
</span><span class=go>        name
</span><span class=go>FROM
</span><span class=go>        tracks
</span><span class=go>WHERE
</span><span class=go>        name LIKE &#39;%Br_wn%&#39;;
</span><span class=go>TrackId  Name                
</span><span class=go>-------  --------------------
</span><span class=go>1053     Bad, Bad Leroy Brown
</span><span class=go>1150     Mr. Brownstone      
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><h5 id=sqlite-like-with-escape-clause>SQLite LIKE with ESCAPE clause</h5>
<p>If the pattern that you want to match contains % or _, you must use an escape character in an optional ESCAPE clause as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>column_1 LIKE pattern ESCAPE expression<span class=p>;</span>
</code></pre></td></tr></table>
</div>
</div><p>When you specify the ESCAPE clause, the LIKE operator will evaluate the expression that follows the ESCAPE keyword to a string which consists of a single character, or an escape character.</p>
<p>Then you can use this escape character in the pattern to include literal percent sign (%) or underscore (_). The LIKE operator evaluates the percent sign (%) or underscore (_) that follows the escape character as a literal string, not a wildcard character.</p>
<p>Suppose you want to match the string 10% in a column of a table. However, SQLite interprets the percent symbol % as the wildcard character. Therefore, you need to escape this percent symbol % using an escape character:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>column_1 LIKE <span class=s1>&#39;%10\%%&#39;</span> ESCAPE <span class=s1>&#39;\&#39;</span><span class=p>;</span>
</code></pre></td></tr></table>
</div>
</div><p>In this expression, the LIKE operator interprets the first % and last % percent signs as wildcards and the second percent sign as a literal percent symbol.</p>
<p>Note that you can use other characters as the escape character e.g., /, @, $.</p>
<p>Consider the following example:</p>
<p>First, create a table t that has one column:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>t</span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=k>c</span><span class=w> </span><span class=nb>TEXT</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Next, insert some rows into the table t:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t</span><span class=p>(</span><span class=k>c</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;10% increase&#39;</span><span class=p>),</span><span class=w>
</span><span class=w>	</span><span class=p>(</span><span class=s1>&#39;10 times decrease&#39;</span><span class=p>),</span><span class=w>
</span><span class=w>	</span><span class=p>(</span><span class=s1>&#39;100% vs. last year&#39;</span><span class=p>),</span><span class=w>
</span><span class=w>	</span><span class=p>(</span><span class=s1>&#39;20% increase next year&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Then, query data from the t table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT * FROM t;
</span><span class=go>c                     
</span><span class=go>----------------------
</span><span class=go>10% increase          
</span><span class=go>10 times decrease     
</span><span class=go>100% vs. last year    
</span><span class=go>20% increase next year
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>Fourth, attempt to find the row whose value in the c column contains the 10% literal string:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT c     
</span><span class=go>FROM t 
</span><span class=go>WHERE c LIKE &#39;%10%%&#39;;
</span><span class=go>c                 
</span><span class=go>------------------
</span><span class=go>10% increase      
</span><span class=go>10 times decrease 
</span><span class=go>100% vs. last year
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>However, it returns rows whose values in the c column contains 10.</p>
<p>Fifth, to get the correct result, you use the ESCAPE clause as shown in the following query:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT c                 
</span><span class=go>FROM t 
</span><span class=go>WHERE c LIKE &#39;%10\%%&#39; ESCAPE &#39;\&#39;;
</span><span class=go>c           
</span><span class=go>------------
</span><span class=go>10% increase
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><h4 id=glob--determine-whether-a-string-matches-a-specific-unix-pattern>Glob – determine whether a string matches a specific UNIX-pattern.</h4>
<h5 id=introduction-to-the-sqlite-glob-operator>Introduction to the SQLite GLOB operator</h5>
<p>The GLOB operator is similar to the LIKE operator. The GLOB operator determines whether a string matches a specific pattern.</p>
<p>Unlike the LIKE operator, the GLOB operator is case sensitive and uses the UNIX wildcards. In addition, the GLOB patterns do not have escape characters.</p>
<p>The following shows the wildcards used with the GLOB operator:</p>
<ul>
<li>The asterisk (*) wildcard matches any number of characters.</li>
<li>The question mark (?) wildcard matches exactly one character.</li>
</ul>
<p>On top of these wildcards, you can use the list wildcard [] to match one character from a list of characters. For example [xyz] match any single x, y, or z character.</p>
<p>The list wildcard also allows a range of characters e.g., [a-z] matches any single lowercase character from a to z. The [a-zA-Z0-9] pattern matches any single alphanumeric character, both lowercase, and uppercase.</p>
<p>Besides, you can use the character ^ at the beginning of the list to match any character except for any character in the list. For example, the [^0-9] pattern matches any single character except a numeric character.</p>
<h5 id=sqlite-glob-examples>SQLite GLOB examples</h5>
<p>The following statement finds tracks whose names start with the string Man. The pattern Man* matches any string that starts with Man.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT           
</span><span class=go>        trackid,
</span><span class=go>        name
</span><span class=go>FROM
</span><span class=go>        tracks
</span><span class=go>WHERE
</span><span class=go>        name GLOB &#39;Man*&#39;;
</span><span class=go>TrackId  Name                                   
</span><span class=go>-------  ---------------------------------------
</span><span class=go>52       Man In The Box                         
</span><span class=go>106      Man Or Animal                          
</span><span class=go>257      Manguetown                             
</span><span class=go>358      Man With The Woman Head                
</span><span class=go>562      Mangueira                              
</span><span class=go>584      Manuel                                 
</span><span class=go>1397     Man On The Edge                        
</span><span class=go>1459     Manifest Destiny                       
</span><span class=go>1480     Manic Depression                       
</span><span class=go>2046     Manguetown                             
</span><span class=go>2859     Man of Science, Man of Faith (Premiere)
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>The following statement gets the tracks whose names end with Man. The pattern *Man matches any string that ends with Man.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT           
</span><span class=go>        trackid,
</span><span class=go>        name
</span><span class=go>FROM
</span><span class=go>        tracks
</span><span class=go>WHERE
</span><span class=go>        name GLOB &#39;*Man&#39;;
</span><span class=go>TrackId  Name                        
</span><span class=go>-------  ----------------------------
</span><span class=go>31       Blind Man                   
</span><span class=go>359      Muffin Man                  
</span><span class=go>431      The Invisible Man           
</span><span class=go>760      Hard Lovin&#39; Man             
</span><span class=go>809      Holy Man                    
</span><span class=go>821      Ramshackle Man              
</span><span class=go>836      Make Love Like A Man        
</span><span class=go>962      Just A Man                  
</span><span class=go>1235     The Wicker Man              
</span><span class=go>1353     The Wicker Man              
</span><span class=go>1457     Half The Man                
</span><span class=go>1573     2,000 Man                   
</span><span class=go>1809     Of Wolf And Man             
</span><span class=go>2107     Iron Man                    
</span><span class=go>2162     Better Man                  
</span><span class=go>2224     Mystic Man                  
</span><span class=go>2228     Equal Rights Downpresser Man
</span><span class=go>2372     My Lovely Man               
</span><span class=go>2645     Back Door Man               
</span><span class=go>2854     Company Man                 
</span><span class=go>2855     Company Man                 
</span><span class=go>2880     Confidence Man              
</span><span class=go>2986     Wake Up Dead Man            
</span><span class=go>3022     Drowning Man                
</span><span class=go>3090     Ice Cream Man               
</span><span class=go>3223     How to Stop an Exploding Man
</span><span class=go>3379     She&#39;ll Never Be Your Man    
</span><span class=go>3427     Fanfare for the Common Man  
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>The following query finds the tracks whose names start with any single character (?), followed by the string ere and then any number of character (*).</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT            
</span><span class=go>        trackid,
</span><span class=go>        name
</span><span class=go>FROM
</span><span class=go>        tracks
</span><span class=go>WHERE
</span><span class=go>        name GLOB &#39;?ere*&#39;;
</span><span class=go>TrackId  Name                        
</span><span class=go>-------  ----------------------------
</span><span class=go>324      Pererê                      
</span><span class=go>1132     Serenity                    
</span><span class=go>1452     Were Do We Go From Here     
</span><span class=go>1740     Sereia                      
</span><span class=go>2198     Jeremy                      
</span><span class=go>2479     Here&#39;s To The Atom Bomb     
</span><span class=go>2791     Hereditário                 
</span><span class=go>3042     Here I Am (Come And Take Me)
</span><span class=go>3133     Here I Go Again             
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>To find the tracks whose names contain numbers, you can use the list wildcard [0-9] as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>trackid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=w> </span><span class=n>GLOB</span><span class=w> </span><span class=s1>&#39;*[1-9]*&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-example.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-example.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-example.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-example.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-example.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-example.jpg></p>
<p>Or to find the tracks whose name does not contain any number, you place the character ^ at the beginning of the list:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>trackid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=w> </span><span class=n>GLOB</span><span class=w> </span><span class=s1>&#39;*[^1-9]*&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-characters-example.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-characters-example.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-characters-example.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-characters-example.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-characters-example.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-characters-example.jpg></p>
<p>The following statement finds the tracks whose names end with a number.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>trackid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=w> </span><span class=n>GLOB</span><span class=w> </span><span class=s1>&#39;*[1-9]&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-numbers-example.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-numbers-example.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-numbers-example.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-numbers-example.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-numbers-example.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-GLOB-list-wildcard-numbers-example.jpg></p>
<h4 id=is-null--check-if-a-value-is-null-or-not>IS NULL – check if a value is null or not.</h4>
<h5 id=introduction-to-the-sqlite-is-null-operator>Introduction to the SQLite IS NULL operator</h5>
<p>NULL is special. It indicates that a piece of information is unknown or not applicable.</p>
<p>For example, some songs may not have the songwriter information because we don’t know who wrote them.</p>
<p>To store these unknown songwriters along with the songs in a database table, we must use NULL.</p>
<p>NULL is not equal to anything even the number zero, an empty string, and so on.</p>
<p>Especially, NULL is not equal to itself. The following expression returns 0:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=nv>NULL</span> <span class=o>=</span> NULL
</code></pre></td></tr></table>
</div>
</div><p>This is because two unknown information cannot be comparable.</p>
<p>Let’s see the following tracks table from the sample database:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png title=https://cdn.sqlitetutorial.net/wp-content/uploads/2018/11/tracks.png></p>
<p>The following statement attempts to find tracks whose composers are NULL:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>    </span><span class=n>Name</span><span class=p>,</span><span class=w> 
</span><span class=w>    </span><span class=n>Composer</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>    </span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>    </span><span class=n>Composer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>NULL</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>It returns an empty row without issuing any additional message.</p>
<p>This is because the following expression always evaluates to false:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=nv>Composer</span> <span class=o>=</span> NULL
</code></pre></td></tr></table>
</div>
</div><p>It’s not valid to use the NULL this way.</p>
<p>To check if a value is NULL or not, you use the IS NULL operator instead:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=err>{</span><span class=w> </span><span class=k>column</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>expression</span><span class=w> </span><span class=err>}</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>NULL</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The IS NULL operator returns 1 if the column or expression evaluates to NULL.</p>
<p>To find all tracks whose composers are unknown, you use the IS NULL operator as shown in the following query:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>    </span><span class=n>Name</span><span class=p>,</span><span class=w> 
</span><span class=w>    </span><span class=n>Composer</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>    </span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>    </span><span class=n>Composer</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> 
</span><span class=w>    </span><span class=n>Name</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Here is the partial output:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2019/08/SQLite-IS-NULL-example.png data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2019/08/SQLite-IS-NULL-example.png, https://cdn.sqlitetutorial.net/wp-content/uploads/2019/08/SQLite-IS-NULL-example.png 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2019/08/SQLite-IS-NULL-example.png 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2019/08/SQLite-IS-NULL-example.png title=https://cdn.sqlitetutorial.net/wp-content/uploads/2019/08/SQLite-IS-NULL-example.png></p>
<h5 id=sqlite-is-not-null-operator>SQLite IS NOT NULL operator</h5>
<p>The NOT operator negates the IS NULL operator as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>expression <span class=p>|</span> column IS NOT NULL
</code></pre></td></tr></table>
</div>
</div><p>The IS NOT NULL operator returns 1 if the expression or column is not NULL, and 0 if the expression or column is NULL.</p>
<p>The following example finds tracks whose composers are not NULL:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>    </span><span class=n>Name</span><span class=p>,</span><span class=w> 
</span><span class=w>    </span><span class=n>Composer</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>    </span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>    </span><span class=n>Composer</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> 
</span><span class=w>    </span><span class=n>Name</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>This picture illustrates the partial output:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2019/08/SQLite-IS-NOT-NULL-example.png data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2019/08/SQLite-IS-NOT-NULL-example.png, https://cdn.sqlitetutorial.net/wp-content/uploads/2019/08/SQLite-IS-NOT-NULL-example.png 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2019/08/SQLite-IS-NOT-NULL-example.png 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2019/08/SQLite-IS-NOT-NULL-example.png title=https://cdn.sqlitetutorial.net/wp-content/uploads/2019/08/SQLite-IS-NOT-NULL-example.png></p>
<h3 id=section-4-joining-tables>Section 4. Joining tables</h3>
<h4 id=inner-join--query-data-from-multiple-tables-using-the-inner-join-clause>Inner Join – query data from multiple tables using the inner join clause</h4>
<h5 id=introduction-to-sqlite-inner-join-clause>Introduction to SQLite inner join clause</h5>
<p>In relational databases, data is often distributed in many related tables. A table is associated with another table using foreign keys.</p>
<p>To query data from multiple tables, you use INNER JOIN clause. The INNER JOIN clause combines columns from correlated tables.</p>
<p>Suppose you have two tables: A and B.</p>
<p>A has a1, a2, and f columns. B has b1, b2, and f column. The A table links to the B table using a foreign key column named f.</p>
<p>The following illustrates the syntax of the inner join clause:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>a1</span><span class=p>,</span><span class=w> </span><span class=n>a2</span><span class=p>,</span><span class=w> </span><span class=n>b1</span><span class=p>,</span><span class=w> </span><span class=n>b2</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>A</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>B</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>B</span><span class=p>.</span><span class=n>f</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>A</span><span class=p>.</span><span class=n>f</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>For each row in the A table, the INNER JOIN clause compares the value of the f column with the value of the f column in the B table. If the value of the f column in the A table equals the value of the f column in the B table, it combines data from a1, a2, b1, b2, columns and includes this row in the result set.</p>
<p>In other words, the INNER JOIN clause returns rows from the A table that has the corresponding row in B table.</p>
<p>This logic is applied if you join more than 2 tables.</p>
<p>See the following example.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694441/SQLite/SQLite-Inner-Join-Example_q36ury.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694441/SQLite/SQLite-Inner-Join-Example_q36ury.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694441/SQLite/SQLite-Inner-Join-Example_q36ury.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694441/SQLite/SQLite-Inner-Join-Example_q36ury.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694441/SQLite/SQLite-Inner-Join-Example_q36ury.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694441/SQLite/SQLite-Inner-Join-Example_q36ury.png></p>
<p>Only the rows in the A table: (a1,1), (a3,3) have the corresponding rows in the B table (b1,1), (b2,3) are included in the result set.</p>
<p>The following diagram illustrates the INNER JOIN clause:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694523/SQLite/SQLite-inner-join-venn-diagram_qtjdhc.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694523/SQLite/SQLite-inner-join-venn-diagram_qtjdhc.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694523/SQLite/SQLite-inner-join-venn-diagram_qtjdhc.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694523/SQLite/SQLite-inner-join-venn-diagram_qtjdhc.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694523/SQLite/SQLite-inner-join-venn-diagram_qtjdhc.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694523/SQLite/SQLite-inner-join-venn-diagram_qtjdhc.png></p>
<h5 id=sqlite-inner-join-examples>SQLite INNER JOIN examples</h5>
<p>Let’s take a look at the tracks and albums tables in the sample database. The tracks table links to the albums table via AlbumId column.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png></p>
<p>In the tracks table, the AlbumId column is a foreign key. And in the albums table, the AlbumId is the primary key.</p>
<p>To query data from both tracks and albums tables, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>trackid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>title</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>albums</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>albums</span><span class=p>.</span><span class=n>albumid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tracks</span><span class=p>.</span><span class=n>albumid</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694771/SQLite/SQLite-Inner-Join-2-Tables-Example_z3eagi.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694771/SQLite/SQLite-Inner-Join-2-Tables-Example_z3eagi.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694771/SQLite/SQLite-Inner-Join-2-Tables-Example_z3eagi.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694771/SQLite/SQLite-Inner-Join-2-Tables-Example_z3eagi.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694771/SQLite/SQLite-Inner-Join-2-Tables-Example_z3eagi.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694771/SQLite/SQLite-Inner-Join-2-Tables-Example_z3eagi.jpg></p>
<p>For each row in the tracks table, SQLite uses the value in the albumid column of the tracks table to compare with the value in the albumid of the albums table. If SQLite finds a match, it combines data of rows in both tables in the result set.</p>
<p>You can include the AlbumId columns from both tables in the final result set to see the effect.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>    </span><span class=n>trackid</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>tracks</span><span class=p>.</span><span class=n>albumid</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>album_id_tracks</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>albums</span><span class=p>.</span><span class=n>albumid</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>album_id_albums</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>title</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>    </span><span class=n>tracks</span><span class=w>
</span><span class=w>    </span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>albums</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>albums</span><span class=p>.</span><span class=n>albumid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tracks</span><span class=p>.</span><span class=n>albumid</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695073/SQLite/SQLite-Inner-Join-Example_nvfumc.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695073/SQLite/SQLite-Inner-Join-Example_nvfumc.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695073/SQLite/SQLite-Inner-Join-Example_nvfumc.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695073/SQLite/SQLite-Inner-Join-Example_nvfumc.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695073/SQLite/SQLite-Inner-Join-Example_nvfumc.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695073/SQLite/SQLite-Inner-Join-Example_nvfumc.jpg></p>
<h5 id=sqlite-inner-join--3-tables-example>SQLite inner join – 3 tables example</h5>
<p>See the following tables:tracks albums and artists</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695180/SQLite/artists_albums_tracks_hif9gb.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695180/SQLite/artists_albums_tracks_hif9gb.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695180/SQLite/artists_albums_tracks_hif9gb.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695180/SQLite/artists_albums_tracks_hif9gb.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695180/SQLite/artists_albums_tracks_hif9gb.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695180/SQLite/artists_albums_tracks_hif9gb.png></p>
<p>One track belongs to one album and one album have many tracks. The tracks table associated with the albums table via albumid column.</p>
<p>One album belongs to one artist and one artist has one or many albums. The albums table links to the artists table via artistid column.</p>
<p>To query data from these tables, you need to use two inner join clauses in the SELECT statement as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>    </span><span class=n>trackid</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>tracks</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>track</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>albums</span><span class=p>.</span><span class=n>title</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>album</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>artists</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>artist</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>    </span><span class=n>tracks</span><span class=w>
</span><span class=w>    </span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>albums</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>albums</span><span class=p>.</span><span class=n>albumid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tracks</span><span class=p>.</span><span class=n>albumid</span><span class=w>
</span><span class=w>    </span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>artists</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>artists</span><span class=p>.</span><span class=n>artistid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>albums</span><span class=p>.</span><span class=n>artistid</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695539/SQLite/SQLite-Inner-Join-3-tables_ncxv2k.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695539/SQLite/SQLite-Inner-Join-3-tables_ncxv2k.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695539/SQLite/SQLite-Inner-Join-3-tables_ncxv2k.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695539/SQLite/SQLite-Inner-Join-3-tables_ncxv2k.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695539/SQLite/SQLite-Inner-Join-3-tables_ncxv2k.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695539/SQLite/SQLite-Inner-Join-3-tables_ncxv2k.jpg></p>
<p>You can use a WHERE clause to get the tracks and albums of the artist with id 10 as the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>trackid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>Track</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>albums</span><span class=p>.</span><span class=n>title</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>Album</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>artists</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>Artist</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>albums</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>albums</span><span class=p>.</span><span class=n>albumid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tracks</span><span class=p>.</span><span class=n>albumid</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>artists</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>artists</span><span class=p>.</span><span class=n>artistid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>albums</span><span class=p>.</span><span class=n>artistid</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>artists</span><span class=p>.</span><span class=n>artistid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695629/SQLite/SQLite-INNER-JOIN-with-WHERE-clause_shab7v.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695629/SQLite/SQLite-INNER-JOIN-with-WHERE-clause_shab7v.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695629/SQLite/SQLite-INNER-JOIN-with-WHERE-clause_shab7v.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695629/SQLite/SQLite-INNER-JOIN-with-WHERE-clause_shab7v.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695629/SQLite/SQLite-INNER-JOIN-with-WHERE-clause_shab7v.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695629/SQLite/SQLite-INNER-JOIN-with-WHERE-clause_shab7v.jpg></p>
<h4 id=left-join--combine-data-from-multiple-tables-using-the-left-join-clause>Left Join – combine data from multiple tables using the left join clause</h4>
<h5 id=introduction-to-sqlite-left-join-clause>Introduction to SQLite LEFT JOIN clause</h5>
<p>Similar to the INNER JOIN clause, the LEFT JOIN clause is an optional clause of the SELECT statement. You use the LEFT JOIN clause to query data from multiple related tables.</p>
<p>Suppose we have two tables: A and B.</p>
<ul>
<li>A has m and f columns.</li>
<li>B has n and f columns.</li>
</ul>
<p>To perform join between A and B using LEFT JOIN clause, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>a</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>b</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>A</span><span class=w>
</span><span class=w></span><span class=k>LEFT</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>B</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>A</span><span class=p>.</span><span class=n>f</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>B</span><span class=p>.</span><span class=n>f</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>search_condition</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The expression A.f = B.f is a conditional expression. Besides the equality (=) operator, you can use other comparison operators such as greater than (>), less than (&lt;), etc.</p>
<p>The statement returns a result set that includes:</p>
<ol>
<li>Rows in table A (left table) that have corresponding rows in table B.</li>
<li>Rows in the table A table and the rows in the table B filled with NULL values in case the row from table A does not have any corresponding rows in table B.</li>
</ol>
<p>In other words, all rows in table A are included in the result set whether there are matching rows in table B or not.</p>
<p>In case you have a WHERE clause in the statement, the search_condition in the WHERE clause is applied after the matching of the LEFT JOIN clause completes.</p>
<p>See the following illustration of the LEFT JOIN clause between the A and B tables.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695957/SQLite/SQLite-left-join-example_ws2gvm.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695957/SQLite/SQLite-left-join-example_ws2gvm.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695957/SQLite/SQLite-left-join-example_ws2gvm.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695957/SQLite/SQLite-left-join-example_ws2gvm.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695957/SQLite/SQLite-left-join-example_ws2gvm.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617695957/SQLite/SQLite-left-join-example_ws2gvm.png></p>
<p>All rows in the table A are included in the result set.</p>
<p>Because the second row (a2,2) does not have a corresponding row in table B, the LEFT JOIN clause creates a fake row filled with NULL.</p>
<p>The following Venn Diagram illustrates the LEFT JOIN clause.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696015/SQLite/SQLite-Left-Join-Venn-Diagram_hwmkfk.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696015/SQLite/SQLite-Left-Join-Venn-Diagram_hwmkfk.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696015/SQLite/SQLite-Left-Join-Venn-Diagram_hwmkfk.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696015/SQLite/SQLite-Left-Join-Venn-Diagram_hwmkfk.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696015/SQLite/SQLite-Left-Join-Venn-Diagram_hwmkfk.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696015/SQLite/SQLite-Left-Join-Venn-Diagram_hwmkfk.png></p>
<p>It is noted that LEFT OUTER JOIN is the same as LEFT JOIN.</p>
<h5 id=sqlite-left-join-examples>SQLite LEFT JOIN examples</h5>
<p>We will use the artists and albums tables in the sample database for demonstration.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png></p>
<p>One album belongs to one artist. However, one artist may have zero or more albums.</p>
<p>To find artists who do not have any albums by using the LEFT JOIN clause, we select artists and their corresponding albums. If an artist does not have any albums, the value of the AlbumId column is NULL.</p>
<p>To display the artists who do not have any albums first, we have two choices:</p>
<ul>
<li>First, use ORDER BY clause to list the rows whose AlbumId is NULL values first.</li>
<li>Second, use WHERE clause and IS NULL operator to list only artists who do not have any albums.</li>
</ul>
<p>The following statement uses the LEFT JOIN clause with the ORDER BY clause.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>   </span><span class=n>artists</span><span class=p>.</span><span class=n>ArtistId</span><span class=p>,</span><span class=w> 
</span><span class=w>   </span><span class=n>AlbumId</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>   </span><span class=n>artists</span><span class=w>
</span><span class=w></span><span class=k>LEFT</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>albums</span><span class=w> </span><span class=k>ON</span><span class=w>
</span><span class=w>   </span><span class=n>albums</span><span class=p>.</span><span class=n>ArtistId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>artists</span><span class=p>.</span><span class=n>ArtistId</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>   </span><span class=n>AlbumId</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following statement uses the LEFT JOIN clause with the WHERE clause.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>   </span><span class=n>artists</span><span class=p>.</span><span class=n>ArtistId</span><span class=w>
</span><span class=w>   </span><span class=p>,</span><span class=w> </span><span class=n>AlbumId</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>   </span><span class=n>artists</span><span class=w>
</span><span class=w></span><span class=k>LEFT</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>albums</span><span class=w> </span><span class=k>ON</span><span class=w>
</span><span class=w>   </span><span class=n>albums</span><span class=p>.</span><span class=n>ArtistId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>artists</span><span class=p>.</span><span class=n>ArtistId</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>   </span><span class=n>AlbumId</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>NULL</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=cross-join--show-you-how-to-use-the-cross-join-clause-to-produce-a-cartesian-product-of-result-sets-of-the-tables-involved-in-the-join>Cross Join – show you how to use the cross join clause to produce a cartesian product of result sets of the tables involved in the join</h4>
<h5 id=introduction-to-sqlite-cross-join-clause>Introduction to SQLite CROSS JOIN clause</h5>
<p>If you use a LEFT JOIN, INNER JOIN, or CROSS JOIN without the ON or USING clause, SQLite produces the Cartesian product of the involved tables. The number of rows in the Cartesian product is the product of the number of rows in each involved tables.</p>
<p>Suppose, we have two tables A and B. The following statements perform the cross join and produce a cartesian product of the rows from the A and B tables.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>A</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>B</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>A</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>B</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>A</span><span class=w>
</span><span class=w></span><span class=k>CROSS</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>B</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>A</span><span class=p>,</span><span class=w> </span><span class=n>B</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Suppose, the A table has N rows and B table has M rows, the CROSS JOIN of these two tables will produce a result set that contains NxM rows.</p>
<p>Imagine that if you have the third table C with K rows, the result of the CROSS JOIN clause of these three tables will contain NxMxK rows, which may be very huge. Therefore, you should be very careful when using the CROSS JOIN clause.</p>
<p>You use the INNER JOIN and LEFT JOIN clauses more often than the CROSS JOIN clause. However, you will find the CROSS JOIN clause very useful in some cases.</p>
<p>For example, when you want to have a matrix that has two dimensions filled with data completely like members and dates data in a membership database. You want to check the attendants of members for all relevant dates. In this case, you may use the CROSS JOIN clause as the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>       </span><span class=nb>date</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>members</span><span class=w>
</span><span class=w></span><span class=k>CROSS</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>dates</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h5 id=sqlite-cross-join-clause-example>SQLite CROSS JOIN clause example</h5>
<p>The following statements create the ranks and suits tables that store the ranks and suits for a deck of cards and insert the complete data into these two tables.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>ranks</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=n>rank</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>suits</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=n>suit</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>ranks</span><span class=p>(</span><span class=n>rank</span><span class=p>)</span><span class=w> 
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;2&#39;</span><span class=p>),(</span><span class=s1>&#39;3&#39;</span><span class=p>),(</span><span class=s1>&#39;4&#39;</span><span class=p>),(</span><span class=s1>&#39;5&#39;</span><span class=p>),(</span><span class=s1>&#39;6&#39;</span><span class=p>),(</span><span class=s1>&#39;7&#39;</span><span class=p>),(</span><span class=s1>&#39;8&#39;</span><span class=p>),(</span><span class=s1>&#39;9&#39;</span><span class=p>),(</span><span class=s1>&#39;10&#39;</span><span class=p>),(</span><span class=s1>&#39;J&#39;</span><span class=p>),(</span><span class=s1>&#39;Q&#39;</span><span class=p>),(</span><span class=s1>&#39;K&#39;</span><span class=p>),(</span><span class=s1>&#39;A&#39;</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>suits</span><span class=p>(</span><span class=n>suit</span><span class=p>)</span><span class=w> 
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;Clubs&#39;</span><span class=p>),(</span><span class=s1>&#39;Diamonds&#39;</span><span class=p>),(</span><span class=s1>&#39;Hearts&#39;</span><span class=p>),(</span><span class=s1>&#39;Spades&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following statement uses the CROSS JOIN clause to return a complete deck of cards data:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>rank</span><span class=p>,</span><span class=w>
</span><span class=w>       </span><span class=n>suit</span><span class=w>
</span><span class=w>  </span><span class=k>FROM</span><span class=w> </span><span class=n>ranks</span><span class=w>
</span><span class=w>       </span><span class=k>CROSS</span><span class=w> </span><span class=k>JOIN</span><span class=w>
</span><span class=w>       </span><span class=n>suits</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>suit</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><table>
<thead>
<tr>
<th>rank</th>
<th>suit</th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>Clubs</td>
</tr>
<tr>
<td>3</td>
<td>Clubs</td>
</tr>
<tr>
<td>4</td>
<td>Clubs</td>
</tr>
<tr>
<td>5</td>
<td>Clubs</td>
</tr>
<tr>
<td>6</td>
<td>Clubs</td>
</tr>
<tr>
<td>7</td>
<td>Clubs</td>
</tr>
<tr>
<td>8</td>
<td>Clubs</td>
</tr>
<tr>
<td>9</td>
<td>Clubs</td>
</tr>
<tr>
<td>10</td>
<td>Clubs</td>
</tr>
<tr>
<td>J</td>
<td>Clubs</td>
</tr>
<tr>
<td>Q</td>
<td>Clubs</td>
</tr>
<tr>
<td>K</td>
<td>Clubs</td>
</tr>
<tr>
<td>A</td>
<td>Clubs</td>
</tr>
<tr>
<td>2</td>
<td>Diamonds</td>
</tr>
<tr>
<td>3</td>
<td>Diamonds</td>
</tr>
<tr>
<td>4</td>
<td>Diamonds</td>
</tr>
<tr>
<td>5</td>
<td>Diamonds</td>
</tr>
<tr>
<td>6</td>
<td>Diamonds</td>
</tr>
<tr>
<td>7</td>
<td>Diamonds</td>
</tr>
<tr>
<td>8</td>
<td>Diamonds</td>
</tr>
<tr>
<td>9</td>
<td>Diamonds</td>
</tr>
<tr>
<td>10</td>
<td>Diamonds</td>
</tr>
<tr>
<td>J</td>
<td>Diamonds</td>
</tr>
<tr>
<td>Q</td>
<td>Diamonds</td>
</tr>
<tr>
<td>K</td>
<td>Diamonds</td>
</tr>
<tr>
<td>A</td>
<td>Diamonds</td>
</tr>
<tr>
<td>2</td>
<td>Hearts</td>
</tr>
<tr>
<td>3</td>
<td>Hearts</td>
</tr>
<tr>
<td>4</td>
<td>Hearts</td>
</tr>
<tr>
<td>5</td>
<td>Hearts</td>
</tr>
<tr>
<td>6</td>
<td>Hearts</td>
</tr>
<tr>
<td>7</td>
<td>Hearts</td>
</tr>
<tr>
<td>8</td>
<td>Hearts</td>
</tr>
<tr>
<td>9</td>
<td>Hearts</td>
</tr>
<tr>
<td>10</td>
<td>Hearts</td>
</tr>
<tr>
<td>J</td>
<td>Hearts</td>
</tr>
<tr>
<td>Q</td>
<td>Hearts</td>
</tr>
<tr>
<td>K</td>
<td>Hearts</td>
</tr>
<tr>
<td>A</td>
<td>Hearts</td>
</tr>
<tr>
<td>2</td>
<td>Spades</td>
</tr>
<tr>
<td>3</td>
<td>Spades</td>
</tr>
<tr>
<td>4</td>
<td>Spades</td>
</tr>
<tr>
<td>5</td>
<td>Spades</td>
</tr>
<tr>
<td>6</td>
<td>Spades</td>
</tr>
<tr>
<td>7</td>
<td>Spades</td>
</tr>
<tr>
<td>8</td>
<td>Spades</td>
</tr>
<tr>
<td>9</td>
<td>Spades</td>
</tr>
<tr>
<td>10</td>
<td>Spades</td>
</tr>
<tr>
<td>J</td>
<td>Spades</td>
</tr>
<tr>
<td>Q</td>
<td>Spades</td>
</tr>
<tr>
<td>K</td>
<td>Spades</td>
</tr>
<tr>
<td>A</td>
<td>Spades</td>
</tr>
</tbody>
</table>
<h4 id=self-join--join-a-table-to-itself-to-create-a-result-set-that-joins-rows-with-other-rows-within-the-same-table>Self Join – join a table to itself to create a result set that joins rows with other rows within the same table</h4>
<h5 id=introduction-to-sqlite-self-join>Introduction to SQLite self-join</h5>
<p>The self-join is a special kind of joins that allow you to join a table to itself using either LEFT JOIN or INNER JOIN clause. You use self-join to create a result set that joins the rows with the other rows within the same table.</p>
<p>Because you cannot refer to the same table more than one in a query, you need to use a table alias to assign the table a different name when you use self-join.</p>
<p>The self-join compares values of the same or different columns in the same table. Only one table is involved in the self-join.</p>
<p>You often use self-join to query parents/child relationship stored in a table or to obtain running totals.</p>
<h5 id=sqlite-self-join-examples>SQLite self-join examples</h5>
<p>We will use the employees table in the sample database for demonstration.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697644/SQLite/employees_x3wxsp.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697644/SQLite/employees_x3wxsp.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697644/SQLite/employees_x3wxsp.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697644/SQLite/employees_x3wxsp.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697644/SQLite/employees_x3wxsp.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697644/SQLite/employees_x3wxsp.png></p>
<p>The employees table stores not only employee data but also organizational data. The ReportsTo column specifies the reporting relationship between employees.</p>
<p>If an employee reports to a manager, the value of the ReportsTo column of the employee’s row is equal to the value of the EmployeeId column of the manager’s row. In case an employee does not report to anyone, the ReportsTo column is NULL.</p>
<p>To get the information on who is the direct report of whom, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>m</span><span class=p>.</span><span class=n>firstname</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=s1>&#39; &#39;</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>m</span><span class=p>.</span><span class=n>lastname</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;Manager&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>       </span><span class=n>e</span><span class=p>.</span><span class=n>firstname</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=s1>&#39; &#39;</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>lastname</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;Direct report&#39;</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>employees</span><span class=w> </span><span class=n>e</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>employees</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>m</span><span class=p>.</span><span class=n>employeeid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>reportsto</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>manager</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697926/SQLite/SQLite-self-join-example_ubxpbk.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697926/SQLite/SQLite-self-join-example_ubxpbk.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697926/SQLite/SQLite-self-join-example_ubxpbk.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697926/SQLite/SQLite-self-join-example_ubxpbk.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697926/SQLite/SQLite-self-join-example_ubxpbk.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697926/SQLite/SQLite-self-join-example_ubxpbk.jpg></p>
<p>The statement used the INNER JOIN clause to join the employees to itself. The employees table has two roles: employees and managers.</p>
<p>Because we used the INNER JOIN clause to join the employees table to itself, the result set does not have the row whose manager column contains a NULL value.</p>
<p>Note that the concatenation operator || concatenates multiple strings into a single string. In the example, we use the concatenation operator to from the full names of the employees by concatenating the first name, space, and last name.</p>
<p>In case you want to query the CEO who does not report to anyone, you need to change the INNER JOIN clause to LEFT JOIN clause in the query above.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617698114/SQLite/SQLite-self-join-with-left-join-example_j9byoi.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617698114/SQLite/SQLite-self-join-with-left-join-example_j9byoi.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617698114/SQLite/SQLite-self-join-with-left-join-example_j9byoi.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617698114/SQLite/SQLite-self-join-with-left-join-example_j9byoi.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617698114/SQLite/SQLite-self-join-with-left-join-example_j9byoi.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617698114/SQLite/SQLite-self-join-with-left-join-example_j9byoi.jpg></p>
<p>Andrew Adams is the CEO because he does not report anyone.</p>
<p>You can use the self-join technique to find the employees located in the same city as the following query:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=k>DISTINCT</span><span class=w>
</span><span class=w>	</span><span class=n>e1</span><span class=p>.</span><span class=n>city</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>e1</span><span class=p>.</span><span class=n>firstName</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=s1>&#39; &#39;</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>e1</span><span class=p>.</span><span class=n>lastname</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>fullname</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>employees</span><span class=w> </span><span class=n>e1</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>employees</span><span class=w> </span><span class=n>e2</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>e2</span><span class=p>.</span><span class=n>city</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>e1</span><span class=p>.</span><span class=n>city</span><span class=w> 
</span><span class=w>   </span><span class=k>AND</span><span class=w> </span><span class=p>(</span><span class=n>e1</span><span class=p>.</span><span class=n>firstname</span><span class=w> </span><span class=o>&lt;&gt;</span><span class=w> </span><span class=n>e2</span><span class=p>.</span><span class=n>firstname</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>e1</span><span class=p>.</span><span class=n>lastname</span><span class=w> </span><span class=o>&lt;&gt;</span><span class=w> </span><span class=n>e2</span><span class=p>.</span><span class=n>lastname</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>e1</span><span class=p>.</span><span class=n>city</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617698212/SQLite/SQLite-self-join-employees-locate-in-the-same-city_kbi8dv.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617698212/SQLite/SQLite-self-join-employees-locate-in-the-same-city_kbi8dv.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617698212/SQLite/SQLite-self-join-employees-locate-in-the-same-city_kbi8dv.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617698212/SQLite/SQLite-self-join-employees-locate-in-the-same-city_kbi8dv.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617698212/SQLite/SQLite-self-join-employees-locate-in-the-same-city_kbi8dv.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617698212/SQLite/SQLite-self-join-employees-locate-in-the-same-city_kbi8dv.jpg></p>
<p>The join condition has two expressions:</p>
<ul>
<li>e1.city = e2.city to make sure that both employees located in the same city</li>
<li>e.firstname &lt;> e2.firstname AND e1.lastname &lt;> e2.lastname to ensure that e1 and e2 are not the same employee with the assumption that there aren’t employees who have the same first name and last name.</li>
</ul>
<h4 id=full-outer-join--show-you-how-to-emulate-the-full-outer-join-in-the-sqlite-using-left-join-and-union-clauses>Full Outer Join – show you how to emulate the full outer join in the SQLite using left join and union clauses</h4>
<h5 id=introduction-to-sql-full-outer-join-clause>Introduction to SQL FULL OUTER JOIN clause</h5>
<p>In theory, the result of the FULL OUTER JOIN is a combination of a LEFT JOIN and a RIGHT JOIN. The result set of the full outer join has NULL values for every column of the table that does not have a matching row in the other table. For the matching rows, the FULL OUTER JOIN produces a single row with values from columns of the rows in both tables.</p>
<p>The following picture illustrates the result of the FULL OUTER JOIN clause:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617699306/SQLite/full-outer-join_b7scgv.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617699306/SQLite/full-outer-join_b7scgv.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617699306/SQLite/full-outer-join_b7scgv.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617699306/SQLite/full-outer-join_b7scgv.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617699306/SQLite/full-outer-join_b7scgv.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617699306/SQLite/full-outer-join_b7scgv.png></p>
<p>See the following cats and dogs tables.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=c1>-- create and insert data into the dogs table
</span><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>dogs</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=k>type</span><span class=w>       </span><span class=nb>TEXT</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>color</span><span class=w> </span><span class=nb>TEXT</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>dogs</span><span class=p>(</span><span class=k>type</span><span class=p>,</span><span class=w> </span><span class=n>color</span><span class=p>)</span><span class=w> 
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;Hunting&#39;</span><span class=p>,</span><span class=s1>&#39;Black&#39;</span><span class=p>),</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;Guard&#39;</span><span class=p>,</span><span class=s1>&#39;Brown&#39;</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>-- create and insert data into the cats table
</span><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>cats</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=k>type</span><span class=w>       </span><span class=nb>TEXT</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>color</span><span class=w> </span><span class=nb>TEXT</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>cats</span><span class=p>(</span><span class=k>type</span><span class=p>,</span><span class=n>color</span><span class=p>)</span><span class=w> 
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;Indoor&#39;</span><span class=p>,</span><span class=s1>&#39;White&#39;</span><span class=p>),</span><span class=w> 
</span><span class=w>      </span><span class=p>(</span><span class=s1>&#39;Outdoor&#39;</span><span class=p>,</span><span class=s1>&#39;Black&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following statement uses the FULL OUTER JOIN clause to query data from the dogs and cats tables.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>dogs</span><span class=w> 
</span><span class=w></span><span class=k>FULL</span><span class=w> </span><span class=k>OUTER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>cats</span><span class=w>
</span><span class=w>    </span><span class=k>ON</span><span class=w> </span><span class=n>dogs</span><span class=p>.</span><span class=n>color</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cats</span><span class=p>.</span><span class=n>color</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following shows the result of the statement above:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Color</th>
<th>Type</th>
<th>Color</th>
</tr>
</thead>
<tbody>
<tr>
<td>Hunting</td>
<td>Black</td>
<td>Outdoor</td>
<td>Black</td>
</tr>
<tr>
<td>Guard</td>
<td>Brown</td>
<td>NULL</td>
<td>NULL</td>
</tr>
<tr>
<td>NULL</td>
<td>NULL</td>
<td>Indoor</td>
<td>White</td>
</tr>
</tbody>
</table>
<p>Unfortunately, SQLite does not support the RIGHT JOIN clause and also the FULL OUTER JOIN clause. However, you can easily emulate the FULL OUTER JOIN by using the LEFT JOIN clause.</p>
<h5 id=emulating-sqlite-full-outer-join>Emulating SQLite full outer join</h5>
<p>The following statement emulates the FULL OUTER JOIN clause in SQLite:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>d</span><span class=p>.</span><span class=k>type</span><span class=p>,</span><span class=w>
</span><span class=w>         </span><span class=n>d</span><span class=p>.</span><span class=n>color</span><span class=p>,</span><span class=w>
</span><span class=w>         </span><span class=k>c</span><span class=p>.</span><span class=k>type</span><span class=p>,</span><span class=w>
</span><span class=w>         </span><span class=k>c</span><span class=p>.</span><span class=n>color</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>dogs</span><span class=w> </span><span class=n>d</span><span class=w>
</span><span class=w></span><span class=k>LEFT</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>cats</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>USING</span><span class=p>(</span><span class=n>color</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>UNION</span><span class=w> </span><span class=k>ALL</span><span class=w>
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>d</span><span class=p>.</span><span class=k>type</span><span class=p>,</span><span class=w>
</span><span class=w>         </span><span class=n>d</span><span class=p>.</span><span class=n>color</span><span class=p>,</span><span class=w>
</span><span class=w>         </span><span class=k>c</span><span class=p>.</span><span class=k>type</span><span class=p>,</span><span class=w>
</span><span class=w>         </span><span class=k>c</span><span class=p>.</span><span class=n>color</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>cats</span><span class=w> </span><span class=k>c</span><span class=w>
</span><span class=w></span><span class=k>LEFT</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>dogs</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=k>USING</span><span class=p>(</span><span class=n>color</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>d</span><span class=p>.</span><span class=n>color</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>NULL</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>How the query works.</p>
<ul>
<li>Because SQLilte does not support the RIGHT JOIN clause, we use the LEFT JOIN clause in the second SELECT statement instead and switch the positions of the cats and dogs tables.</li>
<li>The UNION ALL clause retains the duplicate rows from the result sets of both queries.</li>
<li>The WHERE clause in the second SELECT statement removes rows that already included in the result set of the first SELECT statement.</li>
</ul>
<p>In this section, you have learned how to use the UNION ALL and LEFT JOIN clauses to emulate the SQLite FULL OUTER JOIN clause.</p>
<h3 id=section-5-grouping-data>Section 5. Grouping data</h3>
<h4 id=group-by--combine-a-set-of-rows-into-groups-based-on-specified-criteria-the-group-by-clause-helps-you-summarize-data-for-reporting-purposes>Group By – combine a set of rows into groups based on specified criteria. The GROUP BY clause helps you summarize data for reporting purposes.</h4>
<h5 id=introduction-to-sqlite-group-by-clause>Introduction to SQLite GROUP BY clause</h5>
<p>The GROUP BY clause is an optional clause of the SELECT statement. The GROUP BY clause a selected group of rows into summary rows by values of one or more columns.</p>
<p>The GROUP BY clause returns one row for each group. For each group, you can apply an aggregate function such as MIN, MAX, SUM, COUNT, or AVG to provide more information about each group.</p>
<p>The following statement illustrates the syntax of the SQLite GROUP BY clause.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> 
</span><span class=w>    </span><span class=n>column_1</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>aggregate_function</span><span class=p>(</span><span class=n>column_2</span><span class=p>)</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> 
</span><span class=w>    </span><span class=k>table</span><span class=w>
</span><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> 
</span><span class=w>    </span><span class=n>column_1</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>column_2</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The GROUP BY clause comes after the FROM clause of the SELECT statement. In case a statement contains a WHERE clause, the GROUP BY clause must come after the WHERE clause.</p>
<p>Following the GROUP BY clause is a column or a list of comma-separated columns used to specify the group.</p>
<h5 id=sqlite-group-by-examples>SQLite GROUP BY examples</h5>
<p>We use the tracks table from the sample database for the demonstration.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png></p>
<h5 id=sqlite-group-by-clause-with-count-function>SQLite GROUP BY clause with COUNT function</h5>
<p>The following statement returns the album id and the number of tracks per album. It uses the GROUP BY clause to groups tracks by album and applies the COUNT() function to each group.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>albumid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>COUNT</span><span class=p>(</span><span class=n>trackid</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>albumid</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700133/SQLite/SQLite-GROUP-BY-with-COUNT-function_o53xsq.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700133/SQLite/SQLite-GROUP-BY-with-COUNT-function_o53xsq.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700133/SQLite/SQLite-GROUP-BY-with-COUNT-function_o53xsq.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700133/SQLite/SQLite-GROUP-BY-with-COUNT-function_o53xsq.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700133/SQLite/SQLite-GROUP-BY-with-COUNT-function_o53xsq.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700133/SQLite/SQLite-GROUP-BY-with-COUNT-function_o53xsq.jpg></p>
<p>You can use the ORDER BY clause to sort the groups as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>albumid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>COUNT</span><span class=p>(</span><span class=n>trackid</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>albumid</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=n>trackid</span><span class=p>)</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700201/SQLite/SQLite-GROUP-BY-with-COUNT-function-and-ORDER-BY-clause_ictnyy.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700201/SQLite/SQLite-GROUP-BY-with-COUNT-function-and-ORDER-BY-clause_ictnyy.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700201/SQLite/SQLite-GROUP-BY-with-COUNT-function-and-ORDER-BY-clause_ictnyy.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700201/SQLite/SQLite-GROUP-BY-with-COUNT-function-and-ORDER-BY-clause_ictnyy.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700201/SQLite/SQLite-GROUP-BY-with-COUNT-function-and-ORDER-BY-clause_ictnyy.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700201/SQLite/SQLite-GROUP-BY-with-COUNT-function-and-ORDER-BY-clause_ictnyy.jpg></p>
<h5 id=sqlite-group-by-and-inner-join-clause>SQLite GROUP BY and INNER JOIN clause</h5>
<p>You can query data from multiple tables using the INNER JOIN clause, then use the GROUP BY clause to group rows into a set of summary rows.</p>
<p>For example, the following statement joins the tracks table with the albums table to get the album’s titles and uses the GROUP BY clause with the COUNT function to get the number of tracks per album.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png></p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=p>.</span><span class=n>albumid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>title</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>COUNT</span><span class=p>(</span><span class=n>trackid</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>albums</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>albums</span><span class=p>.</span><span class=n>albumid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tracks</span><span class=p>.</span><span class=n>albumid</span><span class=w>
</span><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=p>.</span><span class=n>albumid</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700421/SQLite/SQLite-GROUP-BY-with-INNER-JOIN_fsidpj.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700421/SQLite/SQLite-GROUP-BY-with-INNER-JOIN_fsidpj.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700421/SQLite/SQLite-GROUP-BY-with-INNER-JOIN_fsidpj.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700421/SQLite/SQLite-GROUP-BY-with-INNER-JOIN_fsidpj.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700421/SQLite/SQLite-GROUP-BY-with-INNER-JOIN_fsidpj.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700421/SQLite/SQLite-GROUP-BY-with-INNER-JOIN_fsidpj.jpg></p>
<h5 id=sqlite-group-by-with-having-clause>SQLite GROUP BY with HAVING clause</h5>
<p>To filter groups, you use the GROUP BY with HAVING clause. For example, to get the albums that have more than 15 tracks, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=p>.</span><span class=n>albumid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>title</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>COUNT</span><span class=p>(</span><span class=n>trackid</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>albums</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>albums</span><span class=p>.</span><span class=n>albumid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tracks</span><span class=p>.</span><span class=n>albumid</span><span class=w>
</span><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=p>.</span><span class=n>albumid</span><span class=w>
</span><span class=w></span><span class=k>HAVING</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=n>trackid</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>15</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700499/SQLite/SQLite-GROUP-BY-with-HAVING-clause_erf9xo.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700499/SQLite/SQLite-GROUP-BY-with-HAVING-clause_erf9xo.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700499/SQLite/SQLite-GROUP-BY-with-HAVING-clause_erf9xo.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700499/SQLite/SQLite-GROUP-BY-with-HAVING-clause_erf9xo.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700499/SQLite/SQLite-GROUP-BY-with-HAVING-clause_erf9xo.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700499/SQLite/SQLite-GROUP-BY-with-HAVING-clause_erf9xo.jpg></p>
<h5 id=sqlite-group-by-clause-with-sum-function-example>SQLite GROUP BY clause with SUM function example</h5>
<p>You can use the SUM function to calculate total per group. For example, to get total length and bytes for each album, you use the SUM function to calculate total milliseconds and bytes.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>albumid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>SUM</span><span class=p>(</span><span class=n>milliseconds</span><span class=p>)</span><span class=w> </span><span class=k>length</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>SUM</span><span class=p>(</span><span class=n>bytes</span><span class=p>)</span><span class=w> </span><span class=k>size</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>albumid</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700571/SQLite/SQLite-GROUP-BY-with-SUM-function_q8bidz.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700571/SQLite/SQLite-GROUP-BY-with-SUM-function_q8bidz.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700571/SQLite/SQLite-GROUP-BY-with-SUM-function_q8bidz.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700571/SQLite/SQLite-GROUP-BY-with-SUM-function_q8bidz.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700571/SQLite/SQLite-GROUP-BY-with-SUM-function_q8bidz.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700571/SQLite/SQLite-GROUP-BY-with-SUM-function_q8bidz.jpg></p>
<h5 id=sqlite-group-by-with-max-min-and-avg-functions>SQLite GROUP BY with MAX, MIN, and AVG functions</h5>
<p>The following statement returns the album id, album title, maximum length, minimum length, and the average length of tracks in the tracks table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=p>.</span><span class=n>albumid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>title</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>min</span><span class=p>(</span><span class=n>milliseconds</span><span class=p>),</span><span class=w>
</span><span class=w>	</span><span class=k>max</span><span class=p>(</span><span class=n>milliseconds</span><span class=p>),</span><span class=w>
</span><span class=w>	</span><span class=n>round</span><span class=p>(</span><span class=k>avg</span><span class=p>(</span><span class=n>milliseconds</span><span class=p>),</span><span class=mi>2</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>albums</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>albums</span><span class=p>.</span><span class=n>albumid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tracks</span><span class=p>.</span><span class=n>albumid</span><span class=w>
</span><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=p>.</span><span class=n>albumid</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700653/SQLite/SQLite-GROUP-BY-with-MAX-MIN-AVG-functions_zuz5zo.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700653/SQLite/SQLite-GROUP-BY-with-MAX-MIN-AVG-functions_zuz5zo.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700653/SQLite/SQLite-GROUP-BY-with-MAX-MIN-AVG-functions_zuz5zo.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700653/SQLite/SQLite-GROUP-BY-with-MAX-MIN-AVG-functions_zuz5zo.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700653/SQLite/SQLite-GROUP-BY-with-MAX-MIN-AVG-functions_zuz5zo.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700653/SQLite/SQLite-GROUP-BY-with-MAX-MIN-AVG-functions_zuz5zo.jpg></p>
<h5 id=sqlite-group-by-multiple-columns-example>SQLite GROUP BY multiple columns example</h5>
<p>In the previous example, we have used one column in the GROUP BY clause. SQLite allows you to group rows by multiple columns.</p>
<p>For example, to group tracks by media type and genre, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>   </span><span class=n>MediaTypeId</span><span class=p>,</span><span class=w> 
</span><span class=w>   </span><span class=n>GenreId</span><span class=p>,</span><span class=w> 
</span><span class=w>   </span><span class=k>COUNT</span><span class=p>(</span><span class=n>TrackId</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>   </span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>   </span><span class=n>MediaTypeId</span><span class=p>,</span><span class=w> 
</span><span class=w>   </span><span class=n>GenreId</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700746/SQLite/SQL-GROUP-BY-multiple-columns-example_wvkjpr.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700746/SQLite/SQL-GROUP-BY-multiple-columns-example_wvkjpr.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700746/SQLite/SQL-GROUP-BY-multiple-columns-example_wvkjpr.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700746/SQLite/SQL-GROUP-BY-multiple-columns-example_wvkjpr.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700746/SQLite/SQL-GROUP-BY-multiple-columns-example_wvkjpr.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700746/SQLite/SQL-GROUP-BY-multiple-columns-example_wvkjpr.jpg></p>
<p>SQLite uses the combination of values of MediaTypeId and GenreId columns as a group e.g., (1,1) and (1,2). It then applies the COUNT function to return the number of tracks in each group.</p>
<h5 id=sqlite-group-by-date-example>SQLite GROUP BY date example</h5>
<p>See the following invoices table from the sample database:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700819/SQLite/invoices_vpuw0q.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700819/SQLite/invoices_vpuw0q.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700819/SQLite/invoices_vpuw0q.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700819/SQLite/invoices_vpuw0q.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700819/SQLite/invoices_vpuw0q.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700819/SQLite/invoices_vpuw0q.png></p>
<p>The following statement returns the number of invoice by years.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>   </span><span class=n>STRFTIME</span><span class=p>(</span><span class=s1>&#39;%Y&#39;</span><span class=p>,</span><span class=w> </span><span class=n>InvoiceDate</span><span class=p>)</span><span class=w> </span><span class=n>InvoiceYear</span><span class=p>,</span><span class=w> 
</span><span class=w>   </span><span class=k>COUNT</span><span class=p>(</span><span class=n>InvoiceId</span><span class=p>)</span><span class=w> </span><span class=n>InvoiceCount</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>   </span><span class=n>invoices</span><span class=w>
</span><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>   </span><span class=n>STRFTIME</span><span class=p>(</span><span class=s1>&#39;%Y&#39;</span><span class=p>,</span><span class=w> </span><span class=n>InvoiceDate</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>   </span><span class=n>InvoiceYear</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Here is the output:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700901/SQLite/SQLite-GROUP-BY-date-example_dx2loe.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700901/SQLite/SQLite-GROUP-BY-date-example_dx2loe.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700901/SQLite/SQLite-GROUP-BY-date-example_dx2loe.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700901/SQLite/SQLite-GROUP-BY-date-example_dx2loe.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700901/SQLite/SQLite-GROUP-BY-date-example_dx2loe.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700901/SQLite/SQLite-GROUP-BY-date-example_dx2loe.png></p>
<p>In this example:</p>
<ul>
<li>The function STRFTIME('%Y', InvoiceDate) returns a year from a date string.</li>
<li>The GROUP BY clause groups the invoices by years.</li>
<li>The function COUNT() returns the number of invoice in each year (or group).</li>
</ul>
<h4 id=having--specify-the-conditions-to-filter-the-groups-summarized-by-the-group-by-clause>Having – specify the conditions to filter the groups summarized by the GROUP BY clause.</h4>
<h5 id=introduction-to-sqlite-having-clause>Introduction to SQLite HAVING clause</h5>
<p>SQLite HAVING clause is an optional clause of the SELECT statement. The HAVING clause specifies a search condition for a group.</p>
<p>You often use the HAVING clause with the GROUP BY clause. The GROUP BY clause groups a set of rows into a set of summary rows or groups. Then the HAVING clause filters groups based on a specified condition.</p>
<p>If you use the HAVING clause, you must include the GROUP BY clause; otherwise, you will get the following error:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>Error: a GROUP BY clause is required before HAVING
</code></pre></td></tr></table>
</div>
</div><p><strong>NOTE:</strong> that the HAVING clause is applied after GROUP BY clause, whereas the WHERE clause is applied before the GROUP BY clause.</p>
<p>The following illustrates the syntax of the HAVING clause:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>column_1</span><span class=p>,</span><span class=w> 
</span><span class=w>        </span><span class=n>column_2</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>aggregate_function</span><span class=w> </span><span class=p>(</span><span class=n>column_3</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=k>table</span><span class=w>
</span><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>column_1</span><span class=p>,</span><span class=w>
</span><span class=w>        </span><span class=n>column_2</span><span class=w>
</span><span class=w></span><span class=k>HAVING</span><span class=w>
</span><span class=w>	</span><span class=n>search_condition</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this syntax, the HAVING clause evaluates the search_condition for each group as a Boolean expression. It only includes a group in the final result set if the evaluation is true.</p>
<h5 id=sqlite-having-clause-examples>SQLite HAVING clause examples</h5>
<p>We will use the tracks table in the sample database for demonstration.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png></p>
<p>To find the number of tracks for each album, you use GROUP BY clause as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>albumid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>COUNT</span><span class=p>(</span><span class=n>trackid</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>albumid</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701225/SQLite/SQLite-HAVING-clause-with-COUNT-function_eotp3d.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701225/SQLite/SQLite-HAVING-clause-with-COUNT-function_eotp3d.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701225/SQLite/SQLite-HAVING-clause-with-COUNT-function_eotp3d.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701225/SQLite/SQLite-HAVING-clause-with-COUNT-function_eotp3d.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701225/SQLite/SQLite-HAVING-clause-with-COUNT-function_eotp3d.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701225/SQLite/SQLite-HAVING-clause-with-COUNT-function_eotp3d.jpg></p>
<p>To find the numbers of tracks for the album with id 1, we add a HAVING clause to the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>albumid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>COUNT</span><span class=p>(</span><span class=n>trackid</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>albumid</span><span class=w>
</span><span class=w></span><span class=k>HAVING</span><span class=w> </span><span class=n>albumid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701302/SQLite/SQLite-HAVING-with-WHERE-clause_rwtenb.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701302/SQLite/SQLite-HAVING-with-WHERE-clause_rwtenb.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701302/SQLite/SQLite-HAVING-with-WHERE-clause_rwtenb.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701302/SQLite/SQLite-HAVING-with-WHERE-clause_rwtenb.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701302/SQLite/SQLite-HAVING-with-WHERE-clause_rwtenb.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701302/SQLite/SQLite-HAVING-with-WHERE-clause_rwtenb.jpg></p>
<p>We have referred to the AlbumId column in the HAVING clause.</p>
<p>To find albums that have the number of tracks between 18 and 20, you use the aggregate function in the HAVING clause as shown in the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>   </span><span class=n>albumid</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=k>COUNT</span><span class=p>(</span><span class=n>trackid</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>   </span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>   </span><span class=n>albumid</span><span class=w>
</span><span class=w></span><span class=k>HAVING</span><span class=w> 
</span><span class=w>   </span><span class=k>COUNT</span><span class=p>(</span><span class=n>albumid</span><span class=p>)</span><span class=w> </span><span class=k>BETWEEN</span><span class=w> </span><span class=mi>18</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=mi>20</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>albumid</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701366/SQLite/SQLite-HAVING-COUNT-example_mnx9hz.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701366/SQLite/SQLite-HAVING-COUNT-example_mnx9hz.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701366/SQLite/SQLite-HAVING-COUNT-example_mnx9hz.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701366/SQLite/SQLite-HAVING-COUNT-example_mnx9hz.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701366/SQLite/SQLite-HAVING-COUNT-example_mnx9hz.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701366/SQLite/SQLite-HAVING-COUNT-example_mnx9hz.jpg></p>
<h5 id=sqlite-having-clause-with-inner-join-example>SQLite HAVING clause with INNER JOIN example</h5>
<p>The following statement queries data from tracks and albums tables using inner join to find albums that have the total length greater than 60,000,000 milliseconds.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=p>.</span><span class=n>AlbumId</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>title</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>SUM</span><span class=p>(</span><span class=n>Milliseconds</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>length</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>albums</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>albums</span><span class=p>.</span><span class=n>AlbumId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tracks</span><span class=p>.</span><span class=n>AlbumId</span><span class=w>
</span><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=p>.</span><span class=n>AlbumId</span><span class=w> 
</span><span class=w></span><span class=k>HAVING</span><span class=w>
</span><span class=w>	</span><span class=k>length</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>60000000</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701443/SQLite/SQLite-HAVING-with-greater-than-operator-example_k982jj.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701443/SQLite/SQLite-HAVING-with-greater-than-operator-example_k982jj.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701443/SQLite/SQLite-HAVING-with-greater-than-operator-example_k982jj.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701443/SQLite/SQLite-HAVING-with-greater-than-operator-example_k982jj.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701443/SQLite/SQLite-HAVING-with-greater-than-operator-example_k982jj.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701443/SQLite/SQLite-HAVING-with-greater-than-operator-example_k982jj.jpg></p>
<h3 id=section-6-set-operators>Section 6. Set operators</h3>
<h4 id=union--combine-result-sets-of-multiple-queries-into-a-single-result-set-we-also-discuss-the-differences-between-union-and-union-all-clauses>Union – combine result sets of multiple queries into a single result set. We also discuss the differences between UNION and UNION ALL clauses.</h4>
<h5 id=introduction-to-sqlite-union-operator>Introduction to SQLite UNION operator</h5>
<p>Sometimes, you need to combine data from multiple tables into a complete result set. It may be for tables with similar data within the same database or maybe you need to combine similar data from multiple databases.</p>
<p>To combine rows from two or more queries into a single result set, you use SQLite UNION operator. The following illustrates the basic syntax of the UNION operator:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>query_1</span><span class=w>
</span><span class=w></span><span class=k>UNION</span><span class=w> </span><span class=p>[</span><span class=k>ALL</span><span class=p>]</span><span class=w>
</span><span class=w></span><span class=n>query_2</span><span class=w>
</span><span class=w></span><span class=k>UNION</span><span class=w> </span><span class=p>[</span><span class=k>ALL</span><span class=p>]</span><span class=w>
</span><span class=w></span><span class=n>query_3</span><span class=w>
</span><span class=w></span><span class=p>...;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Both UNION and UNION ALL operators combine rows from result sets into a single result set. The UNION operator removes eliminate duplicate rows, whereas the UNION ALL operator does not.</p>
<p>Because the UNION ALL operator does not remove duplicate rows, it runs faster than the UNION operator.</p>
<p>The following are rules to union data:</p>
<ul>
<li>The number of columns in all queries must be the same.</li>
<li>The corresponding columns must have compatible data types.</li>
<li>The column names of the first query determine the column names of the combined result set.</li>
<li>The GROUP BY and HAVING clauses are applied to each individual query, not the final result set.</li>
<li>The ORDER BY clause is applied to the combined result set, not within the individual result set.</li>
</ul>
<p>Note that the difference between UNION and JOIN e.g., INNER JOIN or LEFT JOIN is that the JOIN clause combines columns from multiple related tables, while UNION combines rows from multiple similar tables.</p>
<p>Suppose we have two tables t1 and t2 with the following structures:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>t1</span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=n>v1</span><span class=w> </span><span class=nb>INT</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w> 
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t1</span><span class=p>(</span><span class=n>v1</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=mi>1</span><span class=p>),(</span><span class=mi>2</span><span class=p>),(</span><span class=mi>3</span><span class=p>);</span><span class=w>
</span><span class=w> 
</span><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>t2</span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=n>v2</span><span class=w> </span><span class=nb>INT</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t2</span><span class=p>(</span><span class=n>v2</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=mi>2</span><span class=p>),(</span><span class=mi>3</span><span class=p>),(</span><span class=mi>4</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following statement combines the result sets of the t1 and t2 table using the UNION operator:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>v1</span><span class=w>
</span><span class=w>  </span><span class=k>FROM</span><span class=w> </span><span class=n>t1</span><span class=w>
</span><span class=w></span><span class=k>UNION</span><span class=w>
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>v2</span><span class=w>
</span><span class=w>  </span><span class=k>FROM</span><span class=w> </span><span class=n>t2</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Here is the output:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701725/SQLite/SQLite-UNION-example_xpq1de.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701725/SQLite/SQLite-UNION-example_xpq1de.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701725/SQLite/SQLite-UNION-example_xpq1de.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701725/SQLite/SQLite-UNION-example_xpq1de.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701725/SQLite/SQLite-UNION-example_xpq1de.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701725/SQLite/SQLite-UNION-example_xpq1de.png></p>
<p>The following picture illustrates the UNION operation of t1 and t2 tables:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701775/SQLite/SQLite-UNION_oqawwq.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701775/SQLite/SQLite-UNION_oqawwq.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701775/SQLite/SQLite-UNION_oqawwq.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701775/SQLite/SQLite-UNION_oqawwq.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701775/SQLite/SQLite-UNION_oqawwq.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701775/SQLite/SQLite-UNION_oqawwq.png></p>
<p>The following statement combines the result sets of t1 and t2 table using the UNION ALL operator:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>v1</span><span class=w>
</span><span class=w>  </span><span class=k>FROM</span><span class=w> </span><span class=n>t1</span><span class=w>
</span><span class=w></span><span class=k>UNION</span><span class=w> </span><span class=k>ALL</span><span class=w>
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>v2</span><span class=w>
</span><span class=w>  </span><span class=k>FROM</span><span class=w> </span><span class=n>t2</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following picture shows the output:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701871/SQLite/SQLite-UNION-ALL-example_sjniko.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701871/SQLite/SQLite-UNION-ALL-example_sjniko.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701871/SQLite/SQLite-UNION-ALL-example_sjniko.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701871/SQLite/SQLite-UNION-ALL-example_sjniko.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701871/SQLite/SQLite-UNION-ALL-example_sjniko.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701871/SQLite/SQLite-UNION-ALL-example_sjniko.png></p>
<p>The following picture illustrates the UNION ALL operation of the result sets of t1 and t2 tables:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701933/SQLite/SQLite-UNION-ALL_i8gyqb.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701933/SQLite/SQLite-UNION-ALL_i8gyqb.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701933/SQLite/SQLite-UNION-ALL_i8gyqb.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701933/SQLite/SQLite-UNION-ALL_i8gyqb.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701933/SQLite/SQLite-UNION-ALL_i8gyqb.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617701933/SQLite/SQLite-UNION-ALL_i8gyqb.png></p>
<h5 id=sqlite-union-examples>SQLite UNION examples</h5>
<p>Let’s take some examples of using the UNION operator.</p>
<ol>
<li>SQLite UNION example
This statement uses the UNION operator to combine names of employees and customers into a single list:</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>FirstName</span><span class=p>,</span><span class=w> </span><span class=n>LastName</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Employee&#39;</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>Type</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>employees</span><span class=w>
</span><span class=w></span><span class=k>UNION</span><span class=w>
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>FirstName</span><span class=p>,</span><span class=w> </span><span class=n>LastName</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Customer&#39;</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>customers</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Here is the output:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702027/SQLite/sqlite-union-example_erlzfd.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702027/SQLite/sqlite-union-example_erlzfd.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702027/SQLite/sqlite-union-example_erlzfd.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702027/SQLite/sqlite-union-example_erlzfd.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702027/SQLite/sqlite-union-example_erlzfd.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702027/SQLite/sqlite-union-example_erlzfd.png></p>
<ol start=2>
<li>SQLite UNION with ORDER BY example
This example uses the UNION operator to combine the names of the employees and customers into a single list. In addition, it uses the ORDER BY clause to sort the name list by first name and last name.</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>FirstName</span><span class=p>,</span><span class=w> </span><span class=n>LastName</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Employee&#39;</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>Type</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>employees</span><span class=w>
</span><span class=w></span><span class=k>UNION</span><span class=w>
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>FirstName</span><span class=p>,</span><span class=w> </span><span class=n>LastName</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Customer&#39;</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>customers</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>FirstName</span><span class=p>,</span><span class=w> </span><span class=n>LastName</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Here is the output:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702120/SQLite/sqlite-union-with-order-by-example_ugtwxj.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702120/SQLite/sqlite-union-with-order-by-example_ugtwxj.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702120/SQLite/sqlite-union-with-order-by-example_ugtwxj.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702120/SQLite/sqlite-union-with-order-by-example_ugtwxj.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702120/SQLite/sqlite-union-with-order-by-example_ugtwxj.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702120/SQLite/sqlite-union-with-order-by-example_ugtwxj.png></p>
<h4 id=except--compare-the-result-sets-of-two-queries-and-returns-distinct-rows-from-the-left-query-that-are-not-output-by-the-right-query>Except – compare the result sets of two queries and returns distinct rows from the left query that are not output by the right query.</h4>
<h5 id=introduction-to-sqlite-except-operator>Introduction to SQLite EXCEPT operator</h5>
<p>SQLite EXCEPT operator compares the result sets of two queries and returns distinct rows from the left query that are not output by the right query.</p>
<p>The following shows the syntax of the EXCEPT operator:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>select_list1</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>table1</span><span class=w>
</span><span class=w></span><span class=k>EXCEPT</span><span class=w>
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>select_list2</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>table2</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>This query must conform to the following rules:</p>
<ul>
<li>First, the number of columns in the select lists of both queries must be the same.</li>
<li>Second, the order of the columns and their types must be comparable.</li>
</ul>
<p>The following statements create two tables t1 and t2 and insert some data into both tables:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>t1</span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=n>v1</span><span class=w> </span><span class=nb>INT</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t1</span><span class=p>(</span><span class=n>v1</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=mi>1</span><span class=p>),(</span><span class=mi>2</span><span class=p>),(</span><span class=mi>3</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>t2</span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=n>v2</span><span class=w> </span><span class=nb>INT</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t2</span><span class=p>(</span><span class=n>v2</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=mi>2</span><span class=p>),(</span><span class=mi>3</span><span class=p>),(</span><span class=mi>4</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following statement illustrates how to use the EXCEPT operator to compare result sets of two queries:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>v1</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>t1</span><span class=w>
</span><span class=w></span><span class=k>EXCEPT</span><span class=w> 
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>v2</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>t2</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The output is 1.</p>
<p>The following picture illustrates the EXCEPT operation:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702566/SQLite/SQLite-EXCEPT-Operator-Illustration_ieifmn.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702566/SQLite/SQLite-EXCEPT-Operator-Illustration_ieifmn.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702566/SQLite/SQLite-EXCEPT-Operator-Illustration_ieifmn.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702566/SQLite/SQLite-EXCEPT-Operator-Illustration_ieifmn.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702566/SQLite/SQLite-EXCEPT-Operator-Illustration_ieifmn.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702566/SQLite/SQLite-EXCEPT-Operator-Illustration_ieifmn.png></p>
<h5 id=sqlite-except-examples>SQLite EXCEPT examples</h5>
<p>We will use the artists and albums tables from the sample database for the demonstration.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png></p>
<p>The following statement finds artist ids of artists who do not have any album in the albums table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>ArtistId</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>artists</span><span class=w>
</span><span class=w></span><span class=k>EXCEPT</span><span class=w>
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>ArtistId</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>albums</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The output is as follows:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702709/SQLite/SQLite-EXCEPT-Example_lbaf4h.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702709/SQLite/SQLite-EXCEPT-Example_lbaf4h.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702709/SQLite/SQLite-EXCEPT-Example_lbaf4h.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702709/SQLite/SQLite-EXCEPT-Example_lbaf4h.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702709/SQLite/SQLite-EXCEPT-Example_lbaf4h.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617702709/SQLite/SQLite-EXCEPT-Example_lbaf4h.png></p>
<h4 id=intersect--compare-the-result-sets-of-two-queries-and-returns-distinct-rows-that-are-output-by-both-queries>Intersect – compare the result sets of two queries and returns distinct rows that are output by both queries.</h4>
<h5 id=introduction-to-sqlite-intersect-operator>Introduction to SQLite INTERSECT operator</h5>
<p>SQLite INTERSECT operator compares the result sets of two queries and returns distinct rows that are output by both queries.</p>
<p>The following illustrates the syntax of the INTERSECT operator:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>select_list1</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>table1</span><span class=w>
</span><span class=w></span><span class=k>INTERSECT</span><span class=w>
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>select_list2</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>table2</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The basic rules for combining the result sets of two queries are as follows:</p>
<ul>
<li>First, the number and the order of the columns in all queries must be the same.</li>
<li>Second, the data types must be comparable.</li>
</ul>
<p>For the demonstration, we will create two tables t1 and t2 and insert some data into both:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>t1</span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=n>v1</span><span class=w> </span><span class=nb>INT</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t1</span><span class=p>(</span><span class=n>v1</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=mi>1</span><span class=p>),(</span><span class=mi>2</span><span class=p>),(</span><span class=mi>3</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>t2</span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=n>v2</span><span class=w> </span><span class=nb>INT</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t2</span><span class=p>(</span><span class=n>v2</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=mi>2</span><span class=p>),(</span><span class=mi>3</span><span class=p>),(</span><span class=mi>4</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following statement illustrates how to use the INTERSECT operator to compare result sets of two queries:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>v1</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>t1</span><span class=w>
</span><span class=w></span><span class=k>INTERSECT</span><span class=w>
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>v2</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>t2</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Here is the output:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703196/SQLite/SQLite-INTERSECT-operator-example_p8cglp.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703196/SQLite/SQLite-INTERSECT-operator-example_p8cglp.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703196/SQLite/SQLite-INTERSECT-operator-example_p8cglp.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703196/SQLite/SQLite-INTERSECT-operator-example_p8cglp.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703196/SQLite/SQLite-INTERSECT-operator-example_p8cglp.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703196/SQLite/SQLite-INTERSECT-operator-example_p8cglp.png></p>
<p>The following picture illustrates the INTERSECT operation:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703247/SQLite/SQLite-INTERSECT_ovma1f.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703247/SQLite/SQLite-INTERSECT_ovma1f.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703247/SQLite/SQLite-INTERSECT_ovma1f.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703247/SQLite/SQLite-INTERSECT_ovma1f.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703247/SQLite/SQLite-INTERSECT_ovma1f.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703247/SQLite/SQLite-INTERSECT_ovma1f.png></p>
<h4 id=sqlite-intersect-example>SQLite INTERSECT example</h4>
<p>For the demonstration, we will use the customers and invoices tables from the sample database.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703320/SQLite/customers_invoices_g1ho0k.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703320/SQLite/customers_invoices_g1ho0k.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703320/SQLite/customers_invoices_g1ho0k.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703320/SQLite/customers_invoices_g1ho0k.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703320/SQLite/customers_invoices_g1ho0k.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703320/SQLite/customers_invoices_g1ho0k.png></p>
<p>The following statement finds customers who have invoices:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>CustomerId</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>customers</span><span class=w>
</span><span class=w></span><span class=k>INTERSECT</span><span class=w>
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>CustomerId</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>invoices</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>CustomerId</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following picture shows the partial output:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703443/SQLite/SQLite-INTERSECT-example_wddm65.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703443/SQLite/SQLite-INTERSECT-example_wddm65.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703443/SQLite/SQLite-INTERSECT-example_wddm65.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703443/SQLite/SQLite-INTERSECT-example_wddm65.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703443/SQLite/SQLite-INTERSECT-example_wddm65.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703443/SQLite/SQLite-INTERSECT-example_wddm65.png></p>
<h3 id=section-7-subquery>Section 7. Subquery</h3>
<h4 id=subquery--introduce-you-to-the-sqlite-subquery-and-correlated-subquery>Subquery – introduce you to the SQLite subquery and correlated subquery.</h4>
<h5 id=introduction-to-sqlite-subquery>Introduction to SQLite subquery</h5>
<p>A subquery is a SELECT statement nested in another statement. See the following statement.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>column_1</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>table_1</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>column_1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=k>SELECT</span><span class=w> </span><span class=n>column_1</span><span class=w> 
</span><span class=w>   </span><span class=k>FROM</span><span class=w> </span><span class=n>table_2</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following query is the outer query:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>column_1</span><span class=w>
</span><span class=w>  </span><span class=k>FROM</span><span class=w> </span><span class=n>table_1</span><span class=w>
</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>colum_1</span><span class=w> </span><span class=o>=</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>And the following query is the subquery.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=n>column_1</span><span class=w>
</span><span class=w>  </span><span class=k>FROM</span><span class=w> </span><span class=n>table_2</span><span class=p>)</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>You must use a pair of parentheses to enclose a subquery. Note that you can nest a subquery inside another subquery with a certain depth.</p>
<p>Typically, a subquery returns a single row as an atomic value, though it may return multiple rows for comparing values with the IN operator.</p>
<p>You can use a subquery in the SELECT, FROM, WHERE, and JOIN clauses.</p>
<h5 id=sqlite-subquery-examples>SQLite subquery examples</h5>
<p>We will use the tracks and albums tables from the sample database for the demonstration.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617694587/SQLite/tracks_albums_inbfdz.png></p>
<ol>
<li>SQLite subquery in the WHERE clause example
You can use a simple subquery as a search condition. For example, the following statement returns all the tracks in the album with the title Let There Be Rock</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>trackid</span><span class=p>,</span><span class=w>
</span><span class=w>       </span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>       </span><span class=n>albumid</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>albumid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=k>SELECT</span><span class=w> </span><span class=n>albumid</span><span class=w>
</span><span class=w>   </span><span class=k>FROM</span><span class=w> </span><span class=n>albums</span><span class=w>
</span><span class=w>   </span><span class=k>WHERE</span><span class=w> </span><span class=n>title</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Let There Be Rock&#39;</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704007/SQLite/SQLite-Subquery-example_pa6t3l.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704007/SQLite/SQLite-Subquery-example_pa6t3l.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704007/SQLite/SQLite-Subquery-example_pa6t3l.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704007/SQLite/SQLite-Subquery-example_pa6t3l.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704007/SQLite/SQLite-Subquery-example_pa6t3l.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704007/SQLite/SQLite-Subquery-example_pa6t3l.png></p>
<p>The subquery returns the id of the album with the title &lsquo;Let There Be Rock&rsquo;. The query uses the equal operator (=) to compare albumid returned by the subquery with the albumid in the tracks table.</p>
<p>If the subquery returns multiple values, you can use the IN operator to check for the existence of a single value against a set of value.</p>
<p>See the following employees and customers table in the sample database:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704078/SQLite/customers_employees_xkya1m.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704078/SQLite/customers_employees_xkya1m.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704078/SQLite/customers_employees_xkya1m.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704078/SQLite/customers_employees_xkya1m.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704078/SQLite/customers_employees_xkya1m.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704078/SQLite/customers_employees_xkya1m.png></p>
<p>For example, the following query returns the customers whose sales representatives are in Canada.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>customerid</span><span class=p>,</span><span class=w>
</span><span class=w>       </span><span class=n>firstname</span><span class=p>,</span><span class=w>
</span><span class=w>       </span><span class=n>lastname</span><span class=w>
</span><span class=w>  </span><span class=k>FROM</span><span class=w> </span><span class=n>customers</span><span class=w>
</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>supportrepid</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>           </span><span class=k>SELECT</span><span class=w> </span><span class=n>employeeid</span><span class=w>
</span><span class=w>             </span><span class=k>FROM</span><span class=w> </span><span class=n>employees</span><span class=w>
</span><span class=w>            </span><span class=k>WHERE</span><span class=w> </span><span class=n>country</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Canada&#39;</span><span class=w>
</span><span class=w>       </span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704161/SQLite/SQLite-Subquery-with-IN-operator-example_dplofz.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704161/SQLite/SQLite-Subquery-with-IN-operator-example_dplofz.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704161/SQLite/SQLite-Subquery-with-IN-operator-example_dplofz.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704161/SQLite/SQLite-Subquery-with-IN-operator-example_dplofz.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704161/SQLite/SQLite-Subquery-with-IN-operator-example_dplofz.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704161/SQLite/SQLite-Subquery-with-IN-operator-example_dplofz.png></p>
<p>The subquery returns a list of ids of the employees who locate in Canada. The outer query uses the IN operator to find the customers who have the sales representative id in the list.</p>
<ol start=2>
<li>SQLite subquery in the FROM clause example</li>
</ol>
<p>Sometimes you want to apply aggregate functions to a column multiple times. For example, first, you want to sum the size of an album and then calculate the average size of all albums. You may come up with the following query.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=k>AVG</span><span class=p>(</span><span class=k>SUM</span><span class=p>(</span><span class=n>bytes</span><span class=p>)</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>albumid</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>This query is not valid.</p>
<p>To fix it, you can use a subquery in the FROM clause as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=k>AVG</span><span class=p>(</span><span class=n>album</span><span class=p>.</span><span class=k>size</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=p>(</span><span class=w>
</span><span class=w>		</span><span class=k>SELECT</span><span class=w>
</span><span class=w>			</span><span class=k>SUM</span><span class=p>(</span><span class=n>bytes</span><span class=p>)</span><span class=w> </span><span class=k>SIZE</span><span class=w>
</span><span class=w>		</span><span class=k>FROM</span><span class=w>
</span><span class=w>			</span><span class=n>tracks</span><span class=w>
</span><span class=w>		</span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>			</span><span class=n>albumid</span><span class=w>
</span><span class=w>	</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>album</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h2 id=avgalbumsize>AVG(album.size)</h2>
<p>338288920.317</p>
<p>In this case, SQLite first executes the subquery in the FROM clause and returns a result set. Then, SQLite uses this result set as a derived table in the outer query.</p>
<h5 id=sqlite-correlated-subquery>SQLite correlated subquery</h5>
<p>All the subqueries you have seen so far can be executed independently. In other words, it does not depend on the outer query.</p>
<p>The correlated subquery is a subquery that uses the values from the outer query. Unlike an ordinal subquery, a correlated subquery cannot be executed independently.</p>
<p>The correlated subquery is not efficient because it is evaluated for each row processed by the outer query.</p>
<p>The following query uses a correlated subquery to return the albums whose size is less than 10MB.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>albumid</span><span class=p>,</span><span class=w>
</span><span class=w>       </span><span class=n>title</span><span class=w>
</span><span class=w>  </span><span class=k>FROM</span><span class=w> </span><span class=n>albums</span><span class=w>
</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=mi>10000000</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>                      </span><span class=k>SELECT</span><span class=w> </span><span class=k>sum</span><span class=p>(</span><span class=n>bytes</span><span class=p>)</span><span class=w> 
</span><span class=w>                        </span><span class=k>FROM</span><span class=w> </span><span class=n>tracks</span><span class=w>
</span><span class=w>                       </span><span class=k>WHERE</span><span class=w> </span><span class=n>tracks</span><span class=p>.</span><span class=n>AlbumId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>albums</span><span class=p>.</span><span class=n>AlbumId</span><span class=w>
</span><span class=w>                  </span><span class=p>)</span><span class=w>
</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>title</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704396/SQLite/SQLite-Correlated-Subquery-Example_ddoidq.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704396/SQLite/SQLite-Correlated-Subquery-Example_ddoidq.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704396/SQLite/SQLite-Correlated-Subquery-Example_ddoidq.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704396/SQLite/SQLite-Correlated-Subquery-Example_ddoidq.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704396/SQLite/SQLite-Correlated-Subquery-Example_ddoidq.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704396/SQLite/SQLite-Correlated-Subquery-Example_ddoidq.png></p>
<p>How the query works.</p>
<ul>
<li>For each row processed in the outer query, the correlated subquery calculates the size of the albums from the tracks that belong the current album using the SUM function.</li>
<li>The predicate in the WHERE clause filters the albums that have the size greater than or equal 10MB (10000000 bytes).</li>
</ul>
<h5 id=sqlite-correlated-subquery-in-the-select-clause-example>SQLite correlated subquery in the SELECT clause example</h5>
<p>The following query uses a correlated subquery in the SELECT clause to return the number of tracks in an album.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>albumid</span><span class=p>,</span><span class=w>
</span><span class=w>       </span><span class=n>title</span><span class=p>,</span><span class=w>
</span><span class=w>       </span><span class=p>(</span><span class=w>
</span><span class=w>           </span><span class=k>SELECT</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>trackid</span><span class=p>)</span><span class=w> 
</span><span class=w>             </span><span class=k>FROM</span><span class=w> </span><span class=n>tracks</span><span class=w>
</span><span class=w>            </span><span class=k>WHERE</span><span class=w> </span><span class=n>tracks</span><span class=p>.</span><span class=n>AlbumId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>albums</span><span class=p>.</span><span class=n>AlbumId</span><span class=w>
</span><span class=w>       </span><span class=p>)</span><span class=w>
</span><span class=w>       </span><span class=n>tracks_count</span><span class=w>
</span><span class=w>  </span><span class=k>FROM</span><span class=w> </span><span class=n>albums</span><span class=w>
</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>tracks_count</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704522/SQLite/SQLite-Subquery-in-SELECT-clause-example_hbts2m.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704522/SQLite/SQLite-Subquery-in-SELECT-clause-example_hbts2m.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704522/SQLite/SQLite-Subquery-in-SELECT-clause-example_hbts2m.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704522/SQLite/SQLite-Subquery-in-SELECT-clause-example_hbts2m.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704522/SQLite/SQLite-Subquery-in-SELECT-clause-example_hbts2m.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617704522/SQLite/SQLite-Subquery-in-SELECT-clause-example_hbts2m.png></p>
<h4 id=exists-operator--test-for-the-existence-of-rows-returned-by-a-subquery>Exists operator – test for the existence of rows returned by a subquery.</h4>
<h5 id=introduction-to-sqlite-exists-operator>Introduction to SQLite EXISTS operator</h5>
<p>The EXISTS operator is a logical operator that checks whether a subquery returns any row.</p>
<p>Here is the basic syntax of the EXISTS operator:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>EXISTS</span><span class=p>(</span><span class=n>subquery</span><span class=p>)</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this syntax, the subquery is a SELECT statement that returns zero or more rows.</p>
<p>If the subquery returns one or more row, the EXISTS operator return true. Otherwise, the EXISTS operator returns false or NULL.</p>
<p>Note that if the subquery returns one row with NULL, the result of the EXISTS operator is still true because the result set contains one row with NULL.</p>
<p>To negate the EXISTS operator, you use the NOT EXISTS operator as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=p>(</span><span class=n>subquery</span><span class=p>)</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The NOT EXISTS operator returns true if the subquery returns no row.</p>
<h5 id=sqlite-exists-operator-example>SQLite EXISTS operator example</h5>
<p>See the following Customers and Invoices tables from the sample database:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703320/SQLite/customers_invoices_g1ho0k.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703320/SQLite/customers_invoices_g1ho0k.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703320/SQLite/customers_invoices_g1ho0k.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703320/SQLite/customers_invoices_g1ho0k.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703320/SQLite/customers_invoices_g1ho0k.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617703320/SQLite/customers_invoices_g1ho0k.png></p>
<p>The following statement finds customers who have invoices:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>    </span><span class=n>CustomerId</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>FirstName</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>LastName</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>Company</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>    </span><span class=n>Customers</span><span class=w> </span><span class=k>c</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>    </span><span class=k>EXISTS</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>        </span><span class=k>SELECT</span><span class=w> 
</span><span class=w>            </span><span class=mi>1</span><span class=w> 
</span><span class=w>        </span><span class=k>FROM</span><span class=w> 
</span><span class=w>            </span><span class=n>Invoices</span><span class=w>
</span><span class=w>        </span><span class=k>WHERE</span><span class=w> 
</span><span class=w>            </span><span class=n>CustomerId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>CustomerId</span><span class=w>
</span><span class=w>    </span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>    </span><span class=n>FirstName</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>LastName</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following picture shows the partial result set:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705202/SQLite/sqlite-exists-example_rqtwgm.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705202/SQLite/sqlite-exists-example_rqtwgm.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705202/SQLite/sqlite-exists-example_rqtwgm.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705202/SQLite/sqlite-exists-example_rqtwgm.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705202/SQLite/sqlite-exists-example_rqtwgm.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705202/SQLite/sqlite-exists-example_rqtwgm.png></p>
<p>In this example, for each customer, the EXISTS operator checks if the customer id exists in the invoices table.</p>
<ul>
<li>
<p>If yes, the subquery returns one row with value 1 that causes the EXISTS operator evaluate to true. Therefore, the query includes the curstomer in the result set.</p>
</li>
<li>
<p>In case the customer id does not exist in the Invoices table, the subquery returns no rows which causes the EXISTS operator to evaluate to false, hence the query does not include the customer in the result set.</p>
</li>
</ul>
<p>Notice that you can use the IN operator instead of EXISTS operator in this case to achieve the same result:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>   </span><span class=n>CustomerId</span><span class=p>,</span><span class=w> 
</span><span class=w>   </span><span class=n>FirstName</span><span class=p>,</span><span class=w> 
</span><span class=w>   </span><span class=n>LastName</span><span class=p>,</span><span class=w> 
</span><span class=w>   </span><span class=n>Company</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>   </span><span class=n>Customers</span><span class=w> </span><span class=k>c</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>   </span><span class=n>CustomerId</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>      </span><span class=k>SELECT</span><span class=w>
</span><span class=w>         </span><span class=n>CustomerId</span><span class=w>
</span><span class=w>      </span><span class=k>FROM</span><span class=w>
</span><span class=w>         </span><span class=n>Invoices</span><span class=w>
</span><span class=w>   </span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>   </span><span class=n>FirstName</span><span class=p>,</span><span class=w> 
</span><span class=w>   </span><span class=n>LastName</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Once the subquery returns the first row, the EXISTS operator stops searching because it can determine the result. On the other hand, the IN operator must scan all rows returned by the subquery to determine the result.</p>
<p>Generally speaking, the EXISTS operator is faster than IN operator if the result set returned by the subquery is large. By contrast, the IN operator is faster than the EXISTS operator if the result set returned by the subquery is small.</p>
<h5 id=sqlite-not-exists-operator-example>SQLite NOT EXISTS operator example</h5>
<p>See the following Artists and Albums table from the sample database:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png></p>
<p>This query find all artists who do not have any album in the Albums table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>   </span><span class=o>*</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>   </span><span class=n>Artists</span><span class=w> </span><span class=n>a</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>   </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>(</span><span class=w>
</span><span class=w>      </span><span class=k>SELECT</span><span class=w>
</span><span class=w>         </span><span class=mi>1</span><span class=w>
</span><span class=w>      </span><span class=k>FROM</span><span class=w>
</span><span class=w>         </span><span class=n>Albums</span><span class=w>
</span><span class=w>      </span><span class=k>WHERE</span><span class=w>
</span><span class=w>         </span><span class=n>ArtistId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>ArtistId</span><span class=w>
</span><span class=w>   </span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>Name</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Here is the partial output:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705462/SQLite/sqlite-not-exists-example_r3jvhz.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705462/SQLite/sqlite-not-exists-example_r3jvhz.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705462/SQLite/sqlite-not-exists-example_r3jvhz.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705462/SQLite/sqlite-not-exists-example_r3jvhz.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705462/SQLite/sqlite-not-exists-example_r3jvhz.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705462/SQLite/sqlite-not-exists-example_r3jvhz.png></p>
<h3 id=section-8-more-querying-techniques>Section 8. More querying techniques</h3>
<h4 id=case--add-conditional-logic-to-the-query>Case – add conditional logic to the query</h4>
<p>The SQLite CASE expression evaluates a list of conditions and returns an expression based on the result of the evaluation.</p>
<p>The CASE expression is similar to the IF-THEN-ELSE statement in other programming languages.</p>
<p>You can use the CASE expression in any clause or statement that accepts a valid expression. For example, you can use the CASE expression in clauses such as WHERE, ORDER BY, HAVING, SELECT and statements such as SELECT, UPDATE, and DELETE.</p>
<p>SQLite provides two forms of the CASE expression: simple CASE and searched CASE.</p>
<h5 id=sqlite-simple-case-expression>SQLite simple CASE expression</h5>
<p>The simple CASE expression compares an expression to a list of expressions to return the result. The following illustrates the syntax of the simple CASE expression.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CASE</span><span class=w> </span><span class=n>case_expression</span><span class=w>
</span><span class=w>     </span><span class=k>WHEN</span><span class=w> </span><span class=n>when_expression_1</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=n>result_1</span><span class=w>
</span><span class=w>     </span><span class=k>WHEN</span><span class=w> </span><span class=n>when_expression_2</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=n>result_2</span><span class=w>
</span><span class=w>     </span><span class=p>...</span><span class=w>
</span><span class=w>     </span><span class=p>[</span><span class=w> </span><span class=k>ELSE</span><span class=w> </span><span class=n>result_else</span><span class=w> </span><span class=p>]</span><span class=w> 
</span><span class=w></span><span class=k>END</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The simple CASE expression compares the case_expression to the expression appears in the first WHEN clause, when_expression_1, for equality.</p>
<p>If the case_expression equals when_expression_1, the simple CASE returns the expression in the corresponding THEN clause, which is the result_1.</p>
<p>Otherwise, the simple CASE expression compares the case_expression with the expression in the next WHEN clause.</p>
<p>In case no case_expression matches the when_expression, the CASE expression returns the result_else in the ELSE clause. If you omit the ELSE clause, the CASE expression returns NULL.</p>
<p>The simple CASE expression uses short-circuit evaluation. In other words, it returns the result and stop evaluating other conditions as soon as it finds a match.</p>
<h5 id=simple-case-example>Simple CASE example</h5>
<p>Let’s take a look at the customers table in the sample database.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705726/SQLite/customers_fjoa0m.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705726/SQLite/customers_fjoa0m.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705726/SQLite/customers_fjoa0m.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705726/SQLite/customers_fjoa0m.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705726/SQLite/customers_fjoa0m.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705726/SQLite/customers_fjoa0m.png></p>
<p>Suppose, you have to make a report of the customer groups with the logic that if a customer locates in the USA, this customer belongs to the domestic group, otherwise the customer belongs to the foreign group.</p>
<p>To make this report, you use the simple CASE expression in the SELECT statement as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>customerid</span><span class=p>,</span><span class=w>
</span><span class=w>       </span><span class=n>firstname</span><span class=p>,</span><span class=w>
</span><span class=w>       </span><span class=n>lastname</span><span class=p>,</span><span class=w>
</span><span class=w>       </span><span class=k>CASE</span><span class=w> </span><span class=n>country</span><span class=w> 
</span><span class=w>           </span><span class=k>WHEN</span><span class=w> </span><span class=s1>&#39;USA&#39;</span><span class=w> 
</span><span class=w>               </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;Domestic&#39;</span><span class=w> 
</span><span class=w>           </span><span class=k>ELSE</span><span class=w> </span><span class=s1>&#39;Foreign&#39;</span><span class=w> 
</span><span class=w>       </span><span class=k>END</span><span class=w> </span><span class=n>CustomerGroup</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> 
</span><span class=w>    </span><span class=n>customers</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> 
</span><span class=w>    </span><span class=n>LastName</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>FirstName</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h5 id=sqlite-searched-case-expression>SQLite searched CASE expression</h5>
<p>The searched CASE expression evaluates a list of expressions to decide the result. Note that the simple CASE expression only compares for equality, while the searched CASE expression can use any forms of comparison.</p>
<p>The following illustrates the syntax of the searched CASE expression.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CASE</span><span class=w>
</span><span class=w>     </span><span class=k>WHEN</span><span class=w> </span><span class=n>bool_expression_1</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=n>result_1</span><span class=w>
</span><span class=w>     </span><span class=k>WHEN</span><span class=w> </span><span class=n>bool_expression_2</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=n>result_2</span><span class=w>
</span><span class=w>     </span><span class=p>[</span><span class=w> </span><span class=k>ELSE</span><span class=w> </span><span class=n>result_else</span><span class=w> </span><span class=p>]</span><span class=w> 
</span><span class=w></span><span class=k>END</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The searched CASE expression evaluates the Boolean expressions in the sequence specified and return the corresponding result if the expression evaluates to true.</p>
<p>In case no expression evaluates to true, the searched CASE expression returns the expression in the ELSE clause if specified. If you omit the ELSE clause, the searched CASE expression returns NULL.</p>
<p>Similar to the simple CASE expression, the searched CASE expression stops the evaluation when a condition is met.</p>
<h5 id=searched-case-example>Searched CASE example</h5>
<p>We will use the tracks table for the demonstration.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617700052/SQLite/tracks_dzsp7k.png></p>
<p>Suppose you want to classify the tracks based on its length such as less a minute, the track is short; between 1 and 5 minutes, the track is medium; greater than 5 minutes, the track is long.</p>
<p>To achieve this, you use the searched CASE expression as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>trackid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>CASE</span><span class=w>
</span><span class=w>		</span><span class=k>WHEN</span><span class=w> </span><span class=n>milliseconds</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>60000</span><span class=w> </span><span class=k>THEN</span><span class=w>
</span><span class=w>			</span><span class=s1>&#39;short&#39;</span><span class=w>
</span><span class=w>		</span><span class=k>WHEN</span><span class=w> </span><span class=n>milliseconds</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>60000</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>milliseconds</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>300000</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;medium&#39;</span><span class=w>
</span><span class=w>		</span><span class=k>ELSE</span><span class=w>
</span><span class=w>			</span><span class=s1>&#39;long&#39;</span><span class=w>
</span><span class=w>		</span><span class=k>END</span><span class=w> </span><span class=n>category</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705930/SQLite/SQLite-Searched-CASE-example_qjfnwb.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705930/SQLite/SQLite-Searched-CASE-example_qjfnwb.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705930/SQLite/SQLite-Searched-CASE-example_qjfnwb.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705930/SQLite/SQLite-Searched-CASE-example_qjfnwb.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705930/SQLite/SQLite-Searched-CASE-example_qjfnwb.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617705930/SQLite/SQLite-Searched-CASE-example_qjfnwb.png></p>
<h3 id=section-9-changing-data>Section 9. Changing data</h3>
<p>This section guides you on how to update data in the table using insert, update, delete, and replace statements.</p>
<h4 id=insert--insert-rows-into-a-table>Insert – insert rows into a table</h4>
<p>To insert data into a table, you use the INSERT statement. SQLite provides various forms of the INSERT statements that allow you to insert a single row, multiple rows, and default values into a table.</p>
<p>In addition, you can insert a row into a table using data provided by a SELECT statement.</p>
<h5 id=sqlite-insert--inserting-a-single-row-into-a-table>SQLite INSERT – inserting a single row into a table</h5>
<p>To insert a single row into a table, you use the following form of the INSERT statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=p>(</span><span class=n>column1</span><span class=p>,</span><span class=n>column2</span><span class=w> </span><span class=p>,..)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=w> </span><span class=n>value1</span><span class=p>,</span><span class=w>	</span><span class=n>value2</span><span class=w> </span><span class=p>,...);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Let’s examine the INSERT statement in more detail:</p>
<ul>
<li>
<p>First, specify the name of the table to which you want to insert data after the INSERT INTO keywords.</p>
</li>
<li>
<p>Second, add a comma-separated list of columns after the table name. The column list is optional. However, it is a good practice to include the column list after the table name.</p>
</li>
<li>
<p>Third, add a comma-separated list of values after the VALUES keyword. If you omit the column list, you have to specify values for all columns in the value list. The number of values in the value list must be the same as the number of columns in the column list.</p>
</li>
</ul>
<p>We will use the artists table in the sample database for the demonstration.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617707929/SQLite/artists_e2hb1s.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617707929/SQLite/artists_e2hb1s.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617707929/SQLite/artists_e2hb1s.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617707929/SQLite/artists_e2hb1s.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617707929/SQLite/artists_e2hb1s.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617707929/SQLite/artists_e2hb1s.png></p>
<p>The following statement insert a new row into the artists table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>artists</span><span class=w> </span><span class=p>(</span><span class=n>name</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;Bud Powell&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Because the ArtistId column is an auto-increment column, you can ignore it in the statement. SQLite automatically geneate a sequential integer number to insert into the ArtistId column.</p>
<p>You can verify the insert operation by using the following SELECT statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>ArtistId</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>Name</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>Artists</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>ArtistId</span><span class=w> </span><span class=k>DESC</span><span class=w>
</span><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708021/SQLite/SQLite-Insert-Example_qkquix.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708021/SQLite/SQLite-Insert-Example_qkquix.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708021/SQLite/SQLite-Insert-Example_qkquix.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708021/SQLite/SQLite-Insert-Example_qkquix.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708021/SQLite/SQLite-Insert-Example_qkquix.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708021/SQLite/SQLite-Insert-Example_qkquix.jpg></p>
<p>As you see, we have a new row in the artists table.</p>
<h5 id=sqlite-insert--inserting-multiple-rows-into-a-table>SQLite INSERT – Inserting multiple rows into a table</h5>
<p>To insert multiple rows into a table, you use the following form of the INSERT statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>table1</span><span class=w> </span><span class=p>(</span><span class=n>column1</span><span class=p>,</span><span class=n>column2</span><span class=w> </span><span class=p>,..)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=w> 
</span><span class=w>   </span><span class=p>(</span><span class=n>value1</span><span class=p>,</span><span class=n>value2</span><span class=w> </span><span class=p>,...),</span><span class=w>
</span><span class=w>   </span><span class=p>(</span><span class=n>value1</span><span class=p>,</span><span class=n>value2</span><span class=w> </span><span class=p>,...),</span><span class=w>
</span><span class=w>    </span><span class=p>...</span><span class=w>
</span><span class=w>   </span><span class=p>(</span><span class=n>value1</span><span class=p>,</span><span class=n>value2</span><span class=w> </span><span class=p>,...);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Each value list following the VALUES clause is a row that will be inserted into the table.</p>
<p>The following example inserts three rows into the artists table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>artists</span><span class=w> </span><span class=p>(</span><span class=n>name</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=w>
</span><span class=w>	</span><span class=p>(</span><span class=s2>&#34;Buddy Rich&#34;</span><span class=p>),</span><span class=w>
</span><span class=w>	</span><span class=p>(</span><span class=s2>&#34;Candido&#34;</span><span class=p>),</span><span class=w>
</span><span class=w>	</span><span class=p>(</span><span class=s2>&#34;Charlie Byrd&#34;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>SQLite issued a message:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>Row</span><span class=w> </span><span class=n>Affected</span><span class=p>:</span><span class=w> </span><span class=mi>3</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>You can verify the result using the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>ArtistId</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>Name</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>artists</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>ArtistId</span><span class=w> </span><span class=k>DESC</span><span class=w>
</span><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=mi>3</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708148/SQLite/SQLite-Insert-Multiple-Example_uzd1d0.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708148/SQLite/SQLite-Insert-Multiple-Example_uzd1d0.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708148/SQLite/SQLite-Insert-Multiple-Example_uzd1d0.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708148/SQLite/SQLite-Insert-Multiple-Example_uzd1d0.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708148/SQLite/SQLite-Insert-Multiple-Example_uzd1d0.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708148/SQLite/SQLite-Insert-Multiple-Example_uzd1d0.jpg></p>
<h5 id=sqlite-insert--inserting-default-values>SQLite INSERT – Inserting default values</h5>
<p>When you create a new table using the CREATE TABLE statement, you can specify default values for columns, or a NULL if a default value is not specified.</p>
<p>The third form of the INSERT statement is INSERT DEFAULT VALUES, which inserts a new row into a table using the default values specified in the column definition or NULL if the default value is not available and the column does not have a NOT NULL constraint.</p>
<p>For example, the following statement inserts a new row into the artists table using INSERT DEFAULT VALUES:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>artists</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=k>VALUES</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>To verify the insert, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>ArtistId</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>Name</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>artists</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>ArtistId</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708283/SQLite/SQLite-Insert-default-values_x6whpi.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708283/SQLite/SQLite-Insert-default-values_x6whpi.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708283/SQLite/SQLite-Insert-default-values_x6whpi.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708283/SQLite/SQLite-Insert-default-values_x6whpi.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708283/SQLite/SQLite-Insert-default-values_x6whpi.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708283/SQLite/SQLite-Insert-default-values_x6whpi.jpg></p>
<p>The default value of the ArtistId column is the next sequential integer . However, the name column does not have any default value, therefore, the INSERT DEFAULT VALUES statement inserts NULL into it.</p>
<h5 id=sqlite-insert--inserting-new-rows-with-data-provided-by-a-select-statement>SQLite INSERT – Inserting new rows with data provided by a SELECT statement</h5>
<p>Suppose you want to backup the artists table, you can follow these steps:</p>
<p>First, create a new table named artists_backup as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>artists_backup</span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=n>ArtistId</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=n>AUTOINCREMENT</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>Name</span><span class=w> </span><span class=n>NVARCHAR</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>To insert data into the artists_backup table with the data from the artists table, you use the INSERT INTO SELECT statement as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>artists_backup</span><span class=w> 
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>ArtistId</span><span class=p>,</span><span class=w> </span><span class=n>Name</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>artists</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>If you query data from the artists_backup table, you will see all data in the artists table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>artists_backup</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708465/SQLite/SQLite-Insert-Into-Select_befkdo.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708465/SQLite/SQLite-Insert-Into-Select_befkdo.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708465/SQLite/SQLite-Insert-Into-Select_befkdo.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708465/SQLite/SQLite-Insert-Into-Select_befkdo.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708465/SQLite/SQLite-Insert-Into-Select_befkdo.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708465/SQLite/SQLite-Insert-Into-Select_befkdo.jpg></p>
<h4 id=update--update-existing-rows-in-a-table>Update – update existing rows in a table.</h4>
<h5 id=introduction-to-sqlite-update-statement>Introduction to SQLite UPDATE statement</h5>
<p>To update existing data in a table, you use SQLite UPDATE statement. The following illustrates the syntax of the UPDATE statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>UPDATE</span><span class=w> </span><span class=k>table</span><span class=w>
</span><span class=w></span><span class=k>SET</span><span class=w> </span><span class=n>column_1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>new_value_1</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>column_2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>new_value_2</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>    </span><span class=n>search_condition</span><span class=w> 
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=n>column_or_expression</span><span class=w>
</span><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=k>row_count</span><span class=w> </span><span class=k>OFFSET</span><span class=w> </span><span class=k>offset</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this syntax:</p>
<ul>
<li>First, specify the table where you want to update after the UPDATE clause.</li>
<li>Second, set new value for each column of the table in the SET clause.</li>
<li>Third, specify rows to update using a condition in the WHERE clause. The WHERE clause is optional. If you skip it, the UPDATE statement will update data in all rows of the table.</li>
<li>Finally, use the ORDER BY and LIMIT clauses in the UPDATE statement to specify the number of rows to update.</li>
</ul>
<p>Notice that if use a negative value in the LIMIT clause, SQLite assumes that there are no limit and updates all rows that meet the condition in the preceding WHERE clause.</p>
<p>The ORDER BY clause should always goes with the LIMIT clause to specify exactly which rows to be updated. Otherwise, you will never know which row will be actually updated; because without the ORDER BY clause, the order of rows in the table is unspecified.</p>
<h5 id=sqlite-update-statement-examples>SQLite UPDATE statement examples</h5>
<p>We will use the employees table in the sample database to demonstrate the UPDATE statement.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697644/SQLite/employees_x3wxsp.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697644/SQLite/employees_x3wxsp.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697644/SQLite/employees_x3wxsp.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697644/SQLite/employees_x3wxsp.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697644/SQLite/employees_x3wxsp.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617697644/SQLite/employees_x3wxsp.png></p>
<p>The following SELECT statement gets partial data from the employees table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>employeeid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>firstname</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>lastname</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>title</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>email</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>employees</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708775/SQLite/SQLite-Update-Table-Example_drfwnf.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708775/SQLite/SQLite-Update-Table-Example_drfwnf.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708775/SQLite/SQLite-Update-Table-Example_drfwnf.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708775/SQLite/SQLite-Update-Table-Example_drfwnf.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708775/SQLite/SQLite-Update-Table-Example_drfwnf.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617708775/SQLite/SQLite-Update-Table-Example_drfwnf.jpg></p>
<ol>
<li>Update one column example
Suppose, Jane got married and she wanted to change her last name to her husband’s last name i.e., Smith. In this case, you can update Jane’s last name using the following statement:</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>UPDATE</span><span class=w> </span><span class=n>employees</span><span class=w>
</span><span class=w></span><span class=k>SET</span><span class=w> </span><span class=n>lastname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Smith&#39;</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>employeeid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>3</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The expression in the WHERE clause makes sure that we update Jane’s record only. We set the lastname column to a literal string &lsquo;Smith&rsquo;.</p>
<p>To verify the UPDATE, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>employeeid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>firstname</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>lastname</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>title</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>email</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>employees</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>employeeid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>3</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709034/SQLite/SQLite-Update-One-Column-Example_hsar7a.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709034/SQLite/SQLite-Update-One-Column-Example_hsar7a.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709034/SQLite/SQLite-Update-One-Column-Example_hsar7a.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709034/SQLite/SQLite-Update-One-Column-Example_hsar7a.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709034/SQLite/SQLite-Update-One-Column-Example_hsar7a.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709034/SQLite/SQLite-Update-One-Column-Example_hsar7a.jpg></p>
<ol start=2>
<li>Update multiple columns example
Suppose Park Margaret locates in Toronto and you want to change his address, city, and state information. You can use the UPDATE statement to update multiple columns as follows:</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>UPDATE</span><span class=w> </span><span class=n>employees</span><span class=w>
</span><span class=w></span><span class=k>SET</span><span class=w> </span><span class=n>city</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Toronto&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=k>state</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;ON&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>postalcode</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;M5P 2N7&#39;</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>    </span><span class=n>employeeid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>4</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>To verify the UPDATE, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>employeeid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>firstname</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>lastname</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>state</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>city</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>PostalCode</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>employees</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>employeeid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>4</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709259/SQLite/SQLite-Update-Multiple-Columns-Example_w2izkx.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709259/SQLite/SQLite-Update-Multiple-Columns-Example_w2izkx.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709259/SQLite/SQLite-Update-Multiple-Columns-Example_w2izkx.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709259/SQLite/SQLite-Update-Multiple-Columns-Example_w2izkx.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709259/SQLite/SQLite-Update-Multiple-Columns-Example_w2izkx.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709259/SQLite/SQLite-Update-Multiple-Columns-Example_w2izkx.jpg></p>
<ol start=3>
<li>Update with ORDER BY and LIMIT clauses example
Notice that you need to build SQLite with SQLITE_ENABLE_UPDATE_DELETE_LIMIT option in order to perform UPDATE statement with optional ORDER BY and LIMIT clauses.</li>
</ol>
<p>Let’s check the email addresses of employees in the employees table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>employeeid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>firstname</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>lastname</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>email</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>employees</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709501/SQLite/SQLite-Update-Order-By-Limit_rcp4fo.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709501/SQLite/SQLite-Update-Order-By-Limit_rcp4fo.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709501/SQLite/SQLite-Update-Order-By-Limit_rcp4fo.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709501/SQLite/SQLite-Update-Order-By-Limit_rcp4fo.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709501/SQLite/SQLite-Update-Order-By-Limit_rcp4fo.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709501/SQLite/SQLite-Update-Order-By-Limit_rcp4fo.jpg></p>
<p>To update one row in the employees table, you use LIMIT 1 clause. To make sure that you update the first row of employees sorted by the first name, you add the ORDER BY firstname clause.</p>
<p>So the following statement updates email of Andrew Adams:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>UPDATE</span><span class=w> </span><span class=n>employees</span><span class=w>
</span><span class=w></span><span class=k>SET</span><span class=w> </span><span class=n>email</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>LOWER</span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=n>firstname</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=s2>&#34;.&#34;</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>lastname</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=s2>&#34;@chinookcorp.com&#34;</span><span class=w>
</span><span class=w></span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>	</span><span class=n>firstname</span><span class=w>
</span><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709612/SQLite/SQLite-Update-Order-By-Limit-Example_ady0ms.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709612/SQLite/SQLite-Update-Order-By-Limit-Example_ady0ms.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709612/SQLite/SQLite-Update-Order-By-Limit-Example_ady0ms.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709612/SQLite/SQLite-Update-Order-By-Limit-Example_ady0ms.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709612/SQLite/SQLite-Update-Order-By-Limit-Example_ady0ms.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709612/SQLite/SQLite-Update-Order-By-Limit-Example_ady0ms.jpg></p>
<p>The new email is the combination of the first name, dot (.), last name and the suffix @chinookcorp.com</p>
<p>The LOWER() function converts the email to lower case.</p>
<ol start=4>
<li>Update all rows example
To update all rows in the employees table, you skip the WHERE clause. For example, the following UPDATE statement changes all email addresses of all employees to lowercase:</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>UPDATE</span><span class=w> </span><span class=n>employees</span><span class=w>
</span><span class=w></span><span class=k>SET</span><span class=w> </span><span class=n>email</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>LOWER</span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=n>firstname</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=s2>&#34;.&#34;</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>lastname</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=s2>&#34;@chinookcorp.com&#34;</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709685/SQLite/SQLite-Update-all-Rows-Example_zilhc2.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709685/SQLite/SQLite-Update-all-Rows-Example_zilhc2.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709685/SQLite/SQLite-Update-all-Rows-Example_zilhc2.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709685/SQLite/SQLite-Update-all-Rows-Example_zilhc2.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709685/SQLite/SQLite-Update-all-Rows-Example_zilhc2.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617709685/SQLite/SQLite-Update-all-Rows-Example_zilhc2.jpg></p>
<h4 id=delete--delete-rows-from-a-table>Delete – delete rows from a table.</h4>
<h5 id=introduction-to-sqlite-delete-statement>Introduction to SQLite DELETE statement</h5>
<p>You have learned how to insert a new row into a table and update existing data of a table. Sometimes, you need to remove rows from a table. In this case, you use SQLite DELETE statement.</p>
<p>The SQLite DELETE statement allows you to delete one row, multiple rows, and all rows in a table. The syntax of the SQLite DELETE statement is as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DELETE</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=k>table</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>search_condition</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this syntax:</p>
<ul>
<li>
<p>First, specify the name of the table which you want to remove rows after the DELETE FROM keywords.</p>
</li>
<li>
<p>Second, add a search condition in the WHERE clause to identify the rows to remove. The WHERE clause is an optional part of the DELETE statement. If you omit the WHERE clause, the DELETE statement will delete all rows in the table.</p>
</li>
</ul>
<p>SQLite also provides an extension to the DELETE statement by adding ORDER BY and LIMIT clauses. If you compile SQLite with the SQLITE_ENABLE_UPDATE_DELETE_LIMIT compile-time option, you can use the ORDER BY and LIMIT clause in the DELETE statement like the following form:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DELETE</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=k>table</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>search_condition</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>criteria</span><span class=w>
</span><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=k>row_count</span><span class=w> </span><span class=k>OFFSET</span><span class=w> </span><span class=k>offset</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The ORDER BY clause sorts the rows filtered by the preceding search_condition in the WHERE clause and the LIMIT clause specifies the number of rows that to be deleted.</p>
<p>Notice that when you use the DELETE statement without a WHERE clause on a table that has no triggers. SQLite will delete all rows in one shot instead of visiting and deleting each individual row. This feature is known as truncate optimization.</p>
<h5 id=sqlite-delete-statement-examples>SQLite DELETE statement examples</h5>
<p>We will use the artists_backup table created in the how to insert rows into table tutorial.</p>
<p>If you did not follow that tutorial, you can create the artists_backup table and insert data into it using the following script:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=c1>-- create artists backup table
</span><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>artists_backup</span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=n>artistid</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=n>AUTOINCREMENT</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>name</span><span class=w> </span><span class=n>NVARCHAR</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=c1>-- populate data from the artists table
</span><span class=c1></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>artists_backup</span><span class=w> 
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>artistid</span><span class=p>,</span><span class=n>name</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>artists</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following statement returns all rows from the artists_backup table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>artistid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>artists_backup</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617713492/SQLite/SQLite-Delete-Table-Example_fhgdjz.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617713492/SQLite/SQLite-Delete-Table-Example_fhgdjz.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617713492/SQLite/SQLite-Delete-Table-Example_fhgdjz.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617713492/SQLite/SQLite-Delete-Table-Example_fhgdjz.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617713492/SQLite/SQLite-Delete-Table-Example_fhgdjz.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617713492/SQLite/SQLite-Delete-Table-Example_fhgdjz.jpg></p>
<p>We have 280 rows in the artists_backup table.</p>
<p>To remove an artist with id 1, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DELETE</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>artists_backup</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>artistid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Because we use artistid to identify the artist, the statement removed exactly 1 row.</p>
<p>Suppose you want to delete artists whose names contain the word Santana:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DELETE</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>artists_backup</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;%Santana%&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>There are 9 rows whose values in the name column contain the word Santana therefore, these 9 rows were deleted.</p>
<p>To remove all rows in the artists_backup table, you just need to omit the WHERE clause as the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DELETE</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>artists_backup</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=replace--insert-a-new-row-or-replace-the-existing-row-in-a-table>Replace – insert a new row or replace the existing row in a table.</h4>
<h5 id=introduction-to-the-sqlite-replace-statement>Introduction to the SQLite REPLACE statement</h5>
<p>The idea of the REPLACE statement is that when a UNIQUE or PRIMARY KEY constraint violation occurs, it does the following:</p>
<ul>
<li>First, delete the existing row that causes a constraint violation.</li>
<li>Second, insert a new row.</li>
</ul>
<p>In the second step, if any constraint violation e.g., NOT NULL constraint occurs, the REPLACE statement will abort the action and roll back the transaction.</p>
<p>The following illustrates the syntax of the REPLACE statement.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=k>REPLACE</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=k>table</span><span class=p>(</span><span class=n>column_list</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=n>value_list</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Or in a short form:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>REPLACE</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=k>table</span><span class=p>(</span><span class=n>column_list</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=n>value_list</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Let’s take a look at some examples of using the SQLite REPLACE statement to understand how it works.</p>
<h5 id=the-sqlite-replace-statement-examples>The SQLite REPLACE statement examples</h5>
<p>First, create a new table named positions with the following structure.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=n>positions</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=n>id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>title</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>min_salary</span><span class=w> </span><span class=nb>NUMERIC</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Second, insert some rows into the positions table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>INSERT INTO positions (title, min_salary)
VALUES (&#39;DBA&#39;, 120000),
       (&#39;Developer&#39;, 100000),
       (&#39;Architect&#39;, 150000);
</code></pre></td></tr></table>
</div>
</div><p>Third, verify the insert using the following SELECT statement.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>positions</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715399/SQLite/SQLite-REPLACE-positions-table_df5oqm.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715399/SQLite/SQLite-REPLACE-positions-table_df5oqm.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715399/SQLite/SQLite-REPLACE-positions-table_df5oqm.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715399/SQLite/SQLite-REPLACE-positions-table_df5oqm.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715399/SQLite/SQLite-REPLACE-positions-table_df5oqm.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715399/SQLite/SQLite-REPLACE-positions-table_df5oqm.jpg></p>
<p>The following statement creates a unique index on the title column of the positions table to ensure that it doesn’t have any duplicate position title:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>UNIQUE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>idx_positions_title</span><span class=w> 
</span><span class=w></span><span class=k>ON</span><span class=w> </span><span class=n>positions</span><span class=w> </span><span class=p>(</span><span class=n>title</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Suppose, you want to add a position into the positions table if it does not exist, in case the position exists, update the current one.</p>
<p>The following REPLACE statement inserts a new row into the positions table because the position title Full Stack Developer is not in the positions table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>REPLACE</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>positions</span><span class=w> </span><span class=p>(</span><span class=n>title</span><span class=p>,</span><span class=w> </span><span class=n>min_salary</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;Full Stack Developer&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>140000</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715586/SQLite/SQLite-REPLACE-insert-new-row_mh6jan.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715586/SQLite/SQLite-REPLACE-insert-new-row_mh6jan.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715586/SQLite/SQLite-REPLACE-insert-new-row_mh6jan.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715586/SQLite/SQLite-REPLACE-insert-new-row_mh6jan.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715586/SQLite/SQLite-REPLACE-insert-new-row_mh6jan.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715586/SQLite/SQLite-REPLACE-insert-new-row_mh6jan.jpg></p>
<p>You can verify the REPLACE operation using the SELECT statement.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>id</span><span class=p>,</span><span class=n>title</span><span class=p>,</span><span class=n>min_salary</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>positions</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>See the following statement.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>REPLACE</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>positions</span><span class=w> </span><span class=p>(</span><span class=n>title</span><span class=p>,</span><span class=w> </span><span class=n>min_salary</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;DBA&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>170000</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715685/SQLite/SQLite-REPLACE-replace_n1igt0.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715685/SQLite/SQLite-REPLACE-replace_n1igt0.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715685/SQLite/SQLite-REPLACE-replace_n1igt0.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715685/SQLite/SQLite-REPLACE-replace_n1igt0.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715685/SQLite/SQLite-REPLACE-replace_n1igt0.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617715685/SQLite/SQLite-REPLACE-replace_n1igt0.jpg></p>
<p>First, SQLite checked the UNIQUE constraint.</p>
<p>Second, because this statement violated the UNIQUE constraint by trying to add the DBA title that already exists, SQLite deleted the existing row.</p>
<p>Third, SQLite inserted a new row with the data provided by the REPLACE statement.</p>
<p>Notice that the REPLACE statement means INSERT or REPLACE, not INSERT or UPDATE.</p>
<p>See the following statement.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>REPLACE</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>positions</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>min_salary</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>110000</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>What the statement tried to do is to update the min_salary for the position with id 2, which is the developer.</p>
<p>First, the position with id 2 already exists, the REPLACE statement removes it.</p>
<p>Then, SQLite tried to insert a new row with two columns: ( id, min_salary). However, it violates the NOT NULL constraint of the title column. Therefore, SQLite rolls back the transaction.</p>
<p>If the title column does not have the NOT NULL constraint, the REPLACE statement will insert a new row whose the title column is NULL.</p>
<h3 id=section-10-transactions>Section 10. Transactions</h3>
<h4 id=transaction--show-you-how-to-handle-transactions-in-sqlite>Transaction – show you how to handle transactions in SQLite.</h4>
<h5 id=sqlite--acid>SQLite & ACID</h5>
<p>SQLite is a transactional database that all changes and queries are atomic, consistent, isolated, and durable (ACID).</p>
<p>SQLite guarantees all the transactions are ACID compliant even if the transaction is interrupted by a program crash, operation system dump, or power failure to the computer.</p>
<ul>
<li>
<p><strong>Atomic</strong>: a transaction should be atomic. It means that a change cannot be broken down into smaller ones. When you commit a transaction, either the entire transaction is applied or not.</p>
</li>
<li>
<p><strong>Consistent</strong>: a transaction must ensure to change the database from one valid state to another. When a transaction starts and executes a statement to modify data, the database becomes inconsistent. However, when the transaction is committed or rolled back, it is important that the transaction must keep the database consistent.</p>
</li>
<li>
<p><strong>Isolation</strong>: a pending transaction performed by a session must be isolated from other sessions. When a session starts a transaction and executes the INSERT or UPDATE statement to change the data, these changes are only visible to the current session, not others. On the other hand, the changes committed by other sessions after the transaction started should not be visible to the current session.</p>
</li>
<li>
<p><strong>Durable</strong>: if a transaction is successfully committed, the changes must be permanent in the database regardless of the condition such as power failure or program crash. On the contrary, if the program crashes before the transaction is committed, the change should not persist.</p>
</li>
</ul>
<h5 id=sqlite-transaction-statements>SQLite transaction statements</h5>
<p>By default, SQLite operates in auto-commit mode. It means that for each command, SQLite starts, processes, and commits the transaction automatically.</p>
<p>To start a transaction explicitly, you use the following steps:</p>
<p>First, open a transaction by issuing the BEGIN TRANSACTION command.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>BEGIN</span><span class=w> </span><span class=k>TRANSACTION</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>After executing the statement BEGIN TRANSACTION, the transaction is open until it is explicitly committed or rolled back.</p>
<p>Second, issue SQL statements to select or update data in the database. Note that the change is only visible to the current session (or client).</p>
<p>Third, commit the changes to the database by using the COMMIT or COMMIT TRANSACTION statement.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>COMMIT</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>If you do not want to save the changes, you can roll back using the ROLLBACK or ROLLBACK TRANSACTION statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>ROLLBACK</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h5 id=sqlite-transaction-example>SQLite transaction example</h5>
<p>We will create two new tables: accounts and account_changes for the demonstration.</p>
<p>The accounts table stores data about the account numbers and their balances. The account_changes table stores the changes of the accounts.</p>
<p>First, create the accounts and account_changes tables by using the following CREATE TABLE statements:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>accounts</span><span class=w> </span><span class=p>(</span><span class=w> 
</span><span class=w>	</span><span class=n>account_no</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w> 
</span><span class=w>	</span><span class=n>balance</span><span class=w> </span><span class=nb>DECIMAL</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>(</span><span class=n>account_no</span><span class=p>),</span><span class=w>
</span><span class=w>        </span><span class=k>CHECK</span><span class=p>(</span><span class=n>balance</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>account_changes</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=n>change_no</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>account_no</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w> 
</span><span class=w>	</span><span class=n>flag</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w> 
</span><span class=w>	</span><span class=n>amount</span><span class=w> </span><span class=nb>DECIMAL</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w> 
</span><span class=w>	</span><span class=n>changed_at</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> 
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Second, insert some sample data into the accounts table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>accounts</span><span class=w> </span><span class=p>(</span><span class=n>account_no</span><span class=p>,</span><span class=n>balance</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>100</span><span class=p>,</span><span class=mi>20100</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>accounts</span><span class=w> </span><span class=p>(</span><span class=n>account_no</span><span class=p>,</span><span class=n>balance</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>200</span><span class=p>,</span><span class=mi>10100</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Third, query data from the accounts table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>accounts</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716224/SQLite/sqlite-transaction-accounts-table_zjxa4w.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716224/SQLite/sqlite-transaction-accounts-table_zjxa4w.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716224/SQLite/sqlite-transaction-accounts-table_zjxa4w.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716224/SQLite/sqlite-transaction-accounts-table_zjxa4w.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716224/SQLite/sqlite-transaction-accounts-table_zjxa4w.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716224/SQLite/sqlite-transaction-accounts-table_zjxa4w.png></p>
<p>Fourth, transfer 1000 from account 100 to 200, and log the changes to the table account_changes in a single transaction.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>BEGIN</span><span class=w> </span><span class=k>TRANSACTION</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>UPDATE</span><span class=w> </span><span class=n>accounts</span><span class=w>
</span><span class=w>   </span><span class=k>SET</span><span class=w> </span><span class=n>balance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>balance</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1000</span><span class=w>
</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>account_no</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>100</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>UPDATE</span><span class=w> </span><span class=n>accounts</span><span class=w>
</span><span class=w>   </span><span class=k>SET</span><span class=w> </span><span class=n>balance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>balance</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1000</span><span class=w>
</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>account_no</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>200</span><span class=p>;</span><span class=w>
</span><span class=w> 
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>account_changes</span><span class=p>(</span><span class=n>account_no</span><span class=p>,</span><span class=n>flag</span><span class=p>,</span><span class=n>amount</span><span class=p>,</span><span class=n>changed_at</span><span class=p>)</span><span class=w> 
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=mi>100</span><span class=p>,</span><span class=s1>&#39;-&#39;</span><span class=p>,</span><span class=mi>1000</span><span class=p>,</span><span class=n>datetime</span><span class=p>(</span><span class=s1>&#39;now&#39;</span><span class=p>));</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>account_changes</span><span class=p>(</span><span class=n>account_no</span><span class=p>,</span><span class=n>flag</span><span class=p>,</span><span class=n>amount</span><span class=p>,</span><span class=n>changed_at</span><span class=p>)</span><span class=w> 
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=mi>200</span><span class=p>,</span><span class=s1>&#39;+&#39;</span><span class=p>,</span><span class=mi>1000</span><span class=p>,</span><span class=n>datetime</span><span class=p>(</span><span class=s1>&#39;now&#39;</span><span class=p>));</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>COMMIT</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Fifth, query data from the accounts table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>accounts</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716324/SQLite/sqlite-transaction-accounts-table-after-modifying_a09qwi.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716324/SQLite/sqlite-transaction-accounts-table-after-modifying_a09qwi.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716324/SQLite/sqlite-transaction-accounts-table-after-modifying_a09qwi.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716324/SQLite/sqlite-transaction-accounts-table-after-modifying_a09qwi.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716324/SQLite/sqlite-transaction-accounts-table-after-modifying_a09qwi.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716324/SQLite/sqlite-transaction-accounts-table-after-modifying_a09qwi.png></p>
<p>As you can see, balances have been updated successfully.</p>
<p>Sixth, query the contents of the account_changes table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>account_changes</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716405/SQLite/sqlite-transaction-log-table_bvl9m9.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716405/SQLite/sqlite-transaction-log-table_bvl9m9.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716405/SQLite/sqlite-transaction-log-table_bvl9m9.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716405/SQLite/sqlite-transaction-log-table_bvl9m9.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716405/SQLite/sqlite-transaction-log-table_bvl9m9.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716405/SQLite/sqlite-transaction-log-table_bvl9m9.png></p>
<p>Let’s take another example of rolling back a transaction.</p>
<p>First, attempt to deduct 20,000 from account 100:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>BEGIN</span><span class=w> </span><span class=k>TRANSACTION</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>UPDATE</span><span class=w> </span><span class=n>accounts</span><span class=w>
</span><span class=w>   </span><span class=k>SET</span><span class=w> </span><span class=n>balance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>balance</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>20000</span><span class=w>
</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>account_no</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>100</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>account_changes</span><span class=p>(</span><span class=n>account_no</span><span class=p>,</span><span class=n>flag</span><span class=p>,</span><span class=n>amount</span><span class=p>,</span><span class=n>changed_at</span><span class=p>)</span><span class=w> 
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=mi>100</span><span class=p>,</span><span class=s1>&#39;-&#39;</span><span class=p>,</span><span class=mi>20000</span><span class=p>,</span><span class=n>datetime</span><span class=p>(</span><span class=s1>&#39;now&#39;</span><span class=p>));</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>SQLite issued an error due to not enough balance:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=p>[</span><span class=n>SQLITE_CONSTRAINT</span><span class=p>]</span><span class=w>  </span><span class=k>Abort</span><span class=w> </span><span class=n>due</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=k>constraint</span><span class=w> </span><span class=n>violation</span><span class=w> </span><span class=p>(</span><span class=k>CHECK</span><span class=w> </span><span class=k>constraint</span><span class=w> </span><span class=n>failed</span><span class=p>:</span><span class=w> </span><span class=n>accounts</span><span class=p>)</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>However, the log has been saved to the account_changes table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>account_changes</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716542/SQLite/sqlite-transaction-rollback-example_yu9vhv.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716542/SQLite/sqlite-transaction-rollback-example_yu9vhv.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716542/SQLite/sqlite-transaction-rollback-example_yu9vhv.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716542/SQLite/sqlite-transaction-rollback-example_yu9vhv.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716542/SQLite/sqlite-transaction-rollback-example_yu9vhv.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716542/SQLite/sqlite-transaction-rollback-example_yu9vhv.png></p>
<p>Second, roll back the transaction by using the ROLLBACK statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>ROLLBACK</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Finally, query data from the account_changes table, you will see that the change no #3 is not there anymore:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>account_changes</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716640/SQLite/sqlite-transaction-rollback-change_wn0upw.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716640/SQLite/sqlite-transaction-rollback-change_wn0upw.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716640/SQLite/sqlite-transaction-rollback-change_wn0upw.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716640/SQLite/sqlite-transaction-rollback-change_wn0upw.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716640/SQLite/sqlite-transaction-rollback-change_wn0upw.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617716640/SQLite/sqlite-transaction-rollback-change_wn0upw.png></p>
<h3 id=section-11-data-definition>Section 11. Data definition</h3>
<p>In this section, you’ll learn how to create database objects such as tables, views, indexes using SQL data definition language.</p>
<h4 id=sqlite-data-types--introduce-you-to-the-sqlite-dynamic-type-system-and-its-important-concepts-storage-classes-manifest-typing-and-type-affinity>SQLite Data Types – introduce you to the SQLite dynamic type system and its important concepts: storage classes, manifest typing, and type affinity.</h4>
<h5 id=introduction-to-sqlite-data-types>Introduction to SQLite data types</h5>
<p>If you come from other database systems such as MySQL and PostgreSQL, you notice that they use static typing. It means when you declare a column with a specific data type, that column can store only data of the declared data type.</p>
<p>Different from other database systems, SQLite uses dynamic type system. In other words, a value stored in a column determines its data type, not the column’s data type.</p>
<p>In addition, you don’t have to declare a specific data type for a column when you create a table. In case you declare a column with the integer data type, you can store any kind of data types such as text and BLOB, SQLite will not complain about this.</p>
<p>SQLite provides five primitive data types which are referred to as storage classes.</p>
<p>Storage classes describe the formats that SQLite uses to store data on disk. A storage class is more general than a data type e.g., INTEGER storage class includes 6 different types of integers. In most cases, you can use storage classes and data types interchangeably.</p>
<p>The following table illustrates 5 storage classes in SQLite:</p>
<table>
<thead>
<tr>
<th>Storage Class</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>NULL</td>
<td>NULL values mean missing information or unknown.</td>
</tr>
<tr>
<td>INTEGER</td>
<td>Integer values are whole numbers (either positive or negative). An integer can have variable sizes such as 1, 2,3, 4, or 8 bytes.</td>
</tr>
<tr>
<td>REAL</td>
<td>Real values are real numbers with decimal values that use 8-byte floats.</td>
</tr>
<tr>
<td>TEXT</td>
<td>TEXT is used to store character data. The maximum length of TEXT is unlimited. SQLite supports various character encodings.</td>
</tr>
<tr>
<td>BLOB</td>
<td>BLOB stands for a binary large object that can store any kind of data. The maximum size of BLOB is, theoretically, unlimited.</td>
</tr>
</tbody>
</table>
<p>SQLite determines the data type of a value based on its data type according to the following rules:</p>
<ul>
<li>If a literal has no enclosing quotes and decimal point or exponent, SQLite assigns the INTEGER storage class.</li>
<li>If a literal is enclosed by single or double quotes, SQLite assigns the TEXT storage class.</li>
<li>If a literal does not have quote nor decimal point nor exponent, SQLite assigns REAL storage class.</li>
<li>If a literal is NULL without quotes, it assigned NULL storage class.</li>
<li>If a literal has the X’ABCD’ or x ‘abcd’, SQLite assigned BLOB storage class.</li>
</ul>
<p>SQLite does not support built-in date and time storage classes. However, you can use the TEXT, INT, or REAL to store date and time values. For the detailed information on how to handle date and time values, check it out the SQLite date and time tutorial.</p>
<p>SQLites provides the typeof() function that allows you to check the storage class of a value based on its format. See the following example:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT       
</span><span class=go>        typeof(100),
</span><span class=go>        typeof(10.0),
</span><span class=go>        typeof(&#39;100&#39;),
</span><span class=go>        typeof(x&#39;1000&#39;),
</span><span class=go>        typeof(NULL);
</span><span class=go>typeof(100)  typeof(10.0)  typeof(&#39;100&#39;)  typeof(x&#39;1000&#39;)  typeof(NULL)
</span><span class=go>-----------  ------------  -------------  ---------------  ------------
</span><span class=go>integer      real          text           blob             null        
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>A single column in SQLite can store mixed data types. See the following example.</p>
<p>First, create a new table named test_datatypes for testing.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>test_datatypes</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=n>id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>val</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Second, insert data into the test_datatypes table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>test_datatypes</span><span class=w> </span><span class=p>(</span><span class=n>val</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=w>
</span><span class=w>	</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span><span class=w>
</span><span class=w>	</span><span class=p>(</span><span class=mi>2</span><span class=p>),</span><span class=w>
</span><span class=w>	</span><span class=p>(</span><span class=mi>10</span><span class=p>.</span><span class=mi>1</span><span class=p>),</span><span class=w>
</span><span class=w>	</span><span class=p>(</span><span class=mi>20</span><span class=p>.</span><span class=mi>5</span><span class=p>),</span><span class=w>
</span><span class=w>	</span><span class=p>(</span><span class=s1>&#39;A&#39;</span><span class=p>),</span><span class=w>
</span><span class=w>	</span><span class=p>(</span><span class=s1>&#39;B&#39;</span><span class=p>),</span><span class=w>
</span><span class=w>	</span><span class=p>(</span><span class=k>NULL</span><span class=p>),</span><span class=w>
</span><span class=w>	</span><span class=p>(</span><span class=n>x</span><span class=s1>&#39;0010&#39;</span><span class=p>),</span><span class=w>
</span><span class=w>	</span><span class=p>(</span><span class=n>x</span><span class=s1>&#39;0011&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Third, use the typeof() function to get the data type of each value stored in the val column.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT         
</span><span class=go>        id,
</span><span class=go>        val,
</span><span class=go>        typeof(val)
</span><span class=go>FROM
</span><span class=go>        test_datatypes;
</span><span class=go>id  val   typeof(val)
</span><span class=go>--  ----  -----------
</span><span class=go>1   1     integer    
</span><span class=go>2   2     integer    
</span><span class=go>3   10.1  real       
</span><span class=go>4   20.5  real       
</span><span class=go>5   A     text       
</span><span class=go>6   B     text       
</span><span class=go>7         null       
</span><span class=go>8         blob       
</span><span class=go>9         blob
</span></code></pre></td></tr></table>
</div>
</div><p>You may ask how SQLite sorts data in a column with different storage classes like val column above.</p>
<p>To resolve this, SQLite provides the following set of rules when it comes to sorting:</p>
<ul>
<li>NULL storage class has the lowest value. It is lower than any other values. Between NULL values, there is no order.</li>
<li>The next higher storage classes are INTEGER and REAL. SQLite compares INTEGER and REAL numerically.</li>
<li>The next higher storage class is TEXT. SQLite uses the collation of TEXT values when it compares the TEXT values.</li>
<li>The highest storage class is the BLOB. SQLite uses the C function memcmp() to compare BLOB values.</li>
</ul>
<p>When you use the ORDER BY clause to sort the data in a column with different storage classes, SQLite performs the following steps:</p>
<ul>
<li>First, group values based on storage class: NULL, INTEGER, and REAL, TEXT, and BLOB.</li>
<li>Second, sort the values in each group.</li>
</ul>
<p>The following statement sorts the mixed data in the val column of the test_datatypes table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT
</span><span class=go>        id,
</span><span class=go>        val,
</span><span class=go>        typeof(val)
</span><span class=go>FROM
</span><span class=go>        test_datatypes
</span><span class=go>ORDER BY val;
</span><span class=go>id  val   typeof(val)
</span><span class=go>--  ----  -----------
</span><span class=go>7         null       
</span><span class=go>16        null       
</span><span class=go>1   1     integer    
</span><span class=go>10  1     integer    
</span><span class=go>2   2     integer    
</span><span class=go>11  2     integer    
</span><span class=go>3   10.1  real       
</span><span class=go>12  10.1  real       
</span><span class=go>4   20.5  real       
</span><span class=go>13  20.5  real       
</span><span class=go>5   A     text       
</span><span class=go>14  A     text       
</span><span class=go>6   B     text       
</span><span class=go>15  B     text       
</span><span class=go>8         blob       
</span><span class=go>17        blob       
</span><span class=go>9         blob       
</span><span class=go>18        blob       
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><h5 id=sqlite-manifest-typing--type-affinity>SQLite manifest typing & type affinity</h5>
<p>Other important concepts related to SQLite data types are manifest typing and type affinity:</p>
<p>Manifest typing means that a data type is a property of a value stored in a column, not the property of the column in which the value is stored. SQLite uses manifest typing to store values of any type in a column.
Type affinity of a column is the recommended type for data stored in that column. Note that the data type is recommended, not required, therefore, a column can store any type of data.</p>
<h4 id=create-table--show-you-how-to-create-a-new-table-in-the-database>Create Table – show you how to create a new table in the database.</h4>
<h5 id=introduction-to-sqlite-create-table-statement>Introduction to SQLite CREATE TABLE statement</h5>
<p>To create a new table in SQLite, you use CREATE TABLE statement using the following syntax:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>schema_name</span><span class=p>].</span><span class=k>table_name</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=n>column_1</span><span class=w> </span><span class=n>data_type</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>   	</span><span class=n>column_2</span><span class=w> </span><span class=n>data_type</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>column_3</span><span class=w> </span><span class=n>data_type</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>table_constraints</span><span class=w>
</span><span class=w></span><span class=p>)</span><span class=w> </span><span class=p>[</span><span class=k>WITHOUT</span><span class=w> </span><span class=n>ROWID</span><span class=p>];</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this syntax:</p>
<ul>
<li>
<p>First, specify the name of the table that you want to create after the CREATE TABLE keywords. The name of the table cannot start with sqlite_ because it is reserved for the internal use of SQLite.</p>
</li>
<li>
<p>Second, use IF NOT EXISTS option to create a new table if it does not exist. Attempting to create a table that already exists without using the IF NOT EXISTS option will result in an error.</p>
</li>
<li>
<p>Third, optionally specify the schema_name to which the new table belongs. The schema can be the main database, temp database or any attached database.</p>
</li>
<li>
<p>Fourth, specify the column list of the table. Each column has a name, data type, and the column constraint. SQLite supports PRIMARY KEY, UNIQUE, NOT NULL, and CHECK column constraints.</p>
</li>
<li>
<p>Fifth, specify the table constraints such as PRIMARY KEY, FOREIGN KEY, UNIQUE, and CHECK constraints.</p>
</li>
<li>
<p>Finally, optionally use the WITHOUT ROWID option. By default, a row in a table has an implicit column, which is referred to as the rowid, oid or <em>rowid</em> column. The rowid column stores a 64-bit signed integer key that uniquely identifies the row inside the table. If you don’t want SQLite creates the rowid column, you specify the WITHOUT ROWID option. A table that contains the rowid column is known as a rowid table. Note that the WITHOUT ROWID option is only available in SQLite 3.8.2 or later.</p>
</li>
</ul>
<p>Note that the primary key of a table is a column or a group of columns that uniquely identify each row in the table.</p>
<h5 id=sqlite-create-table-examples>SQLite CREATE TABLE examples</h5>
<p>Suppose you have to manage contacts using SQLite.</p>
<p>Each contact has the following information:</p>
<ul>
<li>First name</li>
<li>Last name</li>
<li>Email</li>
<li>Phone</li>
</ul>
<p>The requirement is that the email and phone must be unique. In addition, each contact belongs to one or many groups, and each group can have zero or many contacts.</p>
<p>Based on these requirements, we came up with three tables:</p>
<ul>
<li>The contacts table that stores contact information.</li>
<li>The groups table that stores group information.</li>
<li>The contact_groups table that stores the relationship between contacts and groups.</li>
</ul>
<p>The following database diagram illustrates tables:contacts groups, and contact_groups.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-CREATE-TABLE-example.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-CREATE-TABLE-example.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-CREATE-TABLE-example.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-CREATE-TABLE-example.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-CREATE-TABLE-example.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-CREATE-TABLE-example.jpg></p>
<p>The following statement creates the contacts table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>contacts</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=n>contact_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>first_name</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>last_name</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>email</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>UNIQUE</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>phone</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>UNIQUE</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The contact_id is the primary key of the contacts table.</p>
<p>Because the primary key consists of one column, you can use the column constraint.</p>
<p>The first_name and last_name columns have TEXT storage class and these columns are NOT NULL. It means that you must provide values when you insert or update rows in the contacts table.</p>
<p>The email and phone are unique therefore we use the UNIQUE constraint for each column.</p>
<p>The following statement creates the groups table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>groups</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=n>group_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>name</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The groups table is quite simple with two columns: group_id and name. The group_id column is the primary key column.</p>
<p>The following statement creates contact_groups table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>contact_groups</span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=n>contact_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>group_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>contact_id</span><span class=p>,</span><span class=w> </span><span class=n>group_id</span><span class=p>),</span><span class=w>
</span><span class=w>   </span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>contact_id</span><span class=p>)</span><span class=w> 
</span><span class=w>      </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>contacts</span><span class=w> </span><span class=p>(</span><span class=n>contact_id</span><span class=p>)</span><span class=w> 
</span><span class=w>         </span><span class=k>ON</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=k>CASCADE</span><span class=w> 
</span><span class=w>         </span><span class=k>ON</span><span class=w> </span><span class=k>UPDATE</span><span class=w> </span><span class=k>NO</span><span class=w> </span><span class=n>ACTION</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>group_id</span><span class=p>)</span><span class=w> 
</span><span class=w>      </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>groups</span><span class=w> </span><span class=p>(</span><span class=n>group_id</span><span class=p>)</span><span class=w> 
</span><span class=w>         </span><span class=k>ON</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=k>CASCADE</span><span class=w> 
</span><span class=w>         </span><span class=k>ON</span><span class=w> </span><span class=k>UPDATE</span><span class=w> </span><span class=k>NO</span><span class=w> </span><span class=n>ACTION</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The contact_groups table has a primary key that consists of two columns: contact_id and group_id.</p>
<p>To add the table primary key constraint, you use this syntax:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>contact_id</span><span class=p>,</span><span class=w> </span><span class=n>group_id</span><span class=p>)</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In addition, the contact_id and group_id are the foreign keys. Therefore, you use FOREIGN KEY constraint to define a foreign key for each column.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>contact_id</span><span class=p>)</span><span class=w> 
</span><span class=w>   </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>contacts</span><span class=w> </span><span class=p>(</span><span class=n>contact_id</span><span class=p>)</span><span class=w> 
</span><span class=w>      </span><span class=k>ON</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=k>CASCADE</span><span class=w> 
</span><span class=w>      </span><span class=k>ON</span><span class=w> </span><span class=k>UPDATE</span><span class=w> </span><span class=k>NO</span><span class=w> </span><span class=n>ACTION</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>group_id</span><span class=p>)</span><span class=w> 
</span><span class=w>    </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>groups</span><span class=w> </span><span class=p>(</span><span class=n>group_id</span><span class=p>)</span><span class=w> 
</span><span class=w>      </span><span class=k>ON</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=k>CASCADE</span><span class=w> 
</span><span class=w>      </span><span class=k>ON</span><span class=w> </span><span class=k>UPDATE</span><span class=w> </span><span class=k>NO</span><span class=w> </span><span class=n>ACTION</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Note that we will discuss in the FOREIGN KEY constraint in detail in the subsequent tutorial.</p>
<h4 id=alter-table--show-you-how-to-use-modify-the-structure-of-an-existing-table>Alter Table – show you how to use modify the structure of an existing table.</h4>
<p>Unlike SQL-standard and other database systems, SQLite supports a very limited functionality of the ALTER TABLE statement.</p>
<p>By using an SQLite ALTER TABLE statement, you can perform two actions:</p>
<ol>
<li>Rename a table.</li>
<li>Add a new column to a table.</li>
<li>Rename a column (added supported in version 3.20.0)</li>
</ol>
<h5 id=using-sqlite-alter-table-to-rename-a-table>Using SQLite ALTER TABLE to rename a table</h5>
<p>To rename a table, you use the following ALTER TABLE RENAME TO statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>existing_table</span><span class=w>
</span><span class=w></span><span class=k>RENAME</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>new_table</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>These are important points you should know before you rename a table:</p>
<ul>
<li>
<p>The ALTER TABLE only renames a table within a database. You cannot use it to move the table between the attached databases.</p>
</li>
<li>
<p>The database objects such as indexes and triggers associated with the table will be associated with the new table.</p>
</li>
<li>
<p>If a table is referenced by views or statements in triggers, you must manually change the definition of views and triggers.</p>
</li>
</ul>
<p>Let’s take an example of renaming a table.</p>
<p>First, create a table named devices that has three columns: name, model, serial; and insert a new row into the devices table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>devices</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=n>name</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>model</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=nb>Serial</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>UNIQUE</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>devices</span><span class=w> </span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>model</span><span class=p>,</span><span class=w> </span><span class=nb>serial</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;HP ZBook 17 G3 Mobile Workstation&#39;</span><span class=p>,</span><span class=s1>&#39;ZBook&#39;</span><span class=p>,</span><span class=s1>&#39;SN-2015&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Second, use the ALTER TABLE RENAME TO statement to change the devices table to equipment table as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>devices</span><span class=w>
</span><span class=w></span><span class=k>RENAME</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>equipment</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Third, query data from the equipment table to verify the RENAME operation.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>model</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=nb>serial</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>equipment</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h5 id=using-sqlite-alter-table-to-add-a-new-column-to-a-table>Using SQLite ALTER TABLE to add a new column to a table</h5>
<p>You can use the SQLite ALTER TABLE statement to add a new column to an existing table. In this scenario, SQLite appends the new column at the end of the existing column list.</p>
<p>The following illustrates the syntax of ALTER TABLE ADD COLUMN statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>table_name</span><span class=w>
</span><span class=w></span><span class=k>ADD</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=n>column_definition</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>There are some restrictions on the new column:</p>
<ul>
<li>The new column cannot have a UNIQUE or PRIMARY KEY constraint.</li>
<li>If the new column has a NOT NULL constraint, you must specify a default value for the column other than a NULL value.</li>
<li>The new column cannot have a default of CURRENT_TIMESTAMP, CURRENT_DATE, and CURRENT_TIME, or an expression.</li>
<li>If the new column is a foreign key and the foreign key constraint check is enabled, the new column must accept a default value NULL.</li>
</ul>
<p>For example, you can add a new column named location to the equipment table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>equipment</span><span class=w> 
</span><span class=w></span><span class=k>ADD</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=k>location</span><span class=w> </span><span class=nb>text</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h5 id=using-sqlite-alter-table-to-rename-a-column>Using SQLite ALTER TABLE to rename a column</h5>
<p>SQLite added the support for renaming a column using ALTER TABLE RENAME COLUMN statement in version 3.20.0</p>
<p>The following shows the syntax of the ALTER TABLE RENAME COLUMN statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>table_name</span><span class=w>
</span><span class=w></span><span class=k>RENAME</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=n>current_name</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>new_name</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h5 id=using-sqlite-alter-table-for-other-actions>Using SQLite ALTER TABLE for other actions</h5>
<p>If you want to perform other actions e.g., drop a column, you use the following steps:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-ALTER-TABLE-Steps.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-ALTER-TABLE-Steps.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-ALTER-TABLE-Steps.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-ALTER-TABLE-Steps.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-ALTER-TABLE-Steps.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-ALTER-TABLE-Steps.jpg></p>
<p>The following script illustrates the steps above:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=c1>-- disable foreign key constraint check
</span><span class=c1></span><span class=n>PRAGMA</span><span class=w> </span><span class=n>foreign_keys</span><span class=o>=</span><span class=k>off</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>-- start a transaction
</span><span class=c1></span><span class=k>BEGIN</span><span class=w> </span><span class=k>TRANSACTION</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>-- Here you can drop column
</span><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=n>new_table</span><span class=p>(</span><span class=w> 
</span><span class=w>   </span><span class=n>column_definition</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=p>...</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=c1>-- copy data from the table to the new_table
</span><span class=c1></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>new_table</span><span class=p>(</span><span class=n>column_list</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>column_list</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=k>table</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>-- drop the table
</span><span class=c1></span><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>table</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>-- rename the new_table to the table
</span><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>new_table</span><span class=w> </span><span class=k>RENAME</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=k>table</span><span class=p>;</span><span class=w> 
</span><span class=w>
</span><span class=w></span><span class=c1>-- commit the transaction
</span><span class=c1></span><span class=k>COMMIT</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>-- enable foreign key constraint check
</span><span class=c1></span><span class=n>PRAGMA</span><span class=w> </span><span class=n>foreign_keys</span><span class=o>=</span><span class=k>on</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h5 id=sqlite-alter-table-drop-column-example>SQLite ALTER TABLE DROP COLUMN example</h5>
<p>SQLite does not support ALTER TABLE DROP COLUMN statement. To drop a column, you need to use the steps above.</p>
<p>The following script creates two tables users and favorites, and insert data into these tables:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>users</span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=n>UserId</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>FirstName</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>LastName</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>Email</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>Phone</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=k>VACUUM</span><span class=w> </span><span class=k>with</span><span class=w> </span><span class=n>an</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>clause</span><span class=w>
</span><span class=w></span><span class=n>Here</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=n>syntax</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=k>VACUUM</span><span class=w> </span><span class=k>with</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>clause</span><span class=p>:</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>VACUUM</span><span class=w> </span><span class=k>schema</span><span class=o>-</span><span class=n>name</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>filename</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=n>Code</span><span class=w> </span><span class=k>language</span><span class=p>:</span><span class=w> </span><span class=k>SQL</span><span class=w> </span><span class=p>(</span><span class=n>Structured</span><span class=w> </span><span class=n>Query</span><span class=w> </span><span class=k>Language</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=k>sql</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=n>The</span><span class=w> </span><span class=k>VACUUM</span><span class=w> </span><span class=k>statement</span><span class=w> </span><span class=k>with</span><span class=w> </span><span class=n>an</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>clause</span><span class=w> </span><span class=n>keeps</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>original</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=n>file</span><span class=w> </span><span class=n>unchanged</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>creates</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=k>with</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>file</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=n>specified</span><span class=p>.</span><span class=w> </span><span class=n>The</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=n>will</span><span class=w> </span><span class=n>contain</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>same</span><span class=w> </span><span class=n>logical</span><span class=w> </span><span class=n>content</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>original</span><span class=w> </span><span class=k>database</span><span class=p>,</span><span class=w> </span><span class=n>but</span><span class=w> </span><span class=n>fully</span><span class=w> </span><span class=n>vacuumed</span><span class=p>.</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=n>The</span><span class=w> </span><span class=n>filename</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>clause</span><span class=w> </span><span class=n>can</span><span class=w> </span><span class=n>be</span><span class=w> </span><span class=k>any</span><span class=w> </span><span class=k>SQL</span><span class=w> </span><span class=n>expression</span><span class=w> </span><span class=n>that</span><span class=w> </span><span class=n>evaluates</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>string</span><span class=p>.</span><span class=w> </span><span class=n>It</span><span class=w> </span><span class=n>must</span><span class=w> </span><span class=n>be</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>path</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>file</span><span class=w> </span><span class=n>that</span><span class=w> </span><span class=n>does</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=n>exist</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=n>an</span><span class=w> </span><span class=n>empty</span><span class=w> </span><span class=n>file</span><span class=p>,</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=k>VACUUM</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>command</span><span class=w> </span><span class=n>will</span><span class=w> </span><span class=k>result</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>an</span><span class=w> </span><span class=n>error</span><span class=p>.</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=n>The</span><span class=w> </span><span class=k>VACUUM</span><span class=w> </span><span class=n>command</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=n>very</span><span class=w> </span><span class=n>useful</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>generating</span><span class=w> </span><span class=n>backup</span><span class=w> </span><span class=n>copies</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>live</span><span class=w> </span><span class=k>database</span><span class=p>.</span><span class=w> </span><span class=n>It</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=n>transactional</span><span class=w> </span><span class=n>safe</span><span class=p>,</span><span class=w> </span><span class=n>which</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=k>generated</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>consistent</span><span class=w> </span><span class=n>snapshot</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>original</span><span class=w> </span><span class=k>database</span><span class=p>.</span><span class=w> </span><span class=n>However</span><span class=p>,</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>unplanned</span><span class=w> </span><span class=n>shutdown</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=n>power</span><span class=w> </span><span class=n>lose</span><span class=w> </span><span class=n>interupts</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>command</span><span class=p>,</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=k>generated</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=n>might</span><span class=w> </span><span class=n>be</span><span class=w> </span><span class=n>corrupted</span><span class=p>.</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=n>The</span><span class=w> </span><span class=n>following</span><span class=w> </span><span class=k>statement</span><span class=w> </span><span class=n>uses</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=k>VACUUM</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>command</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=n>generate</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=k>with</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>file</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=n>chinook_backup</span><span class=p>.</span><span class=n>db</span><span class=w> </span><span class=n>whose</span><span class=w> </span><span class=k>data</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=n>copied</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>main</span><span class=w> </span><span class=k>schema</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>chinook</span><span class=w> </span><span class=k>database</span><span class=p>:</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>VACUUM</span><span class=w> </span><span class=n>main</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=s1>&#39;c:\sqlite\db\chinook_backup.db&#39;</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=n>Code</span><span class=w> </span><span class=k>language</span><span class=p>:</span><span class=w> </span><span class=n>JavaScript</span><span class=w> </span><span class=p>(</span><span class=n>javascript</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>In</span><span class=w> </span><span class=n>this</span><span class=w> </span><span class=n>tutorial</span><span class=p>,</span><span class=w> </span><span class=n>you</span><span class=w> </span><span class=n>have</span><span class=w> </span><span class=n>learned</span><span class=w> </span><span class=n>why</span><span class=w> </span><span class=n>you</span><span class=w> </span><span class=n>need</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=n>use</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>SQLite</span><span class=w> </span><span class=k>VACUUM</span><span class=w> </span><span class=n>command</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>how</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=n>run</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=n>optimize</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=k>database</span><span class=p>.</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>favorites</span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=n>UserId</span><span class=w> </span><span class=nb>INTEGER</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>PlaylistId</span><span class=w> </span><span class=nb>INTEGER</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=p>(</span><span class=n>UserId</span><span class=p>)</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>users</span><span class=p>(</span><span class=n>UserId</span><span class=p>),</span><span class=w>
</span><span class=w>	</span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=p>(</span><span class=n>PlaylistId</span><span class=p>)</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>playlists</span><span class=p>(</span><span class=n>PlaylistId</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>users</span><span class=p>(</span><span class=n>FirstName</span><span class=p>,</span><span class=w> </span><span class=n>LastName</span><span class=p>,</span><span class=w> </span><span class=n>Email</span><span class=p>,</span><span class=w> </span><span class=n>Phone</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;John&#39;</span><span class=p>,</span><span class=s1>&#39;Doe&#39;</span><span class=p>,</span><span class=s1>&#39;john.doe@example.com&#39;</span><span class=p>,</span><span class=s1>&#39;408-234-3456&#39;</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>favorites</span><span class=p>(</span><span class=n>UserId</span><span class=p>,</span><span class=w> </span><span class=n>PlaylistId</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following statement returns data from the users table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT * FROM users;
</span><span class=go>UserId  FirstName  LastName  Email                 Phone       
</span><span class=go>------  ---------  --------  --------------------  ------------
</span><span class=go>1       John       Doe       john.doe@example.com  408-234-3456
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>And the following statement returns the data from the favorites table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; SELECT * FROM favorites;
</span><span class=go>UserId  PlaylistId
</span><span class=go>------  ----------
</span><span class=go>1       1         
</span><span class=go>sqlite&gt; 
</span></code></pre></td></tr></table>
</div>
</div><p>Suppose, you want to drop the column phone of the users table.</p>
<p>First, disable the foreign key constraint check:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>PRAGMA</span><span class=w> </span><span class=n>foreign_keys</span><span class=o>=</span><span class=k>off</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Second, start a new transaction:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>BEGIN</span><span class=w> </span><span class=k>TRANSACTION</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Third, create a new table to hold data of the users table except for the phone column:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=n>persons</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=n>UserId</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>FirstName</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>LastName</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>Email</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Fourth, copy data from the users to persons table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>persons</span><span class=p>(</span><span class=n>UserId</span><span class=p>,</span><span class=w> </span><span class=n>FirstName</span><span class=p>,</span><span class=w> </span><span class=n>LastName</span><span class=p>,</span><span class=w> </span><span class=n>Email</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>UserId</span><span class=p>,</span><span class=w> </span><span class=n>FirstName</span><span class=p>,</span><span class=w> </span><span class=n>LastName</span><span class=p>,</span><span class=w> </span><span class=n>Email</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>users</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Fifth, drop the users table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>users</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Sixth, rename the persons table to users table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>persons</span><span class=w> </span><span class=k>RENAME</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>users</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Seventh, commit the transaction:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>COMMIT</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Eighth, enable the foreign key constraint check:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>PRAGMA</span><span class=w> </span><span class=n>foreign_keys</span><span class=o>=</span><span class=k>on</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Here is the users table after dropping the phone column:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>users</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=rename-column--learn-step-by-step-how-to-rename-a-column-of-a-table>Rename column – learn step by step how to rename a column of a table.</h4>
<h5 id=introduction-to-sqlite-alter-table-rename-column-statement>Introduction to SQLite ALTER TABLE RENAME COLUMN statement</h5>
<p>SQLite added support for renaming column since version 3.25.0 using the ALTER TABLE statement with the following syntax:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>table_name</span><span class=w>
</span><span class=w></span><span class=k>RENAME</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=n>current_name</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>new_name</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this syntax:</p>
<ul>
<li>First, specify the name of the table after the ALTER TABLE keywords.</li>
<li>Second, specify the name of the column that you want to rename after the RENAME COLUMN keywords and the new name after the TO keyword.</li>
</ul>
<h5 id=sqlite-alter-table-rename-column-example>SQLite ALTER TABLE RENAME COLUMN example</h5>
<p>Let’s take an example of using the ALTER TABLE RENAME COLUMN statement.</p>
<p>First, create a new table called Locations:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>Locations</span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=n>LocationId</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>Address</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>City</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>State</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>Country</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Second, insert a new row into the Locations table by using the INSERT statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>Locations</span><span class=p>(</span><span class=n>Address</span><span class=p>,</span><span class=n>City</span><span class=p>,</span><span class=k>State</span><span class=p>,</span><span class=n>Country</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;3960 North 1st Street&#39;</span><span class=p>,</span><span class=s1>&#39;San Jose&#39;</span><span class=p>,</span><span class=s1>&#39;CA&#39;</span><span class=p>,</span><span class=s1>&#39;USA&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Third, rename the column Address to Street by using the ALTER TABLE RENAME COLUMN statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>Locations</span><span class=w>
</span><span class=w></span><span class=k>RENAME</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=n>Address</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>Street</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Fourth, query data from the Locations table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>SELET</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>Locations</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Finally, show the schema of the Locations table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=p>.</span><span class=k>schema</span><span class=w> </span><span class=n>Locations</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h5 id=the-old-way-to-rename-column>The old way to rename column</h5>
<p>SQLite did not support the ALTER TABLE RENAME COLUMN syntax before version 3.25.0.</p>
<p>If you’re using the SQLite with the version lower than 3.25.0 and could not upgrade, then you should follow these steps to rename a column:</p>
<ul>
<li>First, start a transaction.VACUUM with an INTO clause
Here is syntax of the VACUUM with INTO clause:</li>
</ul>
<p>VACUUM schema-name INTO filename;
Code language: SQL (Structured Query Language) (sql)
The VACUUM statement with an INTO clause keeps the original database file unchanged and creates a new database with the file name specified. The new database will contain the same logical content as the original database, but fully vacuumed.</p>
<p>The filename in the INTO clause can be any SQL expression that evaluates to a string. It must be a path to a file that does not exist or to an empty file, or the VACUUM INTO command will result in an error.</p>
<p>The VACUUM command is very useful for generating backup copies of a live database. It is transactional safe, which the generated database is a consistent snapshot of the original database. However, if a unplanned shutdown or power lose interupts the command, the generated database might be corrupted.</p>
<p>The following statement uses the VACUUM INTO command to generate a new database with the file name chinook_backup.db whose data is copied from of the main schema of the chinook database:</p>
<p>VACUUM main INTO &lsquo;c:\sqlite\db\chinook_backup.db&rsquo;;
Code language: JavaScript (javascript)
In this tutorial, you have learned why you need to use the SQLite VACUUM command and how to run it to optimize the database.</p>
<ul>
<li>
<p>Second, create a new table whose structure is the same as the original one except for the column that you want to rename.</p>
</li>
<li>
<p>Third, copy data from the original table to the new table.</p>
</li>
<li>
<p>Fourth, drop the original table.</p>
</li>
<li>
<p>Fifth, rename the new table to the original table.</p>
</li>
<li>
<p>Finally, commit the transaction.</p>
</li>
</ul>
<h6 id=renaming-column-example>Renaming column example</h6>
<p>The following statement recreates the Locations table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=n>Locations</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>Locations</span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=n>LocationId</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>Address</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>State</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>City</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>Country</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>And this INSERT statement inserts a new row into the Locations table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>Locations</span><span class=p>(</span><span class=n>Address</span><span class=p>,</span><span class=n>City</span><span class=p>,</span><span class=k>State</span><span class=p>,</span><span class=n>Country</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;3960 North 1st Street&#39;</span><span class=p>,</span><span class=s1>&#39;San Jose&#39;</span><span class=p>,</span><span class=s1>&#39;CA&#39;</span><span class=p>,</span><span class=s1>&#39;USA&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Suppose that you want to the change the column Address to Street.</p>
<p>First, start a new transaction:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>BEGIN</span><span class=w> </span><span class=k>TRANSACTION</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Second, create a new table called LocationsTemp with the same structure as the Locations table except for the Address column:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>LocationsTemp</span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=n>LocationId</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>Street</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>City</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>State</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>Country</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Third, copy data from the table Locations to LocationsTemp:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>LocationsTemp</span><span class=p>(</span><span class=n>Street</span><span class=p>,</span><span class=n>City</span><span class=p>,</span><span class=k>State</span><span class=p>,</span><span class=n>Country</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>Address</span><span class=p>,</span><span class=n>City</span><span class=p>,</span><span class=k>State</span><span class=p>,</span><span class=n>Country</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>Locations</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Fourth, drop the Locations table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>Locations</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Fifth, rename the table LocationsTemp to Locations:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>LocationsTemp</span><span class=w> 
</span><span class=w></span><span class=k>RENAME</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>Locations</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Finally, commit the transaction:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>COMMIT</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>If you query the Locations table, you will see that the column Address has been renamed to Street:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>sqlite</span><span class=o>&gt;</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>Locations</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=n>LocationId</span><span class=w>  </span><span class=n>Street</span><span class=w>                 </span><span class=n>City</span><span class=w>      </span><span class=k>State</span><span class=w>  </span><span class=n>Country</span><span class=w>
</span><span class=w></span><span class=c1>----------  ---------------------  --------  -----  -------
</span><span class=c1></span><span class=mi>1</span><span class=w>           </span><span class=mi>3960</span><span class=w> </span><span class=n>North</span><span class=w> </span><span class=mi>1</span><span class=n>st</span><span class=w> </span><span class=n>Street</span><span class=w>  </span><span class=n>San</span><span class=w> </span><span class=n>Jose</span><span class=w>  </span><span class=n>CA</span><span class=w>     </span><span class=n>USA</span><span class=w>    
</span><span class=w></span><span class=n>sqlite</span><span class=o>&gt;</span><span class=w> 
</span></code></pre></td></tr></table>
</div>
</div><h4 id=drop-table--guide-you-on-how-to-remove-a-table-from-the-database>Drop Table – guide you on how to remove a table from the database.</h4>
<h5 id=introduction-to-sqlite-drop-table-statement>Introduction to SQLite DROP TABLE statement</h5>
<p>To remove a table in a database, you use SQLite DROP TABLE statement. The statement is simple as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>schema_name</span><span class=p>.]</span><span class=k>table_name</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this syntax, you specify the name of the table which you want to remove after the DROP TABLE keywords.</p>
<p>SQLite allows you to drop only one table at a time. To remove multiple tables, you need to issue multiple DROP TABLE statements.</p>
<p>If you remove a non-existing table, SQLite issues an error. If you use IF EXISTS option, then SQLite removes the table only if the table exists, otherwise, it just ignores the statement and does nothing.</p>
<p>If you want to remove a table in a specific database, you use the [schema_name.] explicitly.</p>
<p>In case the table has dependent objects such as triggers and indexes, the DROP TABLE statement also removes all the dependent objects.</p>
<p>The DROP TABLE statement performs an implicit DELETE statement before dropping the table. However, the DROP TABLE statement removes the triggers associated with the table before performing the implicit DELETE statement, therefore, the delete triggers will not fire.</p>
<p>If the foreign key constraints enabled and you perform the DROP TABLE statement, before SQLite performs the implicit DELETE statement, it carries the foreign key constraints check. If a foreign key constraint violation occurs, SQLite issues an error message and will not drop the table.</p>
<p><strong>Notice</strong> that the DROP TABLE statement deletes the table from the database and the file on disk completely. You will not be able to undo or recover from this action. Therefore, you should perform the DROP TABLE statement with extra caution.</p>
<h5 id=sqlite-drop-table-statement-examples>SQLite DROP TABLE statement examples</h5>
<p>For the demonstration purpose, we will create two tables: people and addresses. Each person has one address. And one address can be shared by multiple people.</p>
<p>First, create the tables:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=n>people</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=n>person_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>first_name</span><span class=w> </span><span class=nb>TEXT</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>last_name</span><span class=w> </span><span class=nb>TEXT</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>address_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>address_id</span><span class=p>)</span><span class=w> 
</span><span class=w>      </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>addresses</span><span class=w> </span><span class=p>(</span><span class=n>address_id</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=n>addresses</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=n>address_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>house_no</span><span class=w> </span><span class=nb>TEXT</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>street</span><span class=w> </span><span class=nb>TEXT</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>city</span><span class=w> </span><span class=nb>TEXT</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>postal_code</span><span class=w> </span><span class=nb>TEXT</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>country</span><span class=w> </span><span class=nb>TEXT</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-DROP-TABLE-example.png data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-DROP-TABLE-example.png, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-DROP-TABLE-example.png 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-DROP-TABLE-example.png 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-DROP-TABLE-example.png title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-DROP-TABLE-example.png></p>
<p>Second, insert an address and a person into the addresses and people tables.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>addresses</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=n>house_no</span><span class=p>,</span><span class=w> </span><span class=n>street</span><span class=p>,</span><span class=w> </span><span class=n>city</span><span class=p>,</span><span class=w> </span><span class=n>postal_code</span><span class=p>,</span><span class=w> </span><span class=n>country</span><span class=w> </span><span class=p>)</span><span class=w> 
</span><span class=w></span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=s1>&#39;3960&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;North 1st Street&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;San Jose &#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;95134&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;USA &#39;</span><span class=w> </span><span class=p>);</span><span class=w> 
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>people</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=n>first_name</span><span class=p>,</span><span class=w> </span><span class=n>last_name</span><span class=p>,</span><span class=w> </span><span class=n>address_id</span><span class=w> </span><span class=p>)</span><span class=w> 
</span><span class=w></span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;John&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Doe&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Third, use the DROP TABLE statement to remove the addresses table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>addresses</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>SQLite issued an error message:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>constraint failed
</code></pre></td></tr></table>
</div>
</div><p>Because this action violates the foreign key constraint.</p>
<p>To remove the addresses table, you have to:</p>
<ul>
<li>Disable foreign key constraints.</li>
<li>Drop the addresses table.</li>
<li>Update the address_id in the people table to NULL values.</li>
<li>Enable the foreign key constraints.</li>
</ul>
<p>See the following statements:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>PRAGMA</span><span class=w> </span><span class=n>foreign_keys</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>OFF</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>addresses</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>UPDATE</span><span class=w> </span><span class=n>people</span><span class=w>
</span><span class=w></span><span class=k>SET</span><span class=w> </span><span class=n>address_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>NULL</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=n>PRAGMA</span><span class=w> </span><span class=n>foreign_keys</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>ON</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The addresses table is removed and values of the address_id column are updated to NULL values.</p>
<h4 id=vacuum--show-you-how-to-optimize-database-files>VACUUM – show you how to optimize database files.</h4>
<h5 id=why-do-you-need-sqlite-vacuum-command>Why do you need SQLite VACUUM command</h5>
<p>First, when you drop database objects such as tables, views, indexes, and triggers or delete data from tables, the database file size remains unchanged. Because SQLite just marks the deleted objects as free and reserves it for the future uses. As a result, the size of the database file always grows in size.</p>
<p>Second, when you insert or delete data from the tables, the indexes and tables become fragmented, especially for the database that has a high number of inserts, updates, and deletes.</p>
<p>Third, the insert, update and delete operations create unused data block within individual database pages. It decreases the number of rows that can be stored in a single page. Therefore, it increases the number of pages to hold a table. Because of this, it increases storage overhead for the table, takes more time to read/write, and decreases the cache performance.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-VACUUM.jpg data-srcset="https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-VACUUM.jpg, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-VACUUM.jpg 1.5x, https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-VACUUM.jpg 2x" data-sizes=auto alt=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-VACUUM.jpg title=https://cdn.sqlitetutorial.net/wp-content/uploads/2015/12/SQLite-VACUUM.jpg></p>
<p>SQLite provides the VACUUM command to address all three issues above.</p>
<p>SQLite first copies data within a database file to a temporary database. This operation defragments the database objects, ignores the free spaces, and repacks individual pages. Then, SQLite copies the content of the temporary database file back to the original database file. The original database file is overwritten.</p>
<p>Because the VACUUM command rebuilds the database, you can use it to change some database-specific configuration parameters such as page size, page format, and default encoding. To do this, you set new values using pragma and then vacuum the database.</p>
<h5 id=the-sqlite-vacuum-command>The SQLite VACUUM command</h5>
<p>The VACUUM command does not change the content of the database except the rowid values. If you use INTEGER PRIMARY KEY column, the VACUUM does not change the values of that column. However, if you use unaliased rowid, the VACUUM command will reset the rowid values. Besides changing the rowid values, the VACUUM command also builds the index from scratch.</p>
<p>It is a good practice to perform the VACUUM command periodically, especially when you delete large tables or indexes from a database.</p>
<p>It is important to note that the VACCUM command requires storage to hold the original file and also the copy. Also, the VACUUM command requires exclusive access to the database file. In other words, the VACUUM command will not run successfully if the database has a pending SQL statement or an open transaction.</p>
<p>Currently, as of version 3.9.2, you can run the VACUUM command on the main database, not the attached database file.</p>
<p>Even though SQLite enables the auto-vacuum mode that triggers the vacuum process automatically with some limitations. It is a good practice to run the VACUUM command manually.</p>
<h5 id=how-to-run-the-sqlite-vacuum-command>How to run the SQLite VACUUM command</h5>
<p>The following shows how to run the VACUUM command:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>VACUUM</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Make sure that there is no open transaction while you’re running the command.</p>
<p>The following statement enables full auto-vacuum mode:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>PRAGMA</span><span class=w> </span><span class=n>auto_vacuum</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>FULL</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>To enable incremental vacuum, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>PRAGMA</span><span class=w> </span><span class=n>auto_vacuum</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>INCREMENTAL</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following statement disables auto-vacuum mode:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>PRAGMA</span><span class=w> </span><span class=n>auto_vacuum</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>NONE</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h5 id=vacuum-with-an-into-clause>VACUUM with an INTO clause</h5>
<p>Here is syntax of the VACUUM with INTO clause:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>VACUUM</span><span class=w> </span><span class=k>schema</span><span class=o>-</span><span class=n>name</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>filename</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The VACUUM statement with an INTO clause keeps the original database file unchanged and creates a new database with the file name specified. The new database will contain the same logical content as the original database, but fully vacuumed.</p>
<p>The filename in the INTO clause can be any SQL expression that evaluates to a string. It must be a path to a file that does not exist or to an empty file, or the VACUUM INTO command will result in an error.</p>
<p>The VACUUM command is very useful for generating backup copies of a live database. It is transactional safe, which the generated database is a consistent snapshot of the original database. However, if a unplanned shutdown or power lose interupts the command, the generated database might be corrupted.</p>
<p>The following statement uses the VACUUM INTO command to generate a new database with the file name chinook_backup.db whose data is copied from of the main schema of the chinook database:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>VACUUM</span><span class=w> </span><span class=n>main</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=s1>&#39;c:\sqlite\db\chinook_backup.db&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this tutorial, you have learned why you need to use the SQLite VACUUM command and how to run it to optimize the database.</p>
<h3 id=section-12-constraints>Section 12. Constraints</h3>
<h4 id=primary-key--show-you-how-to-define-the-primary-key-for-a-table>Primary Key – show you how to define the primary key for a table.</h4>
<h5 id=introduction-to-sqlite-primary-key>Introduction to SQLite primary key</h5>
<p>A primary key is a column or group of columns used to identify the uniqueness of rows in a table. Each table has one and only one primary key.</p>
<p>SQLite allows you to define primary key in two ways:</p>
<p>First, if the primary key has only one column, you use the PRIMARY KEY column constraint to define the primary key as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>table_name</span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=n>column_1</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=p>...</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Second, in case primary key consists of two or more columns, you use the PRIMARY KEY table constraint to define the primary as shown in the following statement.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>table_name</span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=n>column_1</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>column_2</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=p>...</span><span class=w>
</span><span class=w>   </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>(</span><span class=n>column_1</span><span class=p>,</span><span class=n>column_2</span><span class=p>,...)</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In SQL standard, the primary key column must not contain NULL values. It means that the primary key column has an implicit NOT NULL constraint.</p>
<p>However, to make the current version of SQLite compatible with the earlier version, SQLite allows the primary key column to contain NULL values.</p>
<h5 id=sqlite-primary-key-and-rowid-table>SQLite primary key and rowid table</h5>
<p>When you create a table without specifying the WITHOUT ROWID option, SQLite adds an implicit column called rowid that stores 64-bit signed integer. The rowid column is a key that uniquely identifies the rows in the table. Tables that have rowid columns are called rowid tables.</p>
<p>If a table has the primary key that consists of one column, and that column is defined as INTEGER then this primary key column becomes an alias for the rowid column.</p>
<p>Notice that if you assign another integer type such as BIGINT and UNSIGNED INT to the primary key column, this column will not be an alias for the rowid column.</p>
<p>Because the rowid table organizes its data as a B-tree, querying and sorting data of a rowid table are very fast. It is faster than using a primary key which is not an alias of the rowid.</p>
<p>Another important note is that if you declare a column with the INTEGER type and PRIMARY KEY DESC clause, this column will not become an alias for the rowid column:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>table</span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=n>pk</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=k>DESC</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=p>...</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h5 id=creating-sqlite-primary-key-examples>Creating SQLite primary key examples</h5>
<p>The following statement creates a table named countries which has country_id column as the primary key.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>countries</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=n>country_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>name</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Because the primary key of the countries table has only one column, we defined the primary key using PRIMARY KEY column constraint.</p>
<p>It is possible to use the PRIMARY KEY table constraint to define the primary key that consists of one column as shown in the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>languages</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=n>language_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>name</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>language_id</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>However, for tables that the primary keys consist of more than one column, you must use PRIMARY KEY table constraint to define primary keys.</p>
<p>The following statement creates the country_languages table whose primary key consists of two columns.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>country_languages</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=n>country_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>language_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>country_id</span><span class=p>,</span><span class=w> </span><span class=n>language_id</span><span class=p>),</span><span class=w>
</span><span class=w>	</span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>country_id</span><span class=p>)</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>countries</span><span class=w> </span><span class=p>(</span><span class=n>country_id</span><span class=p>)</span><span class=w> 
</span><span class=w>            </span><span class=k>ON</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=k>CASCADE</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=k>UPDATE</span><span class=w> </span><span class=k>NO</span><span class=w> </span><span class=n>ACTION</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>language_id</span><span class=p>)</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>languages</span><span class=w> </span><span class=p>(</span><span class=n>language_id</span><span class=p>)</span><span class=w> 
</span><span class=w>            </span><span class=k>ON</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=k>CASCADE</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=k>UPDATE</span><span class=w> </span><span class=k>NO</span><span class=w> </span><span class=n>ACTION</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h5 id=adding-sqlite-primary-key-example>Adding SQLite primary key example</h5>
<p>Unlike other database systems e.g., MySQL and PostgreSQL, you cannot use the ALTER TABLE statement to add a primary key to an existing table.</p>
<p>You need to follow these steps to work around the limitation:</p>
<ul>
<li>First, set the foreign key constarint check off.</li>
<li>Next, rename the table to another table name (old_table)</li>
<li>Then, create a new table (table) with exact structure of the table that you have been renamed.</li>
<li>After that, copy data from the old_table to the table.</li>
<li>Finally, turn on the foreign key constraint check on</li>
</ul>
<p>See the following statements:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>PRAGMA</span><span class=w> </span><span class=n>foreign_keys</span><span class=o>=</span><span class=k>off</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>BEGIN</span><span class=w> </span><span class=k>TRANSACTION</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>RENAME</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>old_table</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>-- define the primary key constraint here
</span><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>old_table</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>COMMIT</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=n>PRAGMA</span><span class=w> </span><span class=n>foreign_keys</span><span class=o>=</span><span class=k>on</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The BEGIN TRANSACTION starts a new transaction. It ensures that all subsequent statements execute successfully or nothing executes at all.</p>
<p>The COMMIT statement commits all the statements.</p>
<p>Let’s create a table name cities without a primary key.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>cities</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=n>id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>name</span><span class=w> </span><span class=nb>text</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>cities</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;San Jose&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In order to add the primary key to the cities table, you perform the following steps:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>PRAGMA</span><span class=w> </span><span class=n>foreign_keys</span><span class=o>=</span><span class=k>off</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>BEGIN</span><span class=w> </span><span class=k>TRANSACTION</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>cities</span><span class=w> </span><span class=k>RENAME</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>old_cities</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>cities</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=n>id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>name</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>cities</span><span class=w> 
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>old_cities</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>old_cities</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>COMMIT</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=n>PRAGMA</span><span class=w> </span><span class=n>foreign_keys</span><span class=o>=</span><span class=k>on</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>If you use SQLite GUI tool, you can use the following statement to show the table’s information.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>PRAGMA</span><span class=w> </span><span class=n>table_info</span><span class=p>([</span><span class=n>cities</span><span class=p>]);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=not-null-constraint--learn-how-to-enforce-values-in-a-column-are-not-null>NOT NULL constraint – learn how to enforce values in a column are not NULL.</h4>
<h5 id=introduction-to-sqlite-not-null-constraint>Introduction to SQLite NOT NULL constraint</h5>
<p>When you create a table, you can specify whether a column acceptsNULL values or not. By default, all columns in a table accept NULL values except you explicitly use NOT NULL constraints.</p>
<p>To define a NOT NULL constraint for a column, you use the following syntax:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>table_name</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=p>...,</span><span class=w>
</span><span class=w>    </span><span class=k>column_name</span><span class=w> </span><span class=n>type_name</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=p>...</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Unlike other constraints such as PRIMARY KEY and CHECK, you can only define NOT NULL constraints at the column level, not the table level.</p>
<p>Based on the SQL standard, PRIMARY KEY should always imply NOT NULL. However, SQLite allows NULL values in the PRIMARY KEY column except that a column is INTEGER PRIMARY KEY column or the table is a WITHOUT ROWID table or the column is defined as a NOT NULL column.</p>
<p>This is due to a bug in some early versions. If this bug is fixed to conform with the SQL standard, then it might break the legacy systems. Therefore, it has been decided to allow NULL values in the PRIMARY KEY column.</p>
<p>Once a NOT NULL constraint is attached to a column, any attempt to set the column value to NULL such as inserting or updating will cause a constraint violation.</p>
<h5 id=sqlite-not-null-constraint-example>SQLite NOT NULL constraint example</h5>
<p>The following example creates a new table named suppliers:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>suppliers</span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=n>supplier_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>name</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this example, the supplier_id is the PRIMARY KEY column of the suppliers table. Because this column is declared as INTEGER PRIMARY KEY, it will not accept NULL values.</p>
<p>The name column is also declared with a NOT NULL constraint, so it will accept only non-NULL values.</p>
<p>The following statement attempt to insert a NULL into the name column of the suppliers table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>suppliers</span><span class=p>(</span><span class=n>name</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=k>NULL</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The statement fails due to the NOT NULL constraint violation. Here is the error message:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SQL</span><span class=w> </span><span class=n>Error</span><span class=w> </span><span class=p>[</span><span class=mi>19</span><span class=p>]:</span><span class=w> </span><span class=p>[</span><span class=n>SQLITE_CONSTRAINT</span><span class=p>]</span><span class=w>  </span><span class=k>Abort</span><span class=w> </span><span class=n>due</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=k>constraint</span><span class=w> </span><span class=n>violation</span><span class=w> </span><span class=p>(</span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>constraint</span><span class=w> </span><span class=n>failed</span><span class=p>:</span><span class=w> </span><span class=n>suppliers</span><span class=p>.</span><span class=n>name</span><span class=p>)</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=unique-constraint--ensure-values-in-a-column-or-a-group-of-columns-are-unique>UNIQUE constraint – ensure values in a column or a group of columns are unique.</h4>
<h5 id=introduction-to-sqlite-unique-constraint>Introduction to SQLite UNIQUE constraint</h5>
<p>A UNIQUE constraint ensures all values in a column or a group of columns are distinct from one another or unique.</p>
<p>To define a UNIQUE constraint, you use the UNIQUE keyword followed by one or more columns.</p>
<p>You can define a UNIQUE constraint at the column or the table level. Only at the table level, you can define a UNIQUE constraint across multiple columns.</p>
<p>The following shows how to define a UNIQUE constraint for a column at the column level:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>table_name</span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=p>...,</span><span class=w>
</span><span class=w>    </span><span class=k>column_name</span><span class=w> </span><span class=k>type</span><span class=w> </span><span class=k>UNIQUE</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=p>...</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Or at the table level:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>table_name</span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=p>...,</span><span class=w>
</span><span class=w>    </span><span class=k>UNIQUE</span><span class=p>(</span><span class=k>column_name</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following illustrates how to define a UNIQUE constraint for multiple columns:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>table_name</span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=p>...,</span><span class=w>
</span><span class=w>    </span><span class=k>UNIQUE</span><span class=p>(</span><span class=n>column_name1</span><span class=p>,</span><span class=n>column_name2</span><span class=p>,...)</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Once a UNIQUE constraint is defined, if you attempt to insert or update a value that already exists in the column, SQLite will issue an error and abort the operation.</p>
<h5 id=sqlite-unique-constraint-examples>SQLite UNIQUE constraint examples</h5>
<p>Let’s take some examples of using the UNIQUE constraint.</p>
<h6 id=defining-a-unique-constraint-for-one-column-example>Defining a UNIQUE constraint for one column example</h6>
<p>The following statement creates a new table named contacts with a UNIQUE constraint defined for the email column:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>contacts</span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=n>contact_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>first_name</span><span class=w> </span><span class=nb>TEXT</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>last_name</span><span class=w> </span><span class=nb>TEXT</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>email</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>UNIQUE</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following example inserts a new row into the contacts table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>contacts</span><span class=p>(</span><span class=n>first_name</span><span class=p>,</span><span class=n>last_name</span><span class=p>,</span><span class=n>email</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;John&#39;</span><span class=p>,</span><span class=s1>&#39;Doe&#39;</span><span class=p>,</span><span class=s1>&#39;john.doe@gmail.com&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>If you attempt to insert a new contact with the same email, you will get an error message:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>contacts</span><span class=p>(</span><span class=n>first_name</span><span class=p>,</span><span class=n>last_name</span><span class=p>,</span><span class=n>email</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;Johnny&#39;</span><span class=p>,</span><span class=s1>&#39;Doe&#39;</span><span class=p>,</span><span class=s1>&#39;john.doe@gmail.com&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Here is the error message:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>Error</span><span class=w> </span><span class=n>while</span><span class=w> </span><span class=n>executing</span><span class=w> </span><span class=k>SQL</span><span class=w> </span><span class=n>query</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=s1>&#39;chinook&#39;</span><span class=p>:</span><span class=w> </span><span class=k>UNIQUE</span><span class=w> </span><span class=k>constraint</span><span class=w> </span><span class=n>failed</span><span class=p>:</span><span class=w> </span><span class=n>contacts</span><span class=p>.</span><span class=n>email</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h6 id=defining-a-unique-constraint-for-multiple-columns-example>Defining a UNIQUE constraint for multiple columns example</h6>
<p>The following statement creates the shapes table with a UNIQUE constraint defined for the background_color and foreground_color columns:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>shapes</span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=n>shape_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>background_color</span><span class=w> </span><span class=nb>TEXT</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>foreground_color</span><span class=w> </span><span class=nb>TEXT</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=k>UNIQUE</span><span class=p>(</span><span class=n>background_color</span><span class=p>,</span><span class=n>foreground_color</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following statement inserts a new row into the shapes table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>shapes</span><span class=p>(</span><span class=n>background_color</span><span class=p>,</span><span class=n>foreground_color</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;red&#39;</span><span class=p>,</span><span class=s1>&#39;green&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following statement works because of no duplication violation in both background_color and foreground_color columns:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>shapes</span><span class=p>(</span><span class=n>background_color</span><span class=p>,</span><span class=n>foreground_color</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;red&#39;</span><span class=p>,</span><span class=s1>&#39;blue&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>However, the following statement causes an error due to the duplicates in both background_color and foreground_color columns:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>shapes</span><span class=p>(</span><span class=n>background_color</span><span class=p>,</span><span class=n>foreground_color</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;red&#39;</span><span class=p>,</span><span class=s1>&#39;green&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Here is the error:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>Error</span><span class=w> </span><span class=n>while</span><span class=w> </span><span class=n>executing</span><span class=w> </span><span class=k>SQL</span><span class=w> </span><span class=n>query</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=s1>&#39;chinook&#39;</span><span class=p>:</span><span class=w> </span><span class=o>`</span><span class=k>UNIQUE</span><span class=o>`</span><span class=w> </span><span class=k>constraint</span><span class=w> </span><span class=n>failed</span><span class=p>:</span><span class=w> </span><span class=n>shapes</span><span class=p>.</span><span class=n>background_color</span><span class=p>,</span><span class=w> </span><span class=n>shapes</span><span class=p>.</span><span class=n>foreground_color</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h5 id=sqlite-unique-constraint-and-null>SQLite UNIQUE constraint and NULL</h5>
<p>SQLite treats all NULL values are different, therefore, a column with a UNIQUE constraint can have multiple NULL values.</p>
<p>The following statement creates a new table named lists whose email column has a UNIQUE constraint:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>lists</span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=n>list_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>email</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>UNIQUE</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following statement inserts multiple NULL values into the email column of the lists table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>lists</span><span class=p>(</span><span class=n>email</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=k>NULL</span><span class=p>),(</span><span class=k>NULL</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Let’s query data from the lists table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>lists</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>As you can see, even though the email column has a UNIQUE constraint, it can accept multiple NULL values.</p>
<h4 id=check-constraint--ensure-the-values-in-a-column-meet-a-specified-condition-defined-by-an-expression>CHECK constraint – ensure the values in a column meet a specified condition defined by an expression.</h4>
<h5 id=introduction-to-sqlite-check-constraints>Introduction to SQLite CHECK constraints</h5>
<p>SQLite CHECK constraints allow you to define expressions to test values whenever they are inserted into or updated within a column.</p>
<p>If the values do not meet the criteria defined by the expression, SQLite will issue a constraint violation and abort the statement.</p>
<p>The CHECK constraints allow you to define additional data integrity checks beyond UNIQUE or NOT NULL to suit your specific application.</p>
<p>SQLite allows you to define a CHECK constraint at the column level or the table level.</p>
<p>The following statement shows how to define a CHECK constraint at the column level:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>table_name</span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=p>...,</span><span class=w>
</span><span class=w>    </span><span class=k>column_name</span><span class=w> </span><span class=n>data_type</span><span class=w> </span><span class=k>CHECK</span><span class=p>(</span><span class=n>expression</span><span class=p>),</span><span class=w>
</span><span class=w>    </span><span class=p>...</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>and the following statement illustrates how to define a CHECK constraint at the table level:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>table_name</span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=p>...,</span><span class=w>
</span><span class=w>    </span><span class=k>CHECK</span><span class=p>(</span><span class=n>expression</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this syntax, whenever a row is inserted into a table or an existing row is updated, the expression associated with each CHECK constraint is evaluated and returned a numeric value 0 or 1.</p>
<p>If the result is zero, then a constraint violation occurred. If the result is a non-zero value or NULL, it means no constraint violation occurred.</p>
<p>Note that the expression of a CHECK constraint cannot contain a subquery.</p>
<h5 id=sqlite-check-constraint-examples>SQLite CHECK constraint examples</h5>
<p>Let’s take some examples of using the CHECK constraints.</p>
<ol>
<li>Using SQLite CHECK constraint at the column level example
The following statement creates a new table named contacts:</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>contacts</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=n>contact_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>first_name</span><span class=w> </span><span class=nb>TEXT</span><span class=w>    </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>last_name</span><span class=w>  </span><span class=nb>TEXT</span><span class=w>    </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>email</span><span class=w>      </span><span class=nb>TEXT</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>phone</span><span class=w>      </span><span class=nb>TEXT</span><span class=w>    </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w>                    </span><span class=k>CHECK</span><span class=w> </span><span class=p>(</span><span class=k>length</span><span class=p>(</span><span class=n>phone</span><span class=p>)</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mi>10</span><span class=p>)</span><span class=w> 
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In the contacts table, the phone column has a CHECK constraint:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CHECK</span><span class=w> </span><span class=p>(</span><span class=k>length</span><span class=p>(</span><span class=n>phone</span><span class=p>)</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mi>10</span><span class=p>)</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>This CHECK constraint ensures that the values in the phone column must be at least 10 characters.</p>
<p>If you attempt to execute the following statement, you will get a constraint violation error:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>contacts</span><span class=p>(</span><span class=n>first_name</span><span class=p>,</span><span class=w> </span><span class=n>last_name</span><span class=p>,</span><span class=w> </span><span class=n>phone</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;John&#39;</span><span class=p>,</span><span class=s1>&#39;Doe&#39;</span><span class=p>,</span><span class=s1>&#39;408123456&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Here is the error message:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>Result</span><span class=p>:</span><span class=w> </span><span class=k>CHECK</span><span class=w> </span><span class=k>constraint</span><span class=w> </span><span class=n>failed</span><span class=p>:</span><span class=w> </span><span class=n>contacts</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The reason was that the phone number that you attempted to insert just has 9 characters while it requires at least 10 characters.</p>
<p>The following statement should work because the value in the phone column has 13 characters, which satisfies the expression in the CHECK constraint:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>contacts</span><span class=p>(</span><span class=n>first_name</span><span class=p>,</span><span class=w> </span><span class=n>last_name</span><span class=p>,</span><span class=w> </span><span class=n>phone</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;John&#39;</span><span class=p>,</span><span class=s1>&#39;Doe&#39;</span><span class=p>,</span><span class=s1>&#39;(408)-123-456&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><ol start=2>
<li>Using SQLite CHECK constraints at the table level example
The following statement creates a new table named products:</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>products</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=n>product_id</span><span class=w>   </span><span class=nb>INTEGER</span><span class=w>         </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>product_name</span><span class=w> </span><span class=nb>TEXT</span><span class=w>            </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>list_price</span><span class=w>   </span><span class=nb>DECIMAL</span><span class=w> </span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>discount</span><span class=w>     </span><span class=nb>DECIMAL</span><span class=w> </span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w>                                </span><span class=k>DEFAULT</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=k>CHECK</span><span class=w> </span><span class=p>(</span><span class=n>list_price</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>discount</span><span class=w> </span><span class=k>AND</span><span class=w> 
</span><span class=w>        </span><span class=n>discount</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>AND</span><span class=w> 
</span><span class=w>        </span><span class=n>list_price</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=w> 
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this example, the CHECK constraint is defined at the table level:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CHECK</span><span class=w> </span><span class=p>(</span><span class=n>list_price</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>discount</span><span class=w> </span><span class=k>AND</span><span class=w> 
</span><span class=w>            </span><span class=n>discount</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>AND</span><span class=w> 
</span><span class=w>            </span><span class=n>list_price</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The CHECK constraint ensures that list price is always greater or equal to discount and both discount and list price are greater or equal to zero.</p>
<p>The following statement violates the CHECK constraint because the discount is higher than the list price.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>products</span><span class=p>(</span><span class=n>product_name</span><span class=p>,</span><span class=w> </span><span class=n>list_price</span><span class=p>,</span><span class=w> </span><span class=n>discount</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;New Product&#39;</span><span class=p>,</span><span class=mi>900</span><span class=p>,</span><span class=mi>1000</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The following statement also violates the CHECK constraint because the discount is negative:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>products</span><span class=p>(</span><span class=n>product_name</span><span class=p>,</span><span class=w> </span><span class=n>list_price</span><span class=p>,</span><span class=w> </span><span class=n>discount</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;New XFactor&#39;</span><span class=p>,</span><span class=mi>1000</span><span class=p>,</span><span class=o>-</span><span class=mi>10</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h5 id=adding-check-constraints-to-an-existing-table>Adding CHECK constraints to an existing table</h5>
<p>As of version 3.25.2, SQLite does not support adding a CHECK constraint to an existing table.</p>
<p>However, you can follow these steps:</p>
<p>First, create a new table whose structure is the same as the table that you want to add a CHECK constraint. The new table should also include the CHECK constraint:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>new_table</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=p>[...],</span><span class=w>
</span><span class=w>    </span><span class=k>CHECK</span><span class=w> </span><span class=p>([...])</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>To get the structure of the old table, you can use the .schema command. Check out the SQLite DESCRIBE table tutorial for more information.</p>
<p>Second, copy data from the old table to the new table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>new_table</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>old_table</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Third, drop the old table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>old_table</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Fourth, rename the new table to the old one:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>new_table</span><span class=w> </span><span class=k>RENAME</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>old_table</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>To make all statements above transaction-safe, you should execute all of them within a transaction like this:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>BEGIN</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=c1>-- create a new table 
</span><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>new_table</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=p>[...],</span><span class=w>
</span><span class=w>    </span><span class=k>CHECK</span><span class=w> </span><span class=p>([...])</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=c1>-- copy data from old table to the new one
</span><span class=c1></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>new_table</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>old_table</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>-- drop the old table
</span><span class=c1></span><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>old_table</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>-- rename new table to the old one
</span><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>new_table</span><span class=w> </span><span class=k>RENAME</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>old_table</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>-- commit changes
</span><span class=c1></span><span class=k>COMMIT</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=autoincrement--explain-how-the-autoincrement-column-attribute-works-and-why-you-should-avoid-using-it>AUTOINCREMENT – explain how the AUTOINCREMENT column attribute works and why you should avoid using it.</h4>
<h5 id=introduction-to-sqlite-rowid-table>Introduction to SQLite ROWID table</h5>
<p>Whenever you create a table without specifying the WITHOUT ROWID option, you get an implicit auto-increment column called rowid. The rowid column store 64-bit signed integer that uniquely identifies a row in the table.</p>
<p>Let’s see the following example.</p>
<p>First, create a new table named people that has two columns: first_name, and last_name:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>people</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=n>first_name</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>last_name</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Second, insert a row into the people table using the following INSERT statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>people</span><span class=w> </span><span class=p>(</span><span class=n>first_name</span><span class=p>,</span><span class=w> </span><span class=n>last_name</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;John&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Doe&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Third, query data from the people table using the following SELECT statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>   </span><span class=n>rowid</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>first_name</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>last_name</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>   </span><span class=n>people</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>As you can see clearly from the output, SQLite implicitly creates a column named rowid and automatically assigns an integer value whenever you insert a new row into the table.</p>
<p>Note that you can also refer to the rowid column using its aliases: _rowid_ and oid.</p>
<p>When you create a table that has an INTEGER PRIMARY KEY column, this column is the alias of the rowid column.</p>
<p>The following statement drops table people and recreates it. This time, however, we add another column named person_id whose data type is INTEGER and column constraint is PRIMARY KEY:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>people</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>people</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=n>person_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>first_name</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>last_name</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this case, the person_id column is actually the rowid column.</p>
<p>How does SQLite assign an integer value to the rowid column?</p>
<p>If you don’t specify the rowid value or you use a NULL value when you insert a new row, SQLite automatically assigns the next sequential integer, which is one larger than the largest rowid in the table. The rowid value starts at 1.</p>
<p>The maximum value of therowid column is 9,223,372,036,854,775,807, which is very big. If your data reaches this maximum value and you attempt to insert a new row, SQLite will find an unused integer and uses it. If SQLite cannot find any unused integer, it will issue an SQLITE_FULL error. On top of that, if you delete some rows and insert a new row, SQLite will try to reuse the rowid values from the deleted rows.</p>
<p>Let’s take a test on it.</p>
<p>First, insert a row with the maximum value into the people table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>people</span><span class=w> </span><span class=p>(</span><span class=n>person_id</span><span class=p>,</span><span class=n>first_name</span><span class=p>,</span><span class=n>last_name</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=w>	</span><span class=mi>9223372036854775807</span><span class=p>,</span><span class=s1>&#39;Johnathan&#39;</span><span class=p>,</span><span class=s1>&#39;Smith&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Second, insert another row without specifying a value for the person_id column:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>people</span><span class=w> </span><span class=p>(</span><span class=n>first_name</span><span class=p>,</span><span class=n>last_name</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;William&#39;</span><span class=p>,</span><span class=s1>&#39;Gate&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>As clearly shown in the output, the new row received an unused integer.</p>
<p>Consider another example.</p>
<p>First, create a new table named t1 that has one column:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>t1</span><span class=p>(</span><span class=k>c</span><span class=w> </span><span class=nb>text</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Second, insert some rows into the t1 table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t1</span><span class=p>(</span><span class=k>c</span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;A&#39;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t1</span><span class=p>(</span><span class=k>c</span><span class=p>)</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=s1>&#39;B&#39;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t1</span><span class=p>(</span><span class=k>c</span><span class=p>)</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=s1>&#39;C&#39;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t1</span><span class=p>(</span><span class=k>c</span><span class=p>)</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=s1>&#39;D&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Third, query data from the t1 table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>rowid</span><span class=p>,</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>t1</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Fourth, delete all rows of the t1 table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DELETE</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>t1</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Fifth, insert some rows into the t1 table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t1</span><span class=p>(</span><span class=k>c</span><span class=p>)</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=s1>&#39;E&#39;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t1</span><span class=p>(</span><span class=k>c</span><span class=p>)</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=s1>&#39;F&#39;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t1</span><span class=p>(</span><span class=k>c</span><span class=p>)</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=s1>&#39;G&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Finally, query data from the t1 table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>rowid</span><span class=p>,</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>t1</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>As you can see, the rowid 1, 2 and 3 have been reused for the new rows.</p>
<h5 id=sqlite-autoincrement-column-attribute>SQLite AUTOINCREMENT column attribute</h5>
<p>SQLite recommends that you should not use AUTOINCREMENT attribute because:</p>
<p>The AUTOINCREMENT keyword imposes extra CPU, memory, disk space, and disk I/O overhead and should be avoided if not strictly needed. It is usually not needed.</p>
<p>In addition, the way SQLite assigns a value for the AUTOINCREMENT column slightly different from the way it does for the rowid column.</p>
<p>Consider the following example.</p>
<p>First, drop and recreate the people table. This time, we use AUTOINCREMENT attribute column:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>people</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>people</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>   </span><span class=n>person_id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=n>AUTOINCREMENT</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>first_name</span><span class=w> </span><span class=nb>text</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>last_name</span><span class=w> </span><span class=nb>text</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Second, insert a row with the maximum rowid value into the people table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>people</span><span class=w> </span><span class=p>(</span><span class=n>person_id</span><span class=p>,</span><span class=n>first_name</span><span class=p>,</span><span class=n>last_name</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=mi>9223372036854775807</span><span class=p>,</span><span class=s1>&#39;Johnathan&#39;</span><span class=p>,</span><span class=s1>&#39;Smith&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Third, insert another row into the people table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>people</span><span class=w> </span><span class=p>(</span><span class=n>first_name</span><span class=p>,</span><span class=n>last_name</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;John&#39;</span><span class=p>,</span><span class=s1>&#39;Smith&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>This time, SQLite issued an error message because the person_id column did not reuse the number like a rowid column.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=p>[</span><span class=n>Err</span><span class=p>]</span><span class=w> </span><span class=mi>13</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=n>disk</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>full</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>When should you use the AUTOINCREMENT column attribute?</p>
<p>The main purpose of using attribute AUTOINCREMENT is to prevent SQLite to reuse a value that has not been used or a value from the previously deleted row.</p>
<p>If you don’t have any requirement like this, you should not use the AUTOINCREMENT attribute in the primary key.</p>
<h3 id=section-13-views>Section 13. Views</h3>
<h4 id=create-view--introduce-you-to-the-view-concept-and-show-you-how-to-create-a-new-view-in-the-database>Create View – introduce you to the view concept and show you how to create a new view in the database.</h4>
<h5 id=what-is-a-view>What is a view</h5>
<p>In database theory, a view is a result set of a stored query. A view is the way to pack a query into a named object stored in the database.</p>
<p>You can access the data of the underlying tables through a view. The tables that the query in the view definition refers to are called base tables.</p>
<p>A view is useful in some cases:</p>
<ul>
<li>First, views provide an abstraction layer over tables. You can add and remove the columns in the view without touching the schema of the underlying tables.</li>
<li>Second, you can use views to encapsulate complex queries with joins to simplify the data access.</li>
</ul>
<p>SQLite view is read only. It means you cannot use INSERT, DELETE, and UPDATE statements to update data in the base tables through the view.</p>
<h5 id=sqlite-create-view-statement>SQLite CREATE VIEW statement</h5>
<p>To create a view, you use the CREATE VIEW statement as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=p>[</span><span class=n>TEMP</span><span class=p>]</span><span class=w> </span><span class=k>VIEW</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=n>view_name</span><span class=p>[(</span><span class=k>column</span><span class=o>-</span><span class=n>name</span><span class=o>-</span><span class=n>list</span><span class=p>)]</span><span class=w>
</span><span class=w></span><span class=k>AS</span><span class=w> 
</span><span class=w>   </span><span class=k>select</span><span class=o>-</span><span class=k>statement</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>First, specify a name for the view. The IF NOT EXISTS option only creates a new view if it doesn’t exist. If the view already exists, it does nothing.</p>
<p>Second, use the the TEMP or TEMPORARY option if you want the view to be only visible in the current database connection. The view is called a temporary view and SQLite automatically removes the temporary view whenever the database connection is closed.</p>
<p>Third, specify a SELECT statement for the view. By default, the columns of the view derive from the result set of the SELECT statement. However, you can assign the names of the view columns that are different from the column name of the table</p>
<h5 id=sqlite-create-view-examples>SQLite CREATE VIEW examples</h5>
<p>Let’s take some examples of creating a new view using the CREATE VIEW statement.</p>
<ol>
<li>Creating a view to simplify a complex query
The following query gets data from the tracks, albums, media_types and genres tables in the sample database using the inner join clause.</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>   </span><span class=n>trackid</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>tracks</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>albums</span><span class=p>.</span><span class=n>Title</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>album</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>media_types</span><span class=p>.</span><span class=n>Name</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>media</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>genres</span><span class=p>.</span><span class=n>Name</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>genres</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>   </span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>albums</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>Albums</span><span class=p>.</span><span class=n>AlbumId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tracks</span><span class=p>.</span><span class=n>AlbumId</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>media_types</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>media_types</span><span class=p>.</span><span class=n>MediaTypeId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tracks</span><span class=p>.</span><span class=n>MediaTypeId</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>genres</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>genres</span><span class=p>.</span><span class=n>GenreId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tracks</span><span class=p>.</span><span class=n>GenreId</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617717167/SQLite/MySQL-CREATE-VIEW-example_d5c4px.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617717167/SQLite/MySQL-CREATE-VIEW-example_d5c4px.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617717167/SQLite/MySQL-CREATE-VIEW-example_d5c4px.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617717167/SQLite/MySQL-CREATE-VIEW-example_d5c4px.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617717167/SQLite/MySQL-CREATE-VIEW-example_d5c4px.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617717167/SQLite/MySQL-CREATE-VIEW-example_d5c4px.jpg></p>
<p>To create a view based on this query, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>VIEW</span><span class=w> </span><span class=n>v_tracks</span><span class=w> 
</span><span class=w></span><span class=k>AS</span><span class=w> 
</span><span class=w></span><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>trackid</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>albums</span><span class=p>.</span><span class=n>Title</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>album</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>media_types</span><span class=p>.</span><span class=n>Name</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>media</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>genres</span><span class=p>.</span><span class=n>Name</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>genres</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>tracks</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>albums</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>Albums</span><span class=p>.</span><span class=n>AlbumId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tracks</span><span class=p>.</span><span class=n>AlbumId</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>media_types</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>media_types</span><span class=p>.</span><span class=n>MediaTypeId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tracks</span><span class=p>.</span><span class=n>MediaTypeId</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>genres</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>genres</span><span class=p>.</span><span class=n>GenreId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tracks</span><span class=p>.</span><span class=n>GenreId</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>From now on, you can use the following simple query instead of the complex one above.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>v_tracks</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><ol start=2>
<li>Creating a view with custom column names
The following statement creates a view named v_albums that contains album title and the length of album in minutes:</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>VIEW</span><span class=w> </span><span class=n>v_albums</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=n>AlbumTitle</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>Minutes</span><span class=w>
</span><span class=w></span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>AS</span><span class=w>
</span><span class=w>    </span><span class=k>SELECT</span><span class=w> </span><span class=n>albums</span><span class=p>.</span><span class=n>title</span><span class=p>,</span><span class=w>
</span><span class=w>           </span><span class=k>SUM</span><span class=p>(</span><span class=n>milliseconds</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>60000</span><span class=w>
</span><span class=w>      </span><span class=k>FROM</span><span class=w> </span><span class=n>tracks</span><span class=w>
</span><span class=w>           </span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w>
</span><span class=w>           </span><span class=n>albums</span><span class=w> </span><span class=k>USING</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>               </span><span class=n>AlbumId</span><span class=w>
</span><span class=w>           </span><span class=p>)</span><span class=w>
</span><span class=w>     </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>AlbumTitle</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this example, we specified new columns for the view AlbumTitle for the albums.title column and Minutes for the expression SUM(milliseconds) / 60000</p>
<p>This query returns data from the v_albums view:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>v_albums</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=drop-view--show-you-how-to-drop-a-view-from-its-database-schema>Drop View – show you how to drop a view from its database schema.</h4>
<h5 id=introduction-to-sqlite-drop-view-statement>Introduction to SQLite DROP VIEW statement</h5>
<p>The DROP VIEW statement deletes a view from the database schema. Here is the basic syntax of the DROP VIEW statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DROP</span><span class=w> </span><span class=k>VIEW</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>schema_name</span><span class=p>.]</span><span class=n>view_name</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this syntax:</p>
<ul>
<li>
<p>First, specify the name of the view that you wants to remove after the DROP VIEW keywords.</p>
</li>
<li>
<p>Second, specify the schema of the view that you want to delete.</p>
</li>
<li>
<p>Third, use the IF EXISTS option to remove a view only if it exists. If the view does not exist, the DROP VIEW IF EXISTS statement does nothing. However, trying to drop a non-existing view without the IF EXISTS option will result in an error.</p>
</li>
</ul>
<p><strong>Note</strong> that the DROP VIEW statement only removes the view object from the database schema. It does not remove the data of the base tables.</p>
<h5 id=sqlite-drop-view-statement-examples>SQLite DROP VIEW statement examples</h5>
<p>This statement creates a view that summarizes data from the invoices and invoice_items in the sample database:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>VIEW</span><span class=w> </span><span class=n>v_billings</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=n>invoiceid</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>invoicedate</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=n>total</span><span class=w>
</span><span class=w></span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>AS</span><span class=w>
</span><span class=w>    </span><span class=k>SELECT</span><span class=w> </span><span class=n>invoiceid</span><span class=p>,</span><span class=w>
</span><span class=w>           </span><span class=n>invoicedate</span><span class=p>,</span><span class=w>
</span><span class=w>           </span><span class=k>sum</span><span class=p>(</span><span class=n>unit_price</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>quantity</span><span class=p>)</span><span class=w> 
</span><span class=w>      </span><span class=k>FROM</span><span class=w> </span><span class=n>invoices</span><span class=w>
</span><span class=w>           </span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w>
</span><span class=w>           </span><span class=n>invoice_items</span><span class=w> </span><span class=k>USING</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>               </span><span class=n>invoice_id</span><span class=w>
</span><span class=w>           </span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>To delete the v_billings view, you use the following DROP VIEW statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DROP</span><span class=w> </span><span class=k>VIEW</span><span class=w> </span><span class=n>v_billings</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>This example uses the IF EXISTS option to delete a non-existing view:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DROP</span><span class=w> </span><span class=k>VIEW</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=n>v_xyz</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>It does not return any error. However, if you don’t use the IF EXISTS option like the following example, you will get an error:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DROP</span><span class=w> </span><span class=k>VIEW</span><span class=w> </span><span class=n>v_xyz</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Here is the error message:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>Error</span><span class=w> </span><span class=n>while</span><span class=w> </span><span class=n>executing</span><span class=w> </span><span class=k>SQL</span><span class=w> </span><span class=n>query</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=s1>&#39;chinook&#39;</span><span class=p>:</span><span class=w> </span><span class=k>no</span><span class=w> </span><span class=n>such</span><span class=w> </span><span class=k>view</span><span class=p>:</span><span class=w> </span><span class=n>v_xyz</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h3 id=section-14-indexes>Section 14. Indexes</h3>
<h4 id=index--teach-you-about-the-index-and-how-to-utilize-indexes-to-speed-up-your-queries>Index – teach you about the index and how to utilize indexes to speed up your queries.</h4>
<h5 id=what-is-an-index>What is an index?</h5>
<p>In relational databases, a table is a list of rows. In the same time, each row has the same column structure that consists of cells. Each row also has a consecutive rowid sequence number used to identify the row. Therefore, you can consider a table as a list of pairs: (rowid, row).</p>
<p>Unlike a table, an index has an opposite relationship: (row, rowid). An index is an additional data structure that helps improve the performance of a query.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617717707/SQLite/SQLite-Index_avph9o.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617717707/SQLite/SQLite-Index_avph9o.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617717707/SQLite/SQLite-Index_avph9o.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617717707/SQLite/SQLite-Index_avph9o.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617717707/SQLite/SQLite-Index_avph9o.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617717707/SQLite/SQLite-Index_avph9o.png></p>
<p>SQLite uses B-tree for organizing indexes. Note that B stands for balanced, B-tree is a balanced tree, not a binary tree.</p>
<p>The B-tree keeps the amount of data at both sides of the tree balanced so that the number of levels that must be traversed to locate a row is always in the same approximate number. In addition, querying using equality (=) and ranges (>, >=, &lt;,&lt;=) on the B-tree indexes are very efficient.</p>
<h5 id=how-does-an-index-work>How does an index work</h5>
<p>Each index must be associated with a specific table. An index consists of one or more columns, but all columns of an index must be in the same table. A table may have multiple indexes.</p>
<p>Whenever you create an index, SQLite creates a B-tree structure to hold the index data.</p>
<p>The index contains data from the columns that you specify in the index and the corresponding rowid value. This helps SQLite quickly locate the row based on the values of the indexed columns.</p>
<p>Imagine an index in the database like an index of a book. By looking at the index, you can quickly identify page numbers based on the keywords.</p>
<h5 id=sqlite-create-index-statement>SQLite CREATE INDEX statement</h5>
<p>To create an index, you use the CREATE INDEX statement with the following syntax:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=p>[</span><span class=k>UNIQUE</span><span class=p>]</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>index_name</span><span class=w> 
</span><span class=w></span><span class=k>ON</span><span class=w> </span><span class=k>table_name</span><span class=p>(</span><span class=n>column_list</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>To create an index, you specify three important information:</p>
<ul>
<li>The name of the index after the CREATE INDEX keywords.</li>
<li>The name of the table to the index belongs.</li>
<li>A list of columns of the index.</li>
</ul>
<p>In case you want to make sure that values in one or more columns are unique like email and phone, you use the UNIQUE option in the CREATE INDEX statement. The CREATE UNIQUE INDEX creates a new unique index.</p>
<p>SQLite UNIQUE index example
Let’s create a new table named contacts for demonstration.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>contacts</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=n>first_name</span><span class=w> </span><span class=nb>text</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>last_name</span><span class=w> </span><span class=nb>text</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>email</span><span class=w> </span><span class=nb>text</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Suppose, you want to enforce that the email is unique, you create a unique index as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>UNIQUE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>idx_contacts_email</span><span class=w> 
</span><span class=w></span><span class=k>ON</span><span class=w> </span><span class=n>contacts</span><span class=w> </span><span class=p>(</span><span class=n>email</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>To test this.</p>
<p>First, insert a row into the contacts table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>contacts</span><span class=w> </span><span class=p>(</span><span class=n>first_name</span><span class=p>,</span><span class=w> </span><span class=n>last_name</span><span class=p>,</span><span class=w> </span><span class=n>email</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;John&#39;</span><span class=p>,</span><span class=s1>&#39;Doe&#39;</span><span class=p>,</span><span class=s1>&#39;john.doe@sqlitetutorial.net&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Second, insert another row with a duplicate email.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>contacts</span><span class=w> </span><span class=p>(</span><span class=n>first_name</span><span class=p>,</span><span class=w> </span><span class=n>last_name</span><span class=p>,</span><span class=w> </span><span class=n>email</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;Johny&#39;</span><span class=p>,</span><span class=s1>&#39;Doe&#39;</span><span class=p>,</span><span class=s1>&#39;john.doe@sqlitetutorial.net&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>SQLite issued an error message indicating that the unique index has been violated. Because when you inserted the second row, SQLite checked and made sure that the email is unique across of rows in email of the contacts table.</p>
<p>Let’s insert two more rows into the contacts table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>contacts</span><span class=w> </span><span class=p>(</span><span class=n>first_name</span><span class=p>,</span><span class=w> </span><span class=n>last_name</span><span class=p>,</span><span class=w> </span><span class=n>email</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;David&#39;</span><span class=p>,</span><span class=s1>&#39;Brown&#39;</span><span class=p>,</span><span class=s1>&#39;david.brown@sqlitetutorial.net&#39;</span><span class=p>),</span><span class=w>
</span><span class=w>      </span><span class=p>(</span><span class=s1>&#39;Lisa&#39;</span><span class=p>,</span><span class=s1>&#39;Smith&#39;</span><span class=p>,</span><span class=s1>&#39;lisa.smith@sqlitetutorial.net&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>If you query data from the contacts table based on a specific email, SQLite will use the index to locate the data. See the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>first_name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>last_name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>email</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>contacts</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>email</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;lisa.smith@sqlitetutorial.net&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718121/SQLite/SQLite-index-example_iwt105.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718121/SQLite/SQLite-index-example_iwt105.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718121/SQLite/SQLite-index-example_iwt105.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718121/SQLite/SQLite-index-example_iwt105.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718121/SQLite/SQLite-index-example_iwt105.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718121/SQLite/SQLite-index-example_iwt105.jpg></p>
<p>To check if SQLite uses the index or not, you use the EXPLAIN QUERY PLAN statement as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>EXPLAIN</span><span class=w> </span><span class=n>QUERY</span><span class=w> </span><span class=n>PLAN</span><span class=w> 
</span><span class=w></span><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>first_name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>last_name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>email</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>contacts</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>email</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;lisa.smith@sqlitetutorial.net&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718197/SQLite/SQLite-Index-Explain-example_et20ei.jpg data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718197/SQLite/SQLite-Index-Explain-example_et20ei.jpg, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718197/SQLite/SQLite-Index-Explain-example_et20ei.jpg 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718197/SQLite/SQLite-Index-Explain-example_et20ei.jpg 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718197/SQLite/SQLite-Index-Explain-example_et20ei.jpg title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718197/SQLite/SQLite-Index-Explain-example_et20ei.jpg></p>
<h5 id=sqlite-multicolumn-index-example>SQLite multicolumn index example</h5>
<p>If you create an index that consists of one column, SQLite uses that column as the sort key. In case you create an index that has multiple columns, SQLite uses the additional columns as the second, third, … as the sort keys.</p>
<p>SQLite sorts the data on the multicolumn index by the first column specified in the CREATE INDEX statement. Then, it sorts the duplicate values by the second column, and so on.</p>
<p>Therefore, the column order is very important when you create a multicolumn index.</p>
<p>To utilize a multicolumn index, the query must contain the condition that has the same column order as defined in the index.</p>
<p>The following statement creates a multicolumn index on the first_name and last_name columns of the contacts table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>idx_contacts_name</span><span class=w> 
</span><span class=w></span><span class=k>ON</span><span class=w> </span><span class=n>contacts</span><span class=w> </span><span class=p>(</span><span class=n>first_name</span><span class=p>,</span><span class=w> </span><span class=n>last_name</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>If you query the contacts table with one of the following conditions in the WHERE clause, SQLite will utilize the multicolumn index to search for data.</p>
<ol>
<li>filter data by the first_name column.</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>first_name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;John&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>2)filter data by both first_name and last_name columns:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>first_name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;John&#39;</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>last_name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Doe&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>However, SQLite will not use the multicolumn index if you use one of the following conditions.</p>
<p>1)filter by the last_name column only.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>WHERE</span><span class=w>
</span><span class=w>	</span><span class=n>last_name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Doe&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><ol start=2>
<li>filter by first_name OR last_name columns.</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>last_name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Doe&#39;</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=n>first_name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;John&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h5 id=sqlite-show-indexes>SQLite Show Indexes</h5>
<p>To find all indexes associated with a table, you use the following command:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>PRAGMA</span><span class=w> </span><span class=n>index_list</span><span class=p>(</span><span class=s1>&#39;table_name&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>For example, this statement shows all the indexes of the contacts table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>PRAGMA</span><span class=w> </span><span class=n>index_list</span><span class=p>(</span><span class=s1>&#39;playlist_track&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Here is the output:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718675/SQLite/SQLite-index-show-indexes_bx0g6g.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718675/SQLite/SQLite-index-show-indexes_bx0g6g.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718675/SQLite/SQLite-index-show-indexes_bx0g6g.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718675/SQLite/SQLite-index-show-indexes_bx0g6g.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718675/SQLite/SQLite-index-show-indexes_bx0g6g.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718675/SQLite/SQLite-index-show-indexes_bx0g6g.png></p>
<p>To get the information about the columns in an index, you use the following command:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>PRAGMA</span><span class=w> </span><span class=n>index_info</span><span class=p>(</span><span class=s1>&#39;idx_contacts_name&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>This example returns the column list of the index idx_contacts_name:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718757/SQLite/SQLite-index-column-list_ula7vh.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718757/SQLite/SQLite-index-column-list_ula7vh.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718757/SQLite/SQLite-index-column-list_ula7vh.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718757/SQLite/SQLite-index-column-list_ula7vh.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718757/SQLite/SQLite-index-column-list_ula7vh.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617718757/SQLite/SQLite-index-column-list_ula7vh.png></p>
<p>Another way to get all indexes from a database is to query from the sqlite_master table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>   </span><span class=k>type</span><span class=p>,</span><span class=w> 
</span><span class=w>   </span><span class=n>name</span><span class=p>,</span><span class=w> 
</span><span class=w>   </span><span class=n>tbl_name</span><span class=p>,</span><span class=w> 
</span><span class=w>   </span><span class=k>sql</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>   </span><span class=n>sqlite_master</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>   </span><span class=k>type</span><span class=o>=</span><span class=w> </span><span class=s1>&#39;index&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h5 id=sqlite-drop-index-statement>SQLite DROP INDEX statement</h5>
<p>To remove an index from a database, you use the DROP INDEX statement as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DROP</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=n>index_name</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this syntax, you specify the name of the index that you want to drop after the DROP INDEX keywords. The IF EXISTS option removes an index only if it exists.</p>
<p>For example, you use the following statement to remove the idx_contacts_name index:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DROP</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>idx_contacts_name</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The idx_contacts_name index is removed completely from the database.</p>
<h4 id=index-for-expressions--show-you-how-to-use-the-expression-based-index>Index for Expressions – show you how to use the expression-based index.</h4>
<h5 id=introduction-to-the-sqlite-expression-based-index>Introduction to the SQLite expression-based index</h5>
<p>When you create an index, you often use one or more columns in a table. Besides the normal indexes, SQLite allows you to form an index based on expressions involved table columns. This kind of index is called an expression based index.</p>
<p>The following query selects the customers whose the length of the company is greater than 10 characters.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>customerid</span><span class=p>,</span><span class=w>
</span><span class=w>       </span><span class=n>company</span><span class=w>
</span><span class=w>  </span><span class=k>FROM</span><span class=w> </span><span class=n>customers</span><span class=w>
</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=k>length</span><span class=p>(</span><span class=n>company</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>10</span><span class=w>
</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=k>length</span><span class=p>(</span><span class=n>company</span><span class=p>)</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>If you use the EXPLAIN QUERY PLAN statement, you will find that SQLite query planner had to scan the whole customers table to return the result set.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>EXPLAIN</span><span class=w> </span><span class=n>QUERY</span><span class=w> </span><span class=n>PLAN</span><span class=w>
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>customerid</span><span class=p>,</span><span class=w>
</span><span class=w>       </span><span class=n>company</span><span class=w>
</span><span class=w>  </span><span class=k>FROM</span><span class=w> </span><span class=n>customers</span><span class=w>
</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=k>length</span><span class=p>(</span><span class=n>company</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>10</span><span class=w>
</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=k>length</span><span class=p>(</span><span class=n>company</span><span class=p>)</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The SQLite query planner is a software component that determines the best algorithm or query plan to execute an SQL statement. As of SQLite version 3.8.0, the query planner component was rewritten to run faster and generate better query plans. The rewrite is known as the next generation query planner or NGQP.</p>
<p>To create an index based on the expression LENGTH(company), you use the following statement.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>customers_length_company</span><span class=w> 
</span><span class=w></span><span class=k>ON</span><span class=w> </span><span class=n>customers</span><span class=p>(</span><span class=k>LENGTH</span><span class=p>(</span><span class=n>company</span><span class=p>));</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Now if you execute the query above again, SQLite will use the expression index to search to select the data, which is faster.</p>
<h5 id=how-the-sqlite-expression-based-index-work>How the SQLite expression-based index work</h5>
<p>The SQLite query planner uses the expression-based index only when the expression, which you specified in the CREATE INDEX statement, appears the same as in the WHERE clause or ORDER BY clause.</p>
<p>For example, in the sample database, we have the invoice_items table.</p>
<p>The following statement creates an index using the unit price and quantity columns.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>invoice_line_amount</span><span class=w> 
</span><span class=w></span><span class=k>ON</span><span class=w> </span><span class=n>invoice_items</span><span class=p>(</span><span class=n>unitprice</span><span class=o>*</span><span class=n>quantity</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>However, when you run the following query:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>EXPLAIN</span><span class=w> </span><span class=n>QUERY</span><span class=w> </span><span class=n>PLAN</span><span class=w> 
</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>invoicelineid</span><span class=p>,</span><span class=w>
</span><span class=w>       </span><span class=n>invoiceid</span><span class=p>,</span><span class=w> 
</span><span class=w>       </span><span class=n>unitprice</span><span class=o>*</span><span class=n>quantity</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>invoice_items</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>quantity</span><span class=o>*</span><span class=n>unitprice</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The SQLite query planner did not use the index because the expression in the CREATE INDEX ( unitprice*quantity) is not the same as the one in the WHERE clause (quantity*unitprice)</p>
<h5 id=sqlite-expression-based-index-restriction>SQLite expression based index restriction</h5>
<p>The following lists all the restrictions on the expression that appears in the CREATE INDEX statement.</p>
<ol>
<li>The expression must refer to the columns of the table that is being indexed only. It cannot refer to the columns of other tables.</li>
<li>The expression can only use the deterministic function call.</li>
<li>The expression cannot use a subquery.</li>
</ol>
<h3 id=section-15-triggers>Section 15. Triggers</h3>
<h4 id=trigger--manage-triggers-in-the-sqlite-database>Trigger – manage triggers in the SQLite database.</h4>
<h5 id=what-is-an-sqlite-trigger>What is an SQLite trigger</h5>
<p>An SQLite trigger is a named database object that is executed automatically when an INSERT, UPDATE or DELETE statement is issued against the associated table.</p>
<h5 id=when-do-we-need-sqlite-triggers>When do we need SQLite triggers</h5>
<p>You often use triggers to enable sophisticated auditing. For example, you want to log the changes in the sensitive data such as salary and address whenever it changes.</p>
<p>In addition, you use triggers to enforce complex business rules centrally at the database level and prevent invalid transactions.</p>
<h5 id=sqlite-create-trigger-statement>SQLite CREATE TRIGGER statement</h5>
<p>To create a new trigger in SQLite, you use the CREATE TRIGGER statement as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TRIGGER</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=k>trigger_name</span><span class=w> 
</span><span class=w>   </span><span class=p>[</span><span class=k>BEFORE</span><span class=o>|</span><span class=k>AFTER</span><span class=o>|</span><span class=k>INSTEAD</span><span class=w> </span><span class=k>OF</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>INSERT</span><span class=o>|</span><span class=k>UPDATE</span><span class=o>|</span><span class=k>DELETE</span><span class=p>]</span><span class=w> 
</span><span class=w>   </span><span class=k>ON</span><span class=w> </span><span class=k>table_name</span><span class=w>
</span><span class=w>   </span><span class=p>[</span><span class=k>WHEN</span><span class=w> </span><span class=n>condition</span><span class=p>]</span><span class=w>
</span><span class=w></span><span class=k>BEGIN</span><span class=w>
</span><span class=w> </span><span class=n>statements</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=k>END</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this syntax:</p>
<ul>
<li>First, specify the name of the trigger after the CREATE TRIGGER keywords.</li>
<li>Next, determine when the trigger is fired such as BEFORE, AFTER, or INSTEAD OF. You can create BEFORE and AFTER triggers on a table. However, you can only create an INSTEAD OF trigger on a view.</li>
<li>Then, specify the event that causes the trigger to be invoked such as INSERT, UPDATE, or DELETE.</li>
<li>After that, indicate the table to which the trigger belongs.</li>
<li>Finally, place the trigger logic in the BEGIN END block, which can be any valid SQL statements.</li>
</ul>
<p>If you combine the time when the trigger is fired and the event that causes the trigger to be fired, you have a total of 9 possibilities:</p>
<ul>
<li>BEFORE INSERT</li>
<li>AFTER INSERT</li>
<li>BEFORE UPDATE</li>
<li>AFTER UPDATE</li>
<li>BEFORE DELETE</li>
<li>AFTER DELETE</li>
<li>INSTEAD OF INSERT</li>
<li>INSTEAD OF DELETE</li>
<li>INSTEAD OF UPDATE</li>
</ul>
<p>Suppose you use a UPDATE statement to update 10 rows in a table, the trigger that associated with the table is fired 10 times. This trigger is called FOR EACH ROW trigger. If the trigger associated with the table is fired one time, we call this trigger a FOR EACH STATEMENT trigger.</p>
<p>As of version 3.9.2, SQLite only supports FOR EACH ROW triggers. It has not yet supported the FOR EACH STATEMENT triggers.</p>
<p>If you use a condition in the WHEN clause, the trigger is only invoked when the condition is true. In case you omit the WHEN clause, the trigger is executed for all rows.</p>
<p><strong>Notice</strong> that if you drop a table, all associated triggers are also deleted. However, if the trigger references other tables, the trigger is not removed or changed if other tables are removed or updated.</p>
<p>For example, a trigger references to a table named people, you drop the people table or rename it, you need to manually change the definition of the trigger.</p>
<p>You can access the data of the row being inserted, deleted, or updated using the OLD and NEW references in the form: OLD.column_name and NEW.column_name.</p>
<p>the OLD and NEW references are available depending on the event that causes the trigger to be fired.</p>
<p>The following table illustrates the rules.:</p>
<table>
<thead>
<tr>
<th>Action</th>
<th>Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td>INSERT</td>
<td>NEW is available</td>
</tr>
<tr>
<td>UPDATE</td>
<td>Both NEW and OLD are available</td>
</tr>
<tr>
<td>DELETE</td>
<td>OLD is available</td>
</tr>
</tbody>
</table>
<h5 id=sqlite-triggers-examples>SQLite triggers examples</h5>
<p>Let’s create a new table called leads to store all business leads of the company.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>leads</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=n>id</span><span class=w> </span><span class=nb>integer</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>first_name</span><span class=w> </span><span class=nb>text</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>last_name</span><span class=w> </span><span class=nb>text</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>phone</span><span class=w> </span><span class=nb>text</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>email</span><span class=w> </span><span class=nb>text</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=k>source</span><span class=w> </span><span class=nb>text</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><ol>
<li>SQLite BEFORE INSERT trigger example
Suppose you want to validate the email address before inserting a new lead into the leads table. In this case, you can use a BEFORE INSERT trigger.</li>
</ol>
<p>First, create a BEFORE INSERT trigger as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TRIGGER</span><span class=w> </span><span class=n>validate_email_before_insert_leads</span><span class=w> 
</span><span class=w>   </span><span class=k>BEFORE</span><span class=w> </span><span class=k>INSERT</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>leads</span><span class=w>
</span><span class=w></span><span class=k>BEGIN</span><span class=w>
</span><span class=w>   </span><span class=k>SELECT</span><span class=w>
</span><span class=w>      </span><span class=k>CASE</span><span class=w>
</span><span class=w>	</span><span class=k>WHEN</span><span class=w> </span><span class=k>NEW</span><span class=p>.</span><span class=n>email</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;%_@__%.__%&#39;</span><span class=w> </span><span class=k>THEN</span><span class=w>
</span><span class=w>   	  </span><span class=n>RAISE</span><span class=w> </span><span class=p>(</span><span class=k>ABORT</span><span class=p>,</span><span class=s1>&#39;Invalid email address&#39;</span><span class=p>)</span><span class=w>
</span><span class=w>       </span><span class=k>END</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=k>END</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>We used the NEW reference to access the email column of the row that is being inserted.</p>
<p>To validate the email, we used the LIKE operator to determine whether the email is valid or not based on the email pattern. If the email is not valid, the RAISE function aborts the insert and issues an error message.</p>
<p>Second, insert a row with an invalid email into the leads table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>leads</span><span class=w> </span><span class=p>(</span><span class=n>first_name</span><span class=p>,</span><span class=n>last_name</span><span class=p>,</span><span class=n>email</span><span class=p>,</span><span class=n>phone</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;John&#39;</span><span class=p>,</span><span class=s1>&#39;Doe&#39;</span><span class=p>,</span><span class=s1>&#39;jjj&#39;</span><span class=p>,</span><span class=s1>&#39;4089009334&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>SQLite issued an error: “Invalid email address” and aborted the execution of the insert.</p>
<p>Third, insert a row with a valid email.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>leads</span><span class=w> </span><span class=p>(</span><span class=n>first_name</span><span class=p>,</span><span class=w> </span><span class=n>last_name</span><span class=p>,</span><span class=w> </span><span class=n>email</span><span class=p>,</span><span class=w> </span><span class=n>phone</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;John&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Doe&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;john.doe@sqlitetutorial.net&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;4089009334&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Because the email is valid, the insert statement executed successfully.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>	</span><span class=n>first_name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>last_name</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>email</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>phone</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>	</span><span class=n>leads</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617720336/SQLite/SQLite-TRIGGER-Leads-Table_uwgkfb.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617720336/SQLite/SQLite-TRIGGER-Leads-Table_uwgkfb.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617720336/SQLite/SQLite-TRIGGER-Leads-Table_uwgkfb.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617720336/SQLite/SQLite-TRIGGER-Leads-Table_uwgkfb.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617720336/SQLite/SQLite-TRIGGER-Leads-Table_uwgkfb.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617720336/SQLite/SQLite-TRIGGER-Leads-Table_uwgkfb.png></p>
<ol start=2>
<li>SQLite AFTER UPDATE trigger example
The phones and emails of the leads are so important that you can’t afford to lose this information. For example, someone accidentally updates the email or phone to the wrong ones or even delete it.</li>
</ol>
<p>To protect this valuable data, you use a trigger to log all changes which are made to the phone and email.</p>
<p>First, create a new table called lead_logs to store the historical data.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>lead_logs</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=n>id</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>old_id</span><span class=w> </span><span class=nb>int</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>new_id</span><span class=w> </span><span class=nb>int</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>old_phone</span><span class=w> </span><span class=nb>text</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>new_phone</span><span class=w> </span><span class=nb>text</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>old_email</span><span class=w> </span><span class=nb>text</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>new_email</span><span class=w> </span><span class=nb>text</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>user_action</span><span class=w> </span><span class=nb>text</span><span class=p>,</span><span class=w>
</span><span class=w>	</span><span class=n>created_at</span><span class=w> </span><span class=nb>text</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Second, create an AFTER UPDATE trigger to log data to the lead_logs table whenever there is an update in the email or phone column.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TRIGGER</span><span class=w> </span><span class=n>log_contact_after_update</span><span class=w> 
</span><span class=w>   </span><span class=k>AFTER</span><span class=w> </span><span class=k>UPDATE</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>leads</span><span class=w>
</span><span class=w>   </span><span class=k>WHEN</span><span class=w> </span><span class=k>old</span><span class=p>.</span><span class=n>phone</span><span class=w> </span><span class=o>&lt;&gt;</span><span class=w> </span><span class=k>new</span><span class=p>.</span><span class=n>phone</span><span class=w>
</span><span class=w>        </span><span class=k>OR</span><span class=w> </span><span class=k>old</span><span class=p>.</span><span class=n>email</span><span class=w> </span><span class=o>&lt;&gt;</span><span class=w> </span><span class=k>new</span><span class=p>.</span><span class=n>email</span><span class=w>
</span><span class=w></span><span class=k>BEGIN</span><span class=w>
</span><span class=w>	</span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>lead_logs</span><span class=w> </span><span class=p>(</span><span class=w>
</span><span class=w>		</span><span class=n>old_id</span><span class=p>,</span><span class=w>
</span><span class=w>		</span><span class=n>new_id</span><span class=p>,</span><span class=w>
</span><span class=w>		</span><span class=n>old_phone</span><span class=p>,</span><span class=w>
</span><span class=w>		</span><span class=n>new_phone</span><span class=p>,</span><span class=w>
</span><span class=w>		</span><span class=n>old_email</span><span class=p>,</span><span class=w>
</span><span class=w>		</span><span class=n>new_email</span><span class=p>,</span><span class=w>
</span><span class=w>		</span><span class=n>user_action</span><span class=p>,</span><span class=w>
</span><span class=w>		</span><span class=n>created_at</span><span class=w>
</span><span class=w>	</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=w>
</span><span class=w>	</span><span class=p>(</span><span class=w>
</span><span class=w>		</span><span class=k>old</span><span class=p>.</span><span class=n>id</span><span class=p>,</span><span class=w>
</span><span class=w>		</span><span class=k>new</span><span class=p>.</span><span class=n>id</span><span class=p>,</span><span class=w>
</span><span class=w>		</span><span class=k>old</span><span class=p>.</span><span class=n>phone</span><span class=p>,</span><span class=w>
</span><span class=w>		</span><span class=k>new</span><span class=p>.</span><span class=n>phone</span><span class=p>,</span><span class=w>
</span><span class=w>		</span><span class=k>old</span><span class=p>.</span><span class=n>email</span><span class=p>,</span><span class=w>
</span><span class=w>		</span><span class=k>new</span><span class=p>.</span><span class=n>email</span><span class=p>,</span><span class=w>
</span><span class=w>		</span><span class=s1>&#39;UPDATE&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>		</span><span class=n>DATETIME</span><span class=p>(</span><span class=s1>&#39;NOW&#39;</span><span class=p>)</span><span class=w>
</span><span class=w>	</span><span class=p>)</span><span class=w> </span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=k>END</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>You notice that in the condition in the WHEN clause specifies that the trigger is invoked only when there is a change in either email or phone column.</p>
<p>Third, update the last name of John from Doe to Smith.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>UPDATE</span><span class=w> </span><span class=n>leads</span><span class=w>
</span><span class=w></span><span class=k>SET</span><span class=w> 
</span><span class=w>   </span><span class=n>last_name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Smith&#39;</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>   </span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>The trigger log_contact_after_update was not invoked because there was no change in email or phone.</p>
<p>Fourth, update both email and phone of John to the new ones.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>UPDATE</span><span class=w> </span><span class=n>leads</span><span class=w>
</span><span class=w></span><span class=k>SET</span><span class=w> 
</span><span class=w>   </span><span class=n>phone</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;4089998888&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>   </span><span class=n>email</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;john.smith@sqlitetutorial.net&#39;</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w>
</span><span class=w>   </span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>If you check the log table, you will see there is a new entry there.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>   </span><span class=n>old_phone</span><span class=p>,</span><span class=w> 
</span><span class=w>   </span><span class=n>new_phone</span><span class=p>,</span><span class=w> 
</span><span class=w>   </span><span class=n>old_email</span><span class=p>,</span><span class=w> 
</span><span class=w>   </span><span class=n>new_email</span><span class=p>,</span><span class=w> 
</span><span class=w>   </span><span class=n>user_action</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>   </span><span class=n>lead_logs</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617720677/SQLite/SQLite-TRIGGER-After-Update-Trigger-Example_dpoizb.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617720677/SQLite/SQLite-TRIGGER-After-Update-Trigger-Example_dpoizb.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617720677/SQLite/SQLite-TRIGGER-After-Update-Trigger-Example_dpoizb.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617720677/SQLite/SQLite-TRIGGER-After-Update-Trigger-Example_dpoizb.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617720677/SQLite/SQLite-TRIGGER-After-Update-Trigger-Example_dpoizb.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617720677/SQLite/SQLite-TRIGGER-After-Update-Trigger-Example_dpoizb.png></p>
<p>You can develop the AFTER INSERT and AFTER DELETE triggers to log the data in the lead_logs table as an excercise.</p>
<h5 id=sqlite-drop-trigger-statement>SQLite DROP TRIGGER statement</h5>
<p>To drop an existing trigger, you use the DROP TRIGGER statement as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DROP</span><span class=w> </span><span class=k>TRIGGER</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=k>trigger_name</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this syntax:</p>
<ul>
<li>First, specify the name of the trigger that you want to drop after the DROP TRIGGER keywords.</li>
<li>Second, use the IF EXISTS option to delete the trigger only if it exists.
Note that if you drop a table, SQLite will automatically drop all triggers associated with the table.</li>
</ul>
<p>For example, to remove the validate_email_before_insert_leads trigger, you use the following statement:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DROP</span><span class=w> </span><span class=k>TRIGGER</span><span class=w> </span><span class=n>validate_email_before_insert_leads</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=create-instead-of-triggers--learn-about-instead-of-triggers-and-how-to-create-an-instead-of-trigger-to-update-data-via-a-view>Create INSTEAD OF triggers – learn about INSTEAD OF triggers and how to create an INSTEAD OF trigger to update data via a view.</h4>
<h5 id=what-are-instead-of-triggers-in-sqlite>What are INSTEAD OF triggers in SQLite</h5>
<p>In SQLite, an INSTEAD OF trigger can be only created based on a view, not a table.</p>
<p>Views are read-only in SQLite. And if you issue a DML statement such as INSERT, UPDATE, or DELETE against a view, you will receive an error.</p>
<p>When a view has an INSTEAD OF trigger, the trigger will fire when you issue a corresponding DML statement. This allows you to inject your own logic in the processing flow.</p>
<p>For example, if a view has an INSTEAD OF INSERT trigger, when you issue an INSERT statement, the trigger will fire automatically. Inside the trigger, you can perform insert, update, or delete data in the base tables.</p>
<p>In other words, the INSTEAD OF triggers allow views to become modifiable.</p>
<p>The following illustrates the syntax of creating an INSTEAD OF trigger in SQLite:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TRIGGER</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=n>schema_ame</span><span class=p>.</span><span class=k>trigger_name</span><span class=w>
</span><span class=w>    </span><span class=k>INSTEAD</span><span class=w> </span><span class=k>OF</span><span class=w> </span><span class=p>[</span><span class=k>DELETE</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>INSERT</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>UPDATE</span><span class=w> </span><span class=k>OF</span><span class=w> </span><span class=k>column_name</span><span class=p>]</span><span class=w>
</span><span class=w>    </span><span class=k>ON</span><span class=w> </span><span class=k>table_name</span><span class=w>
</span><span class=w></span><span class=k>BEGIN</span><span class=w>
</span><span class=w>    </span><span class=c1>-- insert code here
</span><span class=c1></span><span class=k>END</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this syntax:</p>
<ul>
<li>First, specify the name of the trigger after the CREATE TRIGGER keywords. Use IF NOT EXISTS if you want to create the trigger if it exists only.</li>
<li>Second, use the INSTEAD OF keywords followed by a triggering event such as INSERT, UPDATE, or DELETE.</li>
<li>Third, specify the name of the view to which the trigger belongs.</li>
<li>Finally, specify the code that executes the logic.</li>
</ul>
<h5 id=sqlite-instead-of-trigger-example>SQLite INSTEAD OF trigger example</h5>
<p>For the demonstration, we will use the Artists and Albums tables from the sample database.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617696091/SQLite/artists_albums_ako5gi.png></p>
<p>First, create a view named AlbumArtists based on data from the Artists and Albums tables:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>VIEW</span><span class=w> </span><span class=n>AlbumArtists</span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=n>AlbumTitle</span><span class=p>,</span><span class=w> 
</span><span class=w>    </span><span class=n>ArtistName</span><span class=w>
</span><span class=w></span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> 
</span><span class=w></span><span class=k>SELECT</span><span class=w> 
</span><span class=w>    </span><span class=n>Title</span><span class=p>,</span><span class=w> 
</span><span class=w>    </span><span class=n>Name</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> 
</span><span class=w>    </span><span class=n>Albums</span><span class=w>
</span><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>Artists</span><span class=w> </span><span class=k>USING</span><span class=w> </span><span class=p>(</span><span class=n>ArtistId</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Second, use this query to verify data from the view:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>AlbumArtists</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Third, insert a new row into the AlbumArtists view:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>AlbumArtists</span><span class=p>(</span><span class=n>AlbumTitle</span><span class=p>,</span><span class=n>ArtistName</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;Who Do You Trust?&#39;</span><span class=p>,</span><span class=s1>&#39;Papa Roach&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>SQLite issued the following error:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=p>[</span><span class=n>SQLITE_ERROR</span><span class=p>]</span><span class=w> </span><span class=k>SQL</span><span class=w> </span><span class=n>error</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=n>missing</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=p>(</span><span class=n>cannot</span><span class=w> </span><span class=k>modify</span><span class=w> </span><span class=n>AlbumArtists</span><span class=w> </span><span class=n>because</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=k>view</span><span class=p>)</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Fourth, create an INSTEAD OF trigger that fires when a new row is inserted into the AlbumArtists table:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TRIGGER</span><span class=w> </span><span class=n>insert_artist_album_trg</span><span class=w>
</span><span class=w>    </span><span class=k>INSTEAD</span><span class=w> </span><span class=k>OF</span><span class=w> </span><span class=k>INSERT</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>AlbumArtists</span><span class=w>
</span><span class=w></span><span class=k>BEGIN</span><span class=w>
</span><span class=w>    </span><span class=c1>-- insert the new artist first
</span><span class=c1></span><span class=w>    </span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>Artists</span><span class=p>(</span><span class=n>Name</span><span class=p>)</span><span class=w>
</span><span class=w>    </span><span class=k>VALUES</span><span class=p>(</span><span class=k>NEW</span><span class=p>.</span><span class=n>ArtistName</span><span class=p>);</span><span class=w>
</span><span class=w>    
</span><span class=w>    </span><span class=c1>-- use the artist id to insert a new album
</span><span class=c1></span><span class=w>    </span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>Albums</span><span class=p>(</span><span class=n>Title</span><span class=p>,</span><span class=w> </span><span class=n>ArtistId</span><span class=p>)</span><span class=w>
</span><span class=w>    </span><span class=k>VALUES</span><span class=p>(</span><span class=k>NEW</span><span class=p>.</span><span class=n>AlbumTitle</span><span class=p>,</span><span class=w> </span><span class=n>last_insert_rowid</span><span class=p>());</span><span class=w>
</span><span class=w></span><span class=k>END</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In this trigger:</p>
<ul>
<li>First, insert a new row into the Artists table. SQLite automatically generates an integer for the ArtistId column.</li>
<li>Second, use the last_insert_rowid() to get the generated value from the ArtistId column and insert a new row into the Albums table.</li>
</ul>
<p>Finally, verify insert from the Artists and Albums tables:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w>
</span><span class=w>  </span><span class=o>*</span><span class=w>   
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>    </span><span class=n>Artists</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>    </span><span class=n>ArtistId</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>SELECT</span><span class=w>
</span><span class=w></span><span class=o>*</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w>
</span><span class=w>    </span><span class=n>Albums</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w>
</span><span class=w>    </span><span class=n>AlbumId</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721384/SQLite/SQLite-INSTEAD-OF-Trigger-Albums-Table_jtwywd.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721384/SQLite/SQLite-INSTEAD-OF-Trigger-Albums-Table_jtwywd.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721384/SQLite/SQLite-INSTEAD-OF-Trigger-Albums-Table_jtwywd.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721384/SQLite/SQLite-INSTEAD-OF-Trigger-Albums-Table_jtwywd.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721384/SQLite/SQLite-INSTEAD-OF-Trigger-Albums-Table_jtwywd.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721384/SQLite/SQLite-INSTEAD-OF-Trigger-Albums-Table_jtwywd.png>
<img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721384/SQLite/SQLite-INSTEAD-OF-Trigger-Artists-Table_xxgnns.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721384/SQLite/SQLite-INSTEAD-OF-Trigger-Artists-Table_xxgnns.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721384/SQLite/SQLite-INSTEAD-OF-Trigger-Artists-Table_xxgnns.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721384/SQLite/SQLite-INSTEAD-OF-Trigger-Artists-Table_xxgnns.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721384/SQLite/SQLite-INSTEAD-OF-Trigger-Artists-Table_xxgnns.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721384/SQLite/SQLite-INSTEAD-OF-Trigger-Artists-Table_xxgnns.png></p>
<p>As you can see the output, a new row has been inserted into the Artists and Albums tables.</p>
<h3 id=section-16-full-text-search>Section 16. Full-text search</h3>
<p>Full-text search – get started with the full-text search in SQLite.</p>
<h4 id=introduction-to-sqlite-full-text-search>Introduction to SQLite full-text search</h4>
<p>A virtual table is a custom extension to SQLite. A virtual table is like a normal table. The difference between a virtual table and a normal table is where the data come from i.e., when you process a normal table, SQLite accesses the database file to retrieve data. However, when you access a virtual table, SQLite calls the custom code to get the data. The custom code can have specified logic to handle certain tasks such as getting data from multiple data sources.</p>
<p>To use full-text search in SQLite, you use FTS5 virtual table module.</p>
<p>The following CREATE VIRTUAL TABLE statement creates an FTS5 table with two columns:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=n>VIRTUAL</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>table_name</span><span class=w> 
</span><span class=w></span><span class=k>USING</span><span class=w> </span><span class=n>FTS5</span><span class=p>(</span><span class=n>column1</span><span class=p>,</span><span class=n>column2</span><span class=p>...);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Notice that you cannot add types, constraints, or PRIMARY KEY declaration in the CREATE VIRTUAL TABLE statement for creating an FTS5 table. If you do so, SQLite will issue an error.</p>
<p>Like creating a normal table without specifying the primary key column, SQLite adds an implicit rowid column to the FTS5 table.</p>
<p>The following example creates an FTS5 table named posts with two columns title and body.A</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=n>VIRTUAL</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>posts</span><span class=w> 
</span><span class=w></span><span class=k>USING</span><span class=w> </span><span class=n>FTS5</span><span class=p>(</span><span class=n>title</span><span class=p>,</span><span class=w> </span><span class=n>body</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Notice that you cannot add types, constraints, or PRIMARY KEY declaration in the CREATE VIRTUAL TABLE statement for creating an FTS5 table. If you do so, SQLite will issue an error.</p>
<p>Like creating a normal table without specifying the primary key column, SQLite adds an implicit rowid column to the FTS5 table.</p>
<p>The following example creates an FTS5 table named posts with two columns title and body.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=n>VIRTUAL</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>posts</span><span class=w> 
</span><span class=w></span><span class=k>USING</span><span class=w> </span><span class=n>FTS5</span><span class=p>(</span><span class=n>title</span><span class=p>,</span><span class=w> </span><span class=n>body</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Similar to a normal table, you can insert data into the posts table as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>posts</span><span class=p>(</span><span class=n>title</span><span class=p>,</span><span class=n>body</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;Learn SQlite FTS5&#39;</span><span class=p>,</span><span class=s1>&#39;This tutorial teaches you how to perform full-text search in SQLite using FTS5&#39;</span><span class=p>),</span><span class=w>
</span><span class=w></span><span class=p>(</span><span class=s1>&#39;Advanced SQlite Full-text Search&#39;</span><span class=p>,</span><span class=s1>&#39;Show you some advanced techniques in SQLite full-text searching&#39;</span><span class=p>),</span><span class=w>
</span><span class=w></span><span class=p>(</span><span class=s1>&#39;SQLite Tutorial&#39;</span><span class=p>,</span><span class=s1>&#39;Help you learn SQLite quickly and effectively&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>And query data against it:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>posts</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721799/SQLite/SQLite-full-text-search-table-data_nzw7xr.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721799/SQLite/SQLite-full-text-search-table-data_nzw7xr.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721799/SQLite/SQLite-full-text-search-table-data_nzw7xr.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721799/SQLite/SQLite-full-text-search-table-data_nzw7xr.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721799/SQLite/SQLite-full-text-search-table-data_nzw7xr.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721799/SQLite/SQLite-full-text-search-table-data_nzw7xr.png></p>
<h4 id=querying-data-using-full-text-search>Querying data using full-text search</h4>
<p>You can execute a full-text query against an FTS5 table using one of these three ways.</p>
<p>First, use a MATCH operator in the WHERE clause of the SELECT statement. For example, to get all rows that have the term fts5, you use the following query:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>posts</span><span class=w> 
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>posts</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=s1>&#39;fts5&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721883/SQLite/SQLite-full-text-search-MATCH-operator_hnhgdx.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721883/SQLite/SQLite-full-text-search-MATCH-operator_hnhgdx.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721883/SQLite/SQLite-full-text-search-MATCH-operator_hnhgdx.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721883/SQLite/SQLite-full-text-search-MATCH-operator_hnhgdx.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721883/SQLite/SQLite-full-text-search-MATCH-operator_hnhgdx.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617721883/SQLite/SQLite-full-text-search-MATCH-operator_hnhgdx.png></p>
<p>Second, use an equal (=) operator in the WHERE clause of the SELECT statement. The following statement returns the same result as the statement above:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>posts</span><span class=w> 
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>posts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;fts5&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Third, use a tabled-value function syntax. In this way, you use the search term as the first table argument:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>posts</span><span class=p>(</span><span class=s1>&#39;fts5&#39;</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>By default, FTS5 is case-independent. It treats the terms fts5FTS5 and Fts5 the same.</p>
<p>To sort the search results from the most to least relevant, you use the ORDER BY clause as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>posts</span><span class=w> 
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>posts</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=s1>&#39;text&#39;</span><span class=w> 
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>rank</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722035/SQLite/SQLite-full-text-search-sorting_l8m1gk.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722035/SQLite/SQLite-full-text-search-sorting_l8m1gk.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722035/SQLite/SQLite-full-text-search-sorting_l8m1gk.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722035/SQLite/SQLite-full-text-search-sorting_l8m1gk.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722035/SQLite/SQLite-full-text-search-sorting_l8m1gk.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722035/SQLite/SQLite-full-text-search-sorting_l8m1gk.png></p>
<h4 id=using-full-text-query-syntax>Using full-text query syntax</h4>
<p>A full-text search query is made up of phrases, where each phrase is an ordered list of one or more tokens. You can use the “+” operator to concatenate two phrases as the following example:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=s2>&#34;learn SQLite&#34;</span><span class=w>
</span><span class=w></span><span class=s2>&#34;learn + SQLite&#34;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>FTS5 determines whether a document matches a phrase if the document contains at least one subsequence of tokens that match the sequence of tokens used to construct the phrase.</p>
<p>The following query returns all documents that match the search term Learn SQLite:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>posts</span><span class=w> 
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>posts</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=s1>&#39;learn SQLite&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722187/SQLite/SQLite-full-text-search-query-syntax_kmkvkl.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722187/SQLite/SQLite-full-text-search-query-syntax_kmkvkl.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722187/SQLite/SQLite-full-text-search-query-syntax_kmkvkl.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722187/SQLite/SQLite-full-text-search-query-syntax_kmkvkl.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722187/SQLite/SQLite-full-text-search-query-syntax_kmkvkl.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722187/SQLite/SQLite-full-text-search-query-syntax_kmkvkl.png></p>
<h4 id=prefix-searches>Prefix searches</h4>
<p>You can use the asterisk (*) as a prefix token. When a phrase contains the asterisk (*), it will match any document that contains the token that begins with the phrase. For example, search* matches with search, searching, searches, etc. See the following example:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>posts</span><span class=w>
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>posts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;search*&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722282/SQLite/SQLite-full-text-search-prefix-searches_t48eb8.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722282/SQLite/SQLite-full-text-search-prefix-searches_t48eb8.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722282/SQLite/SQLite-full-text-search-prefix-searches_t48eb8.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722282/SQLite/SQLite-full-text-search-prefix-searches_t48eb8.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722282/SQLite/SQLite-full-text-search-prefix-searches_t48eb8.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722282/SQLite/SQLite-full-text-search-prefix-searches_t48eb8.png></p>
<p>Boolean operators
You can use the Boolean operator e.g., NOT, OR, or AND to combine queries.</p>
<ul>
<li>q1 AND q2: matches if both q1 and q2 queries match.</li>
<li>q1 OR q2: matches if either query q1 or q2 matches.</li>
<li>q1 NOT q2: matches if query q1 matches and q2 doesn’t match.</li>
</ul>
<p>For example, to get the documents that match the learn phrase but doesn’t match the FTS5 phrase, you use the NOT operator as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>posts</span><span class=w> 
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>posts</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=s1>&#39;learn NOT text&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722390/SQLite/SQLite-full-text-search-NOT-operator_yftqdg.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722390/SQLite/SQLite-full-text-search-NOT-operator_yftqdg.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722390/SQLite/SQLite-full-text-search-NOT-operator_yftqdg.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722390/SQLite/SQLite-full-text-search-NOT-operator_yftqdg.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722390/SQLite/SQLite-full-text-search-NOT-operator_yftqdg.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722390/SQLite/SQLite-full-text-search-NOT-operator_yftqdg.png></p>
<p>To search for documents that match either phrase learn or text, you use the OR operator as the following example:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>posts</span><span class=w> 
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>posts</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=s1>&#39;learn OR text&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722440/SQLite/SQLite-full-text-search-OR-operator_vs5gjp.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722440/SQLite/SQLite-full-text-search-OR-operator_vs5gjp.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722440/SQLite/SQLite-full-text-search-OR-operator_vs5gjp.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722440/SQLite/SQLite-full-text-search-OR-operator_vs5gjp.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722440/SQLite/SQLite-full-text-search-OR-operator_vs5gjp.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722440/SQLite/SQLite-full-text-search-OR-operator_vs5gjp.png></p>
<p>To find the documents that match both SQLite and searching, you use the AND operator as shown below:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>posts</span><span class=w> 
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>posts</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=s1>&#39;sqlite AND searching&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722498/SQLite/SQLite-full-text-search-AND-operator_dx3g2a.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722498/SQLite/SQLite-full-text-search-AND-operator_dx3g2a.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722498/SQLite/SQLite-full-text-search-AND-operator_dx3g2a.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722498/SQLite/SQLite-full-text-search-AND-operator_dx3g2a.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722498/SQLite/SQLite-full-text-search-AND-operator_dx3g2a.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722498/SQLite/SQLite-full-text-search-AND-operator_dx3g2a.png></p>
<p>To change the operator precedence, you use parenthesis to group expressions. For example:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>posts</span><span class=w> 
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>posts</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=s1>&#39;search AND sqlite OR help&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722558/SQLite/SQLite-full-text-search-Combine-Logical-Operators_qwidsl.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722558/SQLite/SQLite-full-text-search-Combine-Logical-Operators_qwidsl.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722558/SQLite/SQLite-full-text-search-Combine-Logical-Operators_qwidsl.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722558/SQLite/SQLite-full-text-search-Combine-Logical-Operators_qwidsl.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722558/SQLite/SQLite-full-text-search-Combine-Logical-Operators_qwidsl.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722558/SQLite/SQLite-full-text-search-Combine-Logical-Operators_qwidsl.png></p>
<p>The statement returns documents that match search and sqlite or help. To find the documents that match search and either sqlite or help, you use parenthesis as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>posts</span><span class=w> 
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>posts</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=s1>&#39;search AND (sqlite OR help)&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722621/SQLite/SQLite-full-text-search-operator-precedence_zgncun.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722621/SQLite/SQLite-full-text-search-operator-precedence_zgncun.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722621/SQLite/SQLite-full-text-search-operator-precedence_zgncun.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722621/SQLite/SQLite-full-text-search-operator-precedence_zgncun.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722621/SQLite/SQLite-full-text-search-operator-precedence_zgncun.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722621/SQLite/SQLite-full-text-search-operator-precedence_zgncun.png></p>
<h4 id=built-in-auxiliary-functions>Built-in auxiliary functions</h4>
<p>SQLite provides three built-in auxiliary functions that can be used within full-text queries on the FTS5 table.</p>
<ul>
<li>The bm25() returns a value that represents the accuracy of the current match, the lower value means a better match.</li>
<li>The highlight() auxiliary function returns a copy of the text with search terms surrounded by a specified markup e.g.,<b>search term </b></li>
<li>The snippet() selects a short fragment of text in order to maximize the number of search terms it contains.</li>
</ul>
<p>For example, the following query uses the highlight() function to decorate the search terms using the <b>tag</b>:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>highlight</span><span class=p>(</span><span class=n>posts</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;&lt;b&gt;&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;&lt;/b&gt;&#39;</span><span class=p>)</span><span class=w> </span><span class=n>title</span><span class=p>,</span><span class=w> 
</span><span class=w>       </span><span class=n>highlight</span><span class=p>(</span><span class=n>posts</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;&lt;b&gt;&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;&lt;/b&gt;&#39;</span><span class=p>)</span><span class=w> </span><span class=n>body</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>posts</span><span class=w> 
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>posts</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=s1>&#39;SQLite&#39;</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>rank</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722740/SQLite/SQLite-full-text-search-highlight-function_yncmwd.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722740/SQLite/SQLite-full-text-search-highlight-function_yncmwd.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722740/SQLite/SQLite-full-text-search-highlight-function_yncmwd.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722740/SQLite/SQLite-full-text-search-highlight-function_yncmwd.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722740/SQLite/SQLite-full-text-search-highlight-function_yncmwd.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617722740/SQLite/SQLite-full-text-search-highlight-function_yncmwd.png></p>
<p>In this section, you have learned how to use SQLite full-text search features via FTS5 virtual table module.</p>
<h3 id=section-17-sqlite-tools>Section 17. SQLite tools</h3>
<h4 id=sqlite-commands--show-you-the-most-commonly-used-command-in-the-sqlite3-program>SQLite Commands – show you the most commonly used command in the sqlite3 program.</h4>
<p>The SQLite project delivers a simple command-line tool named sqlite3 (or sqlite3.exe on Windows) that allows you to interact with the SQLite databases using SQL statements and commands.</p>
<h5 id=connect-to-an-sqlite-database-1>Connect to an SQLite database</h5>
<p>To start the sqlite3, you type the sqlite3 as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=gp>&gt;</span>sqlite3
<span class=go>SQLite version 3.29.0 2019-07-10 17:32:03
</span><span class=go>Enter &#34;.help&#34; for usage hints.
</span><span class=go>Connected to a transient in-memory database.
</span><span class=go>Use &#34;.open FILENAME&#34; to reopen on a persistent database.
</span><span class=go>sqlite&gt;
</span></code></pre></td></tr></table>
</div>
</div><p>By default, an SQLite session uses the in-memory database, therefore, all changes will be gone when the session ends.</p>
<p>To open a database file, you use the .open FILENAME command. The following statement opens the chinook.db database:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .open c:\sqlite\db\chinook.db
</span></code></pre></td></tr></table>
</div>
</div><p>If you want to open a specific database file when you connect to the SQlite database, you use the following command:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=gp>&gt;</span>sqlite3 c:<span class=se>\s</span>qlite<span class=se>\d</span>b<span class=se>\c</span>hinook.db
<span class=go>SQLite version 3.13.0 2016-05-18 10:57:30
</span><span class=go>Enter &#34;.help&#34; for usage hints.
</span><span class=go>sqlite&gt;
</span></code></pre></td></tr></table>
</div>
</div><p>If you start a session with a database name that does not exist, the sqlite3 tool will create the database file.</p>
<p>For example, the following command creates a database named sales in the C:\sqlite\db\ directory:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=gp>&gt;</span>sqlite3 c:<span class=se>\s</span>qlite<span class=se>\d</span>b<span class=se>\s</span>ales.db
<span class=go>SQLite version 3.29.0 2019-07-10 17:32:03
</span><span class=go>Enter &#34;.help&#34; for usage hints.
</span><span class=go>sqlite&gt;
</span></code></pre></td></tr></table>
</div>
</div><h5 id=show-all-available-commands-and-their-purposes-1>Show all available commands and their purposes</h5>
<p>To show all available commands and their purpose, you use the .help command as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>.help
</span></code></pre></td></tr></table>
</div>
</div><h5 id=show-databases-in-the-current-database-connection-1>Show databases in the current database connection</h5>
<p>To show all databases in the current connection, you use the .databases command. The .databases command displays at least one database with the name: main.</p>
<p>For example, the following command shows all the databases of the current connection:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .database
</span><span class=go>seq  name             file
</span><span class=go>---  ---------------  --------------------------
</span><span class=go>0    main             c:\sqlite\db\sales.db
</span><span class=go>sqlite&gt;
</span></code></pre></td></tr></table>
</div>
</div><p>To add an additional database in the current connection, you use the statement ATTACH DATABASE. The following statement adds the chinook database to the current connection.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; ATTACH DATABASE &#34;c:\sqlite\db\chinook.db&#34; AS chinook;
</span></code></pre></td></tr></table>
</div>
</div><p>Now if you run the .database command again, the sqlite3 returns two databases: main and chinook.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .databases
</span><span class=go>seq  name             file
</span><span class=go>---  ---------------  ---------------------
</span><span class=go>0    main             c:\sqlite\db\sales.db
</span><span class=go>2    chinook          c:\sqlite\db\chinook.db
</span></code></pre></td></tr></table>
</div>
</div><h5 id=exit-sqlite3-tool-1>Exit sqlite3 tool</h5>
<p>To exit the sqlite3 program, you use the .exit command.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt;.exit
</span></code></pre></td></tr></table>
</div>
</div><p>Show tables in a database
To display all the tables in the current database, you use the .tables command. The following commands open a new database connection to the chinook database and display the tables in the database.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=gp>&gt;</span>sqlite3 c:<span class=se>\s</span>qlite<span class=se>\d</span>b<span class=se>\c</span>hinook.db
<span class=go>SQLite version 3.29.0 2019-07-10 17:32:03
</span><span class=go>Enter &#34;.help&#34; for usage hints.
</span><span class=go>sqlite&gt; .tables
</span><span class=go>albums          employees       invoices        playlists
</span><span class=go>artists         genres          media_types     tracks
</span><span class=go>customers       invoice_items   playlist_track
</span><span class=go>sqlite&gt;
</span></code></pre></td></tr></table>
</div>
</div><p>If you want to find tables based on a specific pattern, you use the .table pattern command. The sqlite3 uses the LIKE operator for pattern matching.</p>
<p>For example, the following statement returns the table that ends with the string es.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .table &#39;%es&#39;
</span><span class=go>employees    genres       invoices     media_types
</span><span class=go>sqlite&gt;
</span></code></pre></td></tr></table>
</div>
</div><h5 id=show-the-structure-of-a-table-1>Show the structure of a table</h5>
<p>To display the structure of a table, you use the .schema TABLE command. The TABLE argument could be a pattern. If you omit it, the .schema command will show the structures of all the tables.</p>
<p>The following command shows the structure of the albums table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .schema albums
</span><span class=go>CREATE TABLE &#34;albums&#34;
</span><span class=go>(
</span><span class=go>    [AlbumId] INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
</span><span class=go>    [Title] NVARCHAR(160)  NOT NULL,
</span><span class=go>    [ArtistId] INTEGER  NOT NULL,
</span><span class=go>    FOREIGN KEY ([ArtistId]) REFERENCES &#34;artists&#34; ([ArtistId])
</span><span class=go>                ON DELETE NO ACTION ON UPDATE NO ACTION
</span><span class=go>);
</span><span class=go>CREATE INDEX [IFK_AlbumArtistId] ON &#34;albums&#34; ([ArtistId]);
</span><span class=go>sqlite&gt;
</span></code></pre></td></tr></table>
</div>
</div><p>To show the schema and the content of the sqlite_stat tables, you use the .fullschema command.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt;.fullschema
</span></code></pre></td></tr></table>
</div>
</div><h5 id=show-indexes-1>Show indexes</h5>
<p>To show all indexes of the current database, you use the .indexes command as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .indexes
</span><span class=go>IFK_AlbumArtistId
</span><span class=go>IFK_CustomerSupportRepId
</span><span class=go>IFK_EmployeeReportsTo
</span><span class=go>IFK_InvoiceCustomerId
</span><span class=go>IFK_InvoiceLineInvoiceId
</span><span class=go>IFK_InvoiceLineTrackId
</span><span class=go>IFK_PlaylistTrackTrackId
</span><span class=go>IFK_TrackAlbumId
</span><span class=go>IFK_TrackGenreId
</span><span class=go>IFK_TrackMediaTypeId
</span></code></pre></td></tr></table>
</div>
</div><p>To show the indexes of a specific table, you use the .indexes TABLE command. For example, to show indexes of the albums table, you use the following command:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .indexes albums
</span><span class=go>IFK_AlbumArtistId
</span></code></pre></td></tr></table>
</div>
</div><p>To show indexes of the tables whose names end with es, you use a pattern of the LIKE operator.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .indexes %es
</span><span class=go>IFK_EmployeeReportsTo
</span><span class=go>IFK_InvoiceCustomerId
</span></code></pre></td></tr></table>
</div>
</div><h5 id=save-the-result-of-a-query-into-a-file-2>Save the result of a query into a file</h5>
<p>To save the result of a query into a file, you use the .output FILENAME command. Once you issue the .output command, all the results of the subsequent queries will be saved to the file that you specified in the FILENAME argument. If you want to save the result of the next single query only to the file, you issue the .once FILENAME command.</p>
<p>To display the result of the query to the standard output again, you issue the .output command without arguments.</p>
<p>The following commands select the title from the albums table and write the result to the albums.txt file.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .output albums.txt
</span><span class=go>sqlite&gt; SELECT title FROM albums;
</span></code></pre></td></tr></table>
</div>
</div><h5 id=execute-sql-statements-from-a-file-1>Execute SQL statements from a file</h5>
<p>Suppose we have a file named commands.txt in the c:\sqlite\ folder with the following content:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=n>albumid</span><span class=p>,</span><span class=w> </span><span class=n>title</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>albums</span><span class=w>
</span><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>title</span><span class=w>
</span><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>To execute the SQL statements in the commands.txt file, you use the .read FILENAME command as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .mode column
</span><span class=go>sqlite&gt; .header on
</span><span class=go>sqlite&gt; .read c:/sqlite/commands.txt
</span><span class=go>AlbumId     Title
</span><span class=go>----------  ----------------------
</span><span class=go>156         ...And Justice For All
</span><span class=go>257         20th Century Masters -
</span><span class=go>296         A Copland Celebration,
</span><span class=go>94          A Matter of Life and D
</span><span class=go>95          A Real Dead One
</span><span class=go>96          A Real Live One
</span><span class=go>285         A Soprano Inspired
</span><span class=go>139         A TempestadeTempestade
</span><span class=go>203         A-Sides
</span><span class=go>160         Ace Of Spades
</span></code></pre></td></tr></table>
</div>
</div><p>In this section, you have learned many useful commands in the sqlite3 tool to perform various tasks that deal with the SQLite database.</p>
<h4 id=sqlite-show-tables--list-all-tables-in-a-database>SQLite Show Tables – list all tables in a database.</h4>
<h5 id=showing-tables-using-the-sqlite-command-line-shell-program>Showing tables using the sqlite command line shell program</h5>
<p>To show tables in a database using the sqlite command line shell program, you follow these steps:</p>
<p>First, open the database that you want to show the tables:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=gp>&gt; </span>sqlite3 c:<span class=se>\s</span>qlite<span class=se>\d</span>b<span class=se>\c</span>hinook.db
</code></pre></td></tr></table>
</div>
</div><p>The above statement opened the database named chinook.db that locates in the c:\sqlite\db directory.</p>
<p>Second, type the .tables command:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .tables
</span></code></pre></td></tr></table>
</div>
</div><p>The .tables command lists all tables in the chinook database</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>albums          employees       invoices        playlists
</span><span class=go>artists         genres          media_types     tracks
</span><span class=go>customers       invoice_items   playlist_track
</span></code></pre></td></tr></table>
</div>
</div><p>Note that both .tables, .table have the same effect. In addition, the command .ta should work too.</p>
<p>The .tables command also can be used to show temporary tables. See the following example:</p>
<p>First, create a new temporary table named temp_table1:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; CREATE TEMPORARY TABLE temp_table1( name TEXT );
</span></code></pre></td></tr></table>
</div>
</div><p>Second, list all tables from the database:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .tables
</span></code></pre></td></tr></table>
</div>
</div><p>The following shows the output:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>albums            employees         invoices          playlists
</span><span class=go>artists           genres            media_types       temp.temp_table1
</span><span class=go>customers         invoice_items     playlist_track    tracks
</span></code></pre></td></tr></table>
</div>
</div><p>Because the schema of temporary tables is temp, the command showed the names of schema and table of the temporary table such as temp.temp_table1.</p>
<p>If you want to show tables with the specific name, you can add a matching pattern:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>.tables pattern
</span></code></pre></td></tr></table>
</div>
</div><p>The command works the same as LIKE operator. The pattern must be surrounded by single quotation marks ( &lsquo;).</p>
<p>For example, to find tables whose names start with the letter ‘a’, you use the following command:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .table &#39;a%&#39;
</span></code></pre></td></tr></table>
</div>
</div><p>Here is the output:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>albums   artists
</span></code></pre></td></tr></table>
</div>
</div><p>To shows the tables whose name contains the string ck, you use the %ck% pattern as shown in the following command:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .tables &#39;%ck%&#39;
</span></code></pre></td></tr></table>
</div>
</div><p>The output is as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>playlist_track  tracks
</span></code></pre></td></tr></table>
</div>
</div><h5 id=showing-tables-using-sql-statement>Showing tables using SQL statement</h5>
<p>Another way to list all tables in a database is to query them from the sqlite_master table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> 
</span><span class=w>    </span><span class=n>name</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> 
</span><span class=w>    </span><span class=n>sqlite_master</span><span class=w> 
</span><span class=w></span><span class=k>WHERE</span><span class=w> 
</span><span class=w>    </span><span class=k>type</span><span class=w> </span><span class=o>=</span><span class=s1>&#39;table&#39;</span><span class=w> </span><span class=k>AND</span><span class=w> 
</span><span class=w>    </span><span class=n>name</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;sqlite_%&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Here is the output:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617724748/SQLite/SQLite-Show-Tables-Command_ge3lzx.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617724748/SQLite/SQLite-Show-Tables-Command_ge3lzx.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617724748/SQLite/SQLite-Show-Tables-Command_ge3lzx.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617724748/SQLite/SQLite-Show-Tables-Command_ge3lzx.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617724748/SQLite/SQLite-Show-Tables-Command_ge3lzx.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617724748/SQLite/SQLite-Show-Tables-Command_ge3lzx.png></p>
<p>In this query, we filtered out all tables whose names start with sqlite_ such as sqlite_stat1 and sqlite_sequence tables. These tables are the system tables managed internally by SQLite.</p>
<p>In this section, you have learned how to show all tables in a database using the .tables command or by querying data from the sqlite_master table.</p>
<h4 id=sqlite-describe-table--show-the-structure-of-a-table>SQLite Describe Table – show the structure of a table.</h4>
<h5 id=getting-the-structure-of-a-table-via-the-sqlite-command-line-shell-program>Getting the structure of a table via the SQLite command-line shell program</h5>
<p>To find out the structure of a table via the SQLite command-line shell program, you follow these steps:</p>
<p>First, connect to a database via the SQLite command-line shell program:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=gp>&gt; </span>sqlite3 c:<span class=se>\s</span>qlite<span class=se>\d</span>b<span class=se>\c</span>hinook.db
</code></pre></td></tr></table>
</div>
</div><p>Then, issue the following command:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>.schema table_name
</span></code></pre></td></tr></table>
</div>
</div><p>For example, to show the statement that created the albums table, you use the following command:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .schema albums
</span></code></pre></td></tr></table>
</div>
</div><p>Notice that there is no semicolon (;) after the table name. If you add a semicolon (;), the .schema will consider the albums; as the table name and returns nothing because the table albums; does not exist.</p>
<p>Here is the output:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=s2>&#34;albums&#34;</span><span class=w>
</span><span class=w></span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=p>[</span><span class=n>AlbumId</span><span class=p>]</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=n>AUTOINCREMENT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=p>[</span><span class=n>Title</span><span class=p>]</span><span class=w> </span><span class=n>NVARCHAR</span><span class=p>(</span><span class=mi>160</span><span class=p>)</span><span class=w>  </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=p>[</span><span class=n>ArtistId</span><span class=p>]</span><span class=w> </span><span class=nb>INTEGER</span><span class=w>  </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>([</span><span class=n>ArtistId</span><span class=p>])</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=s2>&#34;artists&#34;</span><span class=w> </span><span class=p>([</span><span class=n>ArtistId</span><span class=p>])</span><span class=w>
</span><span class=w>                </span><span class=k>ON</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=k>NO</span><span class=w> </span><span class=n>ACTION</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=k>UPDATE</span><span class=w> </span><span class=k>NO</span><span class=w> </span><span class=n>ACTION</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=p>[</span><span class=n>IFK_AlbumArtistId</span><span class=p>]</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=s2>&#34;albums&#34;</span><span class=w> </span><span class=p>([</span><span class=n>ArtistId</span><span class=p>]);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Another way to show the structure of a table is to use the following PRAGMA command:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .header on
</span><span class=go>sqlite&gt; .mode column
</span><span class=go>sqlite&gt; pragma table_info(&#39;albums&#39;);
</span></code></pre></td></tr></table>
</div>
</div><p>Note that the first two commands are used to format the output nicely.</p>
<p>The following picture shows the output:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617724969/SQLite/SQLite-Describe-Table_n7inqb.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617724969/SQLite/SQLite-Describe-Table_n7inqb.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617724969/SQLite/SQLite-Describe-Table_n7inqb.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617724969/SQLite/SQLite-Describe-Table_n7inqb.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617724969/SQLite/SQLite-Describe-Table_n7inqb.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617724969/SQLite/SQLite-Describe-Table_n7inqb.png></p>
<h5 id=getting-the-structure-of-a-table-using-the-sql-statement>Getting the structure of a table using the SQL statement</h5>
<p>You can find the structure of a table by querying it from the sqlite_master table as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> </span><span class=k>sql</span><span class=w> 
</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>sqlite_master</span><span class=w> 
</span><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;albums&#39;</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Here is the output:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sql
</span><span class=go>------------
</span><span class=go>CREATE TABLE &#34;albums&#34;
</span><span class=go>(
</span><span class=go>    [AlbumId] INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
</span><span class=go>    [Title] NVARCHAR(160)  NOT NULL,
</span><span class=go>    [ArtistId] INTEGER  NOT NULL,
</span><span class=go>    FOREIGN KEY ([ArtistId]) REFERENCES &#34;artists&#34; ([ArtistId])
</span><span class=go>                ON DELETE NO ACTION ON UPDATE NO ACTION
</span><span class=go>)
</span></code></pre></td></tr></table>
</div>
</div><p>In this section, you have learned how to show the structure of a table in SQLite via command-line shell program or SQL statement.</p>
<h4 id=sqlite-dump--how-to-use-dump-command-to-backup-and-restore-a-database>SQLite Dump – how to use dump command to backup and restore a database.</h4>
<p>By using the sqlite3 tool, you can use the SQL statements to query or update data in the database. In addition, you can use special commands, which are known as dot-commands to perform various useful database operations.</p>
<p>One of these dot-commands is the .dump command that gives you the ability to dump the entire database or tables into a text file.</p>
<h5 id=dump-the-entire-database-into-a-file-using-sqlite-dump-command>Dump the entire database into a file using SQLite dump command</h5>
<p>The following command opens a new SQLite database connection to the chinook.db file.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>C:\sqlite&gt;sqlite3 c:/sqlite/chinook.db
</span><span class=go>SQLite version 3.13.0 2016-05-18 10:57:30
</span><span class=go>Enter &#34;.help&#34; for usage hints.
</span><span class=go>sqlite&gt;
</span></code></pre></td></tr></table>
</div>
</div><p>To dump a database into a file, you use the .dump command. The .dump command converts the entire structure and data of an SQLite database into a single text file.</p>
<p>By default, the .dump command outputs the SQL statements on screen. To issue the output to a file, you use the .output FILENAME command.</p>
<p>The following commands specify the output of the dump file to chinook.sql and dump the chinook database into the chinook.sql file.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .output c:/sqlite/chinook.sql
</span><span class=go>sqlite&gt; .dump
</span><span class=go>sqlite&gt; .exit
</span></code></pre></td></tr></table>
</div>
</div><h5 id=dump-a-specific-table-using-the-sqlite-dump-command>Dump a specific table using the SQLite dump command</h5>
<p>If you want to dump a specific table, you need to specify the table name followed the .dump command. For example, the following command saves the albums table to the albums.sql file.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .output c:/sqlite/albums.sql
</span><span class=go>sqlite&gt; .dump albums
</span><span class=go>sqlite&gt; .quit
</span></code></pre></td></tr></table>
</div>
</div><p>The following picture shows the content of the albums.sql file.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725283/SQLite/SQLite-dump-example_es5kc0.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725283/SQLite/SQLite-dump-example_es5kc0.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725283/SQLite/SQLite-dump-example_es5kc0.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725283/SQLite/SQLite-dump-example_es5kc0.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725283/SQLite/SQLite-dump-example_es5kc0.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725283/SQLite/SQLite-dump-example_es5kc0.png></p>
<h5 id=dump-tables-structure-only-using-schema-command>Dump tables structure only using schema command</h5>
<p>If you want to dump the structures of tables in a database, you use the .schema command. The following commands set the output file to chinook_structure.sql file and save the structures of tables into the chinook_structure.sql file.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .output c:/sqlite/chinook_structure.sql
</span><span class=go>sqlite&gt; .schema
</span><span class=go>sqlite&gt; .quit
</span></code></pre></td></tr></table>
</div>
</div><p>The following picture shows the content of the chinook_structure.sql file.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725377/SQLite/SQLite-dump-structure_d4vwug.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725377/SQLite/SQLite-dump-structure_d4vwug.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725377/SQLite/SQLite-dump-structure_d4vwug.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725377/SQLite/SQLite-dump-structure_d4vwug.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725377/SQLite/SQLite-dump-structure_d4vwug.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725377/SQLite/SQLite-dump-structure_d4vwug.png></p>
<h5 id=dump-data-of-one-or-more-tables-into-a-file>Dump data of one or more tables into a file</h5>
<p>To dump the data of a table into a text file, you use these steps:</p>
<p>First, set the mode to insert using the .mode command as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .mode insert
</span></code></pre></td></tr></table>
</div>
</div><p>From now on, every SELECT statement will issue the result as the INSERT statements instead of pure text data.</p>
<p>Second, set the output to a text file instead of the default standard output. The following command sets the output file to the data.sql file.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .output data.sql
</span></code></pre></td></tr></table>
</div>
</div><p>Third, issue the SELECT statements to query data from a table that you want to dump. The following command returns data from the artists table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; select * from artists;
</span></code></pre></td></tr></table>
</div>
</div><p>Check the content of the data.sql file, if everything is fine, you will see the following output:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725508/SQLite/SQLite-dump-data-only_voif1e.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725508/SQLite/SQLite-dump-data-only_voif1e.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725508/SQLite/SQLite-dump-data-only_voif1e.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725508/SQLite/SQLite-dump-data-only_voif1e.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725508/SQLite/SQLite-dump-data-only_voif1e.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725508/SQLite/SQLite-dump-data-only_voif1e.png></p>
<p>To dump data from other tables, you need to issue the SELECT statements to query data from those tables.</p>
<p>In this section, you have learned how to dump data into a text file using the SQLite dump command and other commands.</p>
<h4 id=sqlite-import-csv--import-csv-files-into-a-table>SQLite Import CSV – import CSV files into a table.</h4>
<h5 id=importing-a-csv-file-into-a-table-using-sqlite3-tool>Importing a CSV file into a table using sqlite3 tool</h5>
<p>In the first scenario, you want to import data from CSV file into a table that does not exist in the SQLite database.</p>
<ol>
<li>First, the sqlite3 tool creates the table. The sqlite3 tool uses the first row of the CSV file as the names of the columns of the table.</li>
<li>Second, the sqlite3 tool import data from the second row of the CSV file into the table.</li>
</ol>
<p>We will import a CSV file named city.csv with two columns: name and population. You can download it here for practicing.</p>
<p><a href=https://cdn.sqlitetutorial.net/wp-content/uploads/2016/05/city.csv target=_blank rel="noopener noreferrer">Download the city.csv file</a></p>
<p>To import the c:\sqlite\city.csv file into the cities table:</p>
<p>First, set the mode to CSV to instruct the command-line shell program to interpret the input file as a CSV file. To do this, you use the .mode command as follows:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .mode csv
</span></code></pre></td></tr></table>
</div>
</div><p>Second, use the command .import FILE TABLE to import the data from the city.csv file into the cities table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt;.import c:/sqlite/city.csv cities
</span></code></pre></td></tr></table>
</div>
</div><p>To verify the import, you use the command .schema to display the structure of the cities table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .schema cities
</span><span class=go>CREATE TABLE cities(
</span><span class=go>  &#34;name&#34; TEXT,
</span><span class=go>  &#34;population&#34; TEXT
</span><span class=go>);
</span></code></pre></td></tr></table>
</div>
</div><p>To view the data of the cities table, you use the following SELECT statement.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>SELECT</span><span class=w> 
</span><span class=w>   </span><span class=n>name</span><span class=p>,</span><span class=w> 
</span><span class=w>   </span><span class=n>population</span><span class=w>
</span><span class=w></span><span class=k>FROM</span><span class=w> 
</span><span class=w>   </span><span class=n>cities</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>In the second scenario, the table is already available in the database and you just need to import the data.</p>
<p>First, drop the cities table that you have created.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=n>cities</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>Second, use the following CREATE TABLE statement to create the table cities.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>cities</span><span class=p>(</span><span class=w>
</span><span class=w>  </span><span class=n>name</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span><span class=w>  </span><span class=n>population</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> 
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>If the table already exists, the sqlite3 tool uses all the rows, including the first row, in the CSV file as the actual data to import. Therefore, you should delete the first row of the CSV file.</p>
<p>The following commands import the city_without_header.csv file into the cities table.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=go>sqlite&gt; .mode csv
</span><span class=go>sqlite&gt; .import c:/sqlite/city_no_header.csv cities
</span></code></pre></td></tr></table>
</div>
</div><h5 id=import-a-csv-file-into-a-table-using-sqlite-studio>Import a CSV file into a table using SQLite Studio</h5>
<p>Most SQLite GUI tools provide the import function that allows you to import data from a file in CSV format, tab-delimited format, etc., into a table.</p>
<p>We will use the SQLite Studio to show you how to import a CSV file into a table with the assumption that the target table already exists in the database.</p>
<p>First, from the menu choose tool menu item.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725987/SQLite/SQLite-Import-csv-to-table-Step-1_zpagwc.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725987/SQLite/SQLite-Import-csv-to-table-Step-1_zpagwc.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725987/SQLite/SQLite-Import-csv-to-table-Step-1_zpagwc.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725987/SQLite/SQLite-Import-csv-to-table-Step-1_zpagwc.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725987/SQLite/SQLite-Import-csv-to-table-Step-1_zpagwc.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617725987/SQLite/SQLite-Import-csv-to-table-Step-1_zpagwc.png></p>
<p>Second, choose the database and table that you want to import data then click the Next button.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726034/SQLite/SQLite-Import-csv-to-table-Step-2_btaa9f.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726034/SQLite/SQLite-Import-csv-to-table-Step-2_btaa9f.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726034/SQLite/SQLite-Import-csv-to-table-Step-2_btaa9f.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726034/SQLite/SQLite-Import-csv-to-table-Step-2_btaa9f.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726034/SQLite/SQLite-Import-csv-to-table-Step-2_btaa9f.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726034/SQLite/SQLite-Import-csv-to-table-Step-2_btaa9f.png></p>
<p>Third, choose CSV as the data source type, choose the CSV file in the Input file field, and choose the ,(comma) option as the Field separator as shown in the picture below. Then click the Finish button to import the data.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726093/SQLite/SQLite-Import-csv-to-table-Step-3_kcj7ox.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726093/SQLite/SQLite-Import-csv-to-table-Step-3_kcj7ox.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726093/SQLite/SQLite-Import-csv-to-table-Step-3_kcj7ox.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726093/SQLite/SQLite-Import-csv-to-table-Step-3_kcj7ox.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726093/SQLite/SQLite-Import-csv-to-table-Step-3_kcj7ox.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726093/SQLite/SQLite-Import-csv-to-table-Step-3_kcj7ox.png></p>
<p>In this section, you have learned how to use the sqlite3 and SQLite Studio to import data from a CSV file into a table in the SQLite database.</p>
<h4 id=sqlite-export-csv--export-an-sqlite-database-to-csv-files>SQLite Export CSV – export an SQLite database to CSV files.</h4>
<h5 id=export-sqlite-database-to-a-csv-file-using-sqlite3-tool>Export SQLite Database to a CSV file using sqlite3 tool</h5>
<p>SQLite project provides you with a command-line program called sqlite3 or sqlite3.exe on Windows. By using the sqlite3 tool, you can use the SQL statements and dot-commands to interact with the SQLite database.</p>
<p>To export data from the SQLite database to a CSV file, you use these steps:</p>
<ol>
<li>Turn on the header of the result set using the .header on command.</li>
<li>Set the output mode to CSV to instruct the sqlite3 tool to issue the result in the CSV mode.</li>
<li>Send the output to a CSV file.</li>
<li>Issue the query to select data from the table to which you want to export.</li>
</ol>
<p>The following commands select data from the customers table and export it to the data.csv file.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=gp>&gt;</span>sqlite3 c:/sqlite/chinook.db
<span class=go>sqlite&gt; .headers on
</span><span class=go>sqlite&gt; .mode csv
</span><span class=go>sqlite&gt; .output data.csv
</span><span class=go>sqlite&gt; SELECT customerid,
</span><span class=go>   ...&gt;        firstname,
</span><span class=go>   ...&gt;        lastname,
</span><span class=go>   ...&gt;        company
</span><span class=go>   ...&gt;   FROM customers;
</span><span class=go>sqlite&gt; .quit
</span></code></pre></td></tr></table>
</div>
</div><p>If you check the data.csv file, you will see the following output.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726311/SQLite/SQLite-Export-CSV-example_u2rq3f.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726311/SQLite/SQLite-Export-CSV-example_u2rq3f.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726311/SQLite/SQLite-Export-CSV-example_u2rq3f.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726311/SQLite/SQLite-Export-CSV-example_u2rq3f.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726311/SQLite/SQLite-Export-CSV-example_u2rq3f.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726311/SQLite/SQLite-Export-CSV-example_u2rq3f.png></p>
<p>Besides using the dot-commands, you can use the options of the sqlite3 tool to export data from the SQLite database to a CSV file.</p>
<p>For example, the following command exports the data from the tracks table to a CSV file named tracks.csv.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=gp>&gt;</span>sqlite3 -header -csv c:/sqlite/chinook.db <span class=s2>&#34;select * from tracks;&#34;</span> &gt; tracks.csv
</code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726389/SQLite/SQLite-Export-CSV-one-liner-option_lbijbb.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726389/SQLite/SQLite-Export-CSV-one-liner-option_lbijbb.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726389/SQLite/SQLite-Export-CSV-one-liner-option_lbijbb.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726389/SQLite/SQLite-Export-CSV-one-liner-option_lbijbb.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726389/SQLite/SQLite-Export-CSV-one-liner-option_lbijbb.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726389/SQLite/SQLite-Export-CSV-one-liner-option_lbijbb.png></p>
<p>If you have a file named query.sql that contains the script to query data, you can execute the statements in the file and export data to a CSV file.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=gp>&gt;</span>sqlite3 -header -csv c:/sqlite/chinook.db &lt; query.sql &gt; data.csv
</code></pre></td></tr></table>
</div>
</div><h5 id=export-sqlite-database-to-a-csv-file-using-sqlitestudio>Export SQLite database to a CSV file using SQliteStudio</h5>
<p>The SQLiteStudio provides the export function that allows you to export data in a table or the result of a query to a CSV file.</p>
<p>The following steps show you how to export data from a table to a CSV file.</p>
<p>First, click the Tools > Export menu item</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726466/SQLite/SQLite-Export-CSV-Step-1_wxhyes.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726466/SQLite/SQLite-Export-CSV-Step-1_wxhyes.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726466/SQLite/SQLite-Export-CSV-Step-1_wxhyes.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726466/SQLite/SQLite-Export-CSV-Step-1_wxhyes.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726466/SQLite/SQLite-Export-CSV-Step-1_wxhyes.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726466/SQLite/SQLite-Export-CSV-Step-1_wxhyes.png></p>
<p>Next, choose the database and table that you want to export data; check the Export table data.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726517/SQLite/SQLite-Export-CSV-Step-3_mvpivm.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726517/SQLite/SQLite-Export-CSV-Step-3_mvpivm.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726517/SQLite/SQLite-Export-CSV-Step-3_mvpivm.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726517/SQLite/SQLite-Export-CSV-Step-3_mvpivm.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726517/SQLite/SQLite-Export-CSV-Step-3_mvpivm.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726517/SQLite/SQLite-Export-CSV-Step-3_mvpivm.png></p>
<p>Then, choose a single table to export the data.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726559/SQLite/SQLite-Export-CSV-Step-2_hayyoe.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726559/SQLite/SQLite-Export-CSV-Step-2_hayyoe.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726559/SQLite/SQLite-Export-CSV-Step-2_hayyoe.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726559/SQLite/SQLite-Export-CSV-Step-2_hayyoe.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726559/SQLite/SQLite-Export-CSV-Step-2_hayyoe.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726559/SQLite/SQLite-Export-CSV-Step-2_hayyoe.png></p>
<p>After that, (1) choose the CSV as the export format, (2) specify the CSV file name, (3) check the column names in the first row, (4) choose comma (,) as the column separator, (5) treat the NULL value as empty string, (6) click Finish button to complete exporting.</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726597/SQLite/SQLite-Export-CSV-Step-4_zccwni.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726597/SQLite/SQLite-Export-CSV-Step-4_zccwni.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726597/SQLite/SQLite-Export-CSV-Step-4_zccwni.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726597/SQLite/SQLite-Export-CSV-Step-4_zccwni.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726597/SQLite/SQLite-Export-CSV-Step-4_zccwni.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726597/SQLite/SQLite-Export-CSV-Step-4_zccwni.png></p>
<p>Finally, check the customer.csv file, you will see the following content:</p>
<p><img class=lazyload src=https://yanboyang.com/svg/loading.min.svg data-src=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726639/SQLite/SQLite-Export-CSV-Result-Customers-Data_fna3nv.png data-srcset="https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726639/SQLite/SQLite-Export-CSV-Result-Customers-Data_fna3nv.png, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726639/SQLite/SQLite-Export-CSV-Result-Customers-Data_fna3nv.png 1.5x, https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726639/SQLite/SQLite-Export-CSV-Result-Customers-Data_fna3nv.png 2x" data-sizes=auto alt=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726639/SQLite/SQLite-Export-CSV-Result-Customers-Data_fna3nv.png title=https://res.cloudinary.com/dkvj6mo4c/image/upload/v1617726639/SQLite/SQLite-Export-CSV-Result-Customers-Data_fna3nv.png></p>
<p>In this section, you have learned various ways to export data in the SQLite database to a CSV file.</p>
</div><div class=post-footer id=post-footer>
<div class=post-info>
<div class=post-info-line>
<div class=post-info-mod>
<span>Updated on 2022-01-13</span>
</div>
<div class=post-info-license></div>
</div>
<div class=post-info-line>
<div class=post-info-md><span>
<a class=link-to-markdown href=https://yanboyang.com/sqlite/index.md target=_blank rel="noopener noreferrer">Read Markdown</a>
</span></div>
<div class=post-info-share>
<span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://yanboyang.com/sqlite/ data-title="Getting started SQLite"><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://yanboyang.com/sqlite/><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=https://yanboyang.com/sqlite/ data-title="Getting started SQLite" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://yanboyang.com/sqlite/ data-title="Getting started SQLite"><i data-svg-src=https://yanboyang.com/lib/simple-icons/icons/line.min.svg></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://yanboyang.com/sqlite/ data-title="Getting started SQLite"><i class="fab fa-weibo fa-fw"></i></a><a href=javascript:void(0); title="Share on Myspace" data-sharer=myspace data-url=https://yanboyang.com/sqlite/ data-title="Getting started SQLite" data-description><i data-svg-src=https://yanboyang.com/lib/simple-icons/icons/myspace.min.svg></i></a><a href=javascript:void(0); title="Share on Blogger" data-sharer=blogger data-url=https://yanboyang.com/sqlite/ data-title="Getting started SQLite" data-description><i class="fab fa-blogger fa-fw"></i></a><a href=javascript:void(0); title="Share on Evernote" data-sharer=evernote data-url=https://yanboyang.com/sqlite/ data-title="Getting started SQLite"><i class="fab fa-evernote fa-fw"></i></a></span>
</div>
</div>
</div>
<div class=post-info-more>
<section class=post-tags></section>
<section>
<span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=https://yanboyang.com/>Home</a></span>
</section>
</div>
<div class=post-nav><a href=https://yanboyang.com/rstudio/ class=prev rel=prev title="Launching RStudio in Docker"><i class="fas fa-angle-left fa-fw"></i>Launching RStudio in Docker</a>
<a href=https://yanboyang.com/bigdataarchitectures/ class=next rel=next title="4 big data architectures, Data Streaming, Lambda architecture, Kappa architecture and Unifield architecture">4 big data architectures, Data Streaming, Lambda architecture, Kappa architecture and Unifield architecture<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id=comments><div id=disqus_thread class=comment></div><noscript>
Please enable JavaScript to view the comments powered by <a href=https://disqus.com/?ref_noscript>Disqus</a>.
</noscript></div></article></div>
</main><footer class=footer>
<div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreferrer" title="Hugo 0.92.0">Hugo</a> | Theme - <a href=https://github.com/sunt-programator/CodeIT target=_blank rel="noopener noreferrer" title="CodeIT 0.2.10"><i class="fas fa-laptop-code fa-fw"></i> CodeIT</a>
</div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2019 - 2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://yanboyang.com/ target=_blank rel="noopener noreferrer">Boyang Yan</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div>
</div>
</footer></div>
<div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top">
<i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments">
<i class="fas fa-comment fa-fw"></i>
</a>
</div><link rel=stylesheet href=https://yanboyang.com/lib/katex/katex.min.css><link rel=stylesheet href=https://yanboyang.com/lib/katex/copy-tex.min.css><link rel=stylesheet href=https://yanboyang.com/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=https://boyang-blog.disqus.com/embed.js defer></script><script type=text/javascript src=https://yanboyang.com/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/lunr/lunr.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/sharer/sharer.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/katex/katex.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/katex/auto-render.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/katex/copy-tex.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/katex/mhchem.min.js></script><script type=text/javascript src=https://yanboyang.com/lib/cookieconsent/cookieconsent.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:1e3},comment:{},cookieconsent:{content:{dismiss:"Got it!",link:"Learn more",message:"This website uses Cookies to improve your experience."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=https://yanboyang.com/js/theme.min.js></script></body>
</html>